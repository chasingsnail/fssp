/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{b(jQuery)}}(function(e){e.ui=e.ui||{};e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});e.fn.extend({scrollParent:function(c){var i=this.css("position"),j=i==="absolute",b=c?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var g=e(this);if(j&&g.css("position")==="static"){return false}return b.test(g.css("overflow")+g.css("overflow-y")+g.css("overflow-x"))}).eq(0);return i==="fixed"||!a.length?e(this[0].ownerDocument||document):a},uniqueId:(function(){var a=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++a)}})}})(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){e(this).removeAttr("id")}})}});function f(j,l){var b,c,k,a=j.nodeName.toLowerCase();if("area"===a){b=j.parentNode;c=b.name;if(!j.href||!c||b.nodeName.toLowerCase()!=="map"){return false}k=e("img[usemap='#"+c+"']")[0];return !!k&&d(k)}return(/^(input|select|textarea|button|object)$/.test(a)?!j.disabled:"a"===a?j.href||l:l)&&d(j)}function d(a){return e.expr.filters.visible(a)&&!e(a).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(a){return function(b){return !!e.data(b,a)}}):function(a,b,c){return !!e.data(a,c[3])},focusable:function(a){return f(a,!isNaN(e.attr(a,"tabindex")))},tabbable:function(a){var c=e.attr(a,"tabindex"),b=isNaN(c);return(b||c>=0)&&f(a,!b)}});if(!e("<a>").outerWidth(1).jquery){e.each(["Width","Height"],function(i,l){var k=l==="Width"?["Left","Right"]:["Top","Bottom"],c=l.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function b(h,j,n,g){e.each(k,function(){j-=parseFloat(e.css(h,"padding"+this))||0;if(n){j-=parseFloat(e.css(h,"border"+this+"Width"))||0}if(g){j-=parseFloat(e.css(h,"margin"+this))||0}});return j}e.fn["inner"+l]=function(g){if(g===undefined){return a["inner"+l].call(this)}return this.each(function(){e(this).css(c,b(this,g)+"px")})};e.fn["outer"+l]=function(h,g){if(typeof h!=="number"){return a["outer"+l].call(this,h)}return this.each(function(){e(this).css(c,b(this,h,true,g)+"px")})}})}if(!e.fn.addBack){e.fn.addBack=function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}if(e("<a>").data("a-b","a").removeData("a-b").data("a-b")){e.fn.removeData=(function(a){return function(b){if(arguments.length){return a.call(this,e.camelCase(b))}else{return a.call(this)}}})(e.fn.removeData)}e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());e.fn.extend({focus:(function(a){return function(c,b){return typeof c==="number"?this.each(function(){var h=this;setTimeout(function(){e(h).focus();if(b){b.call(h)}},c)}):a.apply(this,arguments)}})(e.fn.focus),disableSelection:(function(){var a="onselectstart" in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(a+".ui-disableSelection",function(b){b.preventDefault()})}})(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(a){if(a!==undefined){return this.css("zIndex",a)}if(this.length){var c=e(this[0]),h,b;while(c.length&&c[0]!==document){h=c.css("position");if(h==="absolute"||h==="relative"||h==="fixed"){b=parseInt(c.css("zIndex"),10);if(!isNaN(b)&&b!==0){return b}}c=c.parent()}}return 0}});e.ui.plugin={add:function(i,c,a){var j,b=e.ui[i].prototype;for(j in a){b.plugins[j]=b.plugins[j]||[];b.plugins[j].push([c,a[j]])}},call:function(l,c,i,k){var b,a=l.plugins[c];if(!a){return}if(!k&&(!l.element[0].parentNode||l.element[0].parentNode.nodeType===11)){return}for(b=0;b<a.length;b++){if(l.options[a[b][0]]){a[b][1].apply(l.element,i)}}}}}));
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{b(jQuery)}}(function(i){i.ui=i.ui||{};var f=i.ui.version="1.12.1";var h=0;var g=Array.prototype.slice;i.cleanData=(function(a){return function(m){var d,c,e;for(e=0;(c=m[e])!=null;e++){try{d=i._data(c,"events");if(d&&d.remove){i(c).triggerHandler("remove")}}catch(b){}}a(m)}})(i.cleanData);i.widget=function(r,q,a){var c,o,b;var p={};var d=r.split(".")[0];r=r.split(".")[1];var e=d+"-"+r;if(!a){a=q;q=i.Widget}if(i.isArray(a)){a=i.extend.apply(null,[{}].concat(a))}i.expr[":"][e.toLowerCase()]=function(k){return !!i.data(k,e)};i[d]=i[d]||{};c=i[d][r];o=i[d][r]=function(l,k){if(!this._createWidget){return new o(l,k)}if(arguments.length){this._createWidget(l,k)}};i.extend(o,c,{version:a.version,_proto:i.extend({},a),_childConstructors:[]});b=new q();b.options=i.widget.extend({},b.options);i.each(a,function(k,l){if(!i.isFunction(l)){p[k]=l;return}p[k]=(function(){function n(){return q.prototype[k].apply(this,arguments)}function m(t){return q.prototype[k].apply(this,t)}return function(){var v=this._super;var x=this._superApply;var w;this._super=n;this._superApply=m;w=l.apply(this,arguments);this._super=v;this._superApply=x;return w}})()});o.prototype=i.widget.extend(b,{widgetEventPrefix:c?(b.widgetEventPrefix||r):r},p,{constructor:o,namespace:d,widgetName:r,widgetFullName:e});if(c){i.each(c._childConstructors,function(l,k){var m=k.prototype;i.widget(m.namespace+"."+m.widgetName,o,k._proto)});delete c._childConstructors}else{q._childConstructors.push(o)}i.widget.bridge(r,o);return o};i.widget.extend=function(a){var e=g.call(arguments,1);var b=0;var l=e.length;var d;var c;for(;b<l;b++){for(d in e[b]){c=e[b][d];if(e[b].hasOwnProperty(d)&&c!==undefined){if(i.isPlainObject(c)){a[d]=i.isPlainObject(a[d])?i.widget.extend({},a[d],c):i.widget.extend({},c)}else{a[d]=c}}}}return a};i.widget.bridge=function(b,c){var a=c.prototype.widgetFullName||b;i.fn[b]=function(e){var n=typeof e==="string";var m=g.call(arguments,1);var d=this;if(n){if(!this.length&&e==="instance"){d=undefined}else{this.each(function(){var l;var k=i.data(this,a);if(e==="instance"){d=k;return false}if(!k){return i.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+e+"'")}if(!i.isFunction(k[e])||e.charAt(0)==="_"){return i.error("no such method '"+e+"' for "+b+" widget instance")}l=k[e].apply(k,m);if(l!==k&&l!==undefined){d=l&&l.jquery?d.pushStack(l.get()):l;return false}})}}else{if(m.length){e=i.widget.extend.apply(null,[e].concat(m))}this.each(function(){var k=i.data(this,a);if(k){k.option(e||{});if(k._init){k._init()}}else{i.data(this,a,new c(e,this))}})}return d}};i.Widget=function(){};i.Widget._childConstructors=[];i.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(b,a){a=i(a||this.defaultElement||this)[0];this.element=i(a);this.uuid=h++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=i();this.hoverable=i();this.focusable=i();this.classesElementLookup={};if(a!==this){i.data(a,this.widgetFullName,this);this._on(true,this.element,{remove:function(c){if(c.target===a){this.destroy()}}});this.document=i(a.style?a.ownerDocument:a.document||a);this.window=i(this.document[0].defaultView||this.document[0].parentWindow)}this.options=i.widget.extend({},this.options,this._getCreateOptions(),b);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled)}this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){var a=this;this._destroy();i.each(this.classesElementLookup,function(c,b){a._removeClass(b,c)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:i.noop,widget:function(){return this.element},option:function(c,b){var m=c;var a;var d;var e;if(arguments.length===0){return i.widget.extend({},this.options)}if(typeof c==="string"){m={};a=c.split(".");c=a.shift();if(a.length){d=m[c]=i.widget.extend({},this.options[c]);for(e=0;e<a.length-1;e++){d[a[e]]=d[a[e]]||{};d=d[a[e]]}c=a.pop();if(arguments.length===1){return d[c]===undefined?null:d[c]}d[c]=b}else{if(arguments.length===1){return this.options[c]===undefined?null:this.options[c]}m[c]=b}}this._setOptions(m);return this},_setOptions:function(b){var a;for(a in b){this._setOption(a,b[a])}return this},_setOption:function(b,a){if(b==="classes"){this._setOptionClasses(a)}this.options[b]=a;if(b==="disabled"){this._setOptionDisabled(a)}return this},_setOptionClasses:function(a){var d,b,c;for(d in a){c=this.classesElementLookup[d];if(a[d]===this.options.classes[d]||!c||!c.length){continue}b=i(c.get());this._removeClass(c,d);b.addClass(this._classes({element:b,keys:d,classes:a,add:true}))}},_setOptionDisabled:function(a){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!a);if(a){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_classes:function(d){var c=[];var b=this;d=i.extend({element:this.element,classes:this.options.classes||{}},d);function a(o,e){var n,p;for(p=0;p<o.length;p++){n=b.classesElementLookup[o[p]]||i();if(d.add){n=i(i.unique(n.get().concat(d.element.get())))}else{n=i(n.not(d.element).get())}b.classesElementLookup[o[p]]=n;c.push(o[p]);if(e&&d.classes[o[p]]){c.push(d.classes[o[p]])}}}this._on(d.element,{remove:"_untrackClassesElement"});if(d.keys){a(d.keys.match(/\S+/g)||[],true)}if(d.extra){a(d.extra.match(/\S+/g)||[])}return c.join(" ")},_untrackClassesElement:function(a){var b=this;i.each(b.classesElementLookup,function(d,c){if(i.inArray(a.target,c)!==-1){b.classesElementLookup[d]=i(c.not(a.target).get())}})},_removeClass:function(b,a,c){return this._toggleClass(b,a,c,false)},_addClass:function(b,a,c){return this._toggleClass(b,a,c,true)},_toggleClass:function(c,b,l,a){a=(typeof a==="boolean")?a:l;var e=(typeof c==="string"||c===null),d={extra:e?b:l,keys:e?c:b,element:e?this.element:c,add:a};d.element.toggleClass(this._classes(d),a);return this},_on:function(b,c,d){var a;var e=this;if(typeof b!=="boolean"){d=c;c=b;b=false}if(!d){d=c;c=this.element;a=this.widget()}else{c=a=i(c);this.bindings=this.bindings.add(c)}i.each(d,function(t,u){function q(){if(!b&&(e.options.disabled===true||i(this).hasClass("ui-state-disabled"))){return}return(typeof u==="string"?e[u]:u).apply(e,arguments)}if(typeof u!=="string"){q.guid=u.guid=u.guid||q.guid||i.guid++}var v=t.match(/^([\w:-]*)\s*(.*)$/);var r=v[1]+e.eventNamespace;var s=v[2];if(s){a.on(r,s,q)}else{c.on(r,q)}})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.off(b).off(b);this.bindings=i(this.bindings.not(a).get());this.focusable=i(this.focusable.not(a).get());this.hoverable=i(this.hoverable.not(a).get())},_delay:function(a,b){function c(){return(typeof a==="string"?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(b){this._addClass(i(b.currentTarget),null,"ui-state-hover")},mouseleave:function(b){this._removeClass(i(b.currentTarget),null,"ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(b){this._addClass(i(b.currentTarget),null,"ui-state-focus")},focusout:function(b){this._removeClass(i(b.currentTarget),null,"ui-state-focus")}})},_trigger:function(l,e,d){var a,b;var c=this.options[l];d=d||{};e=i.Event(e);e.type=(l===this.widgetEventPrefix?l:this.widgetEventPrefix+l).toLowerCase();e.target=this.element[0];b=e.originalEvent;if(b){for(a in b){if(!(a in e)){e[a]=b[a]}}}this.element.trigger(e,d);return !(i.isFunction(c)&&c.apply(this.element[0],[e].concat(d))===false||e.isDefaultPrevented())}};i.each({show:"fadeIn",hide:"fadeOut"},function(a,b){i.Widget.prototype["_"+a]=function(e,m,c){if(typeof m==="string"){m={effect:m}}var d;var n=!m?a:m===true||typeof m==="number"?b:m.effect||b;m=m||{};if(typeof m==="number"){m={duration:m}}d=!i.isEmptyObject(m);m.complete=c;if(m.delay){e.delay(m.delay)}if(d&&i.effects&&i.effects.effect[n]){e[a](m)}else{if(n!==a&&e[n]){e[n](m.duration,m.easing,c)}else{e.queue(function(k){i(this)[a]();if(c){c.call(e[0])}k()})}}}});var j=i.widget}));
/*!
 * iCheck v1.0.2, http://git.io/arlzeA
 * ===================================
 * Powerful jQuery and Zepto plugin for checkboxes and radio buttons customization
 *
 * (c) 2013 Damir Sultanov, http://fronteed.com
 * MIT Licensed
 */
(function(c){var g="iCheck",e=g+"-helper",q="checkbox",a="radio",s="checked",y="un"+s,i="disabled",h="determinate",b="in"+h,r="update",u="type",d="click",x="touchbegin.i touchend.i",p="addClass",f="removeClass",l="trigger",A="label",o="cursor",n=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);c.fn[g]=function(O,F){var K='input[type="'+q+'"], input[type="'+a+'"]',M=c(),C=function(P){P.each(function(){var Q=c(this);if(Q.is(K)){M=M.add(Q)}else{M=M.add(Q.find(K))}})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(O)){O=O.toLowerCase();C(this);return M.each(function(){var P=c(this);if(O=="destroy"){v(P,"ifDestroyed")}else{w(P,true,O)}if(c.isFunction(F)){F()}})}else{if(typeof O=="object"||!O){var G=c.extend({checkedClass:s,disabledClass:i,indeterminateClass:b,labelHover:true},O);var H=G.handle;var J=G.hoverClass||"hover";var N=G.focusClass||"focus";var L=G.activeClass||"active";var D=!!G.labelHover;var I=G.labelHoverClass||"hover";var E=(""+G.increaseArea).replace("%","")|0;t(G.label);if(H==q||H==a){K='input[type="'+H+'"]'}if(E<-50){E=-50}C(this);return M.each(function(){var aa=c(this);v(aa);var S=this,P=S.id,T=-E+"%",ab=100+(E*2)+"%",U={position:"absolute",top:T,left:T,display:"block",width:ab,height:ab,margin:0,padding:0,background:"#fff",border:0,opacity:0},V=n?{position:"absolute",visibility:"hidden"}:E?U:{position:"absolute",opacity:0},W=S[u]==q?G.checkboxClass||"i"+q:G.radioClass||"i"+a,Y=c(A+'[for="'+P+'"]').add(aa.closest(A)),X=!!G.aria,R=g+"-"+Math.random().toString(36).substr(2,6),Z='<div class="'+W+'" '+(X?'role="'+S[u]+'" ':""),Q;if(X){Y.each(function(){Z+='aria-labelledby="';if(this.id){Z+=this.id}else{this.id=R;Z+=R}Z+='"'})}Z=aa.wrap(Z+"/>")[l]("ifCreated").parent().append(G.insert);Q=c('<ins class="'+e+'"/>').css(U).appendTo(Z);aa.data(g,{o:G,s:aa.attr("style")}).css(V);!!G.inheritClass&&Z[p](S.className||"");!!G.inheritID&&P&&Z.attr("id",g+"-"+P);Z.css("position","relative");w(aa,true,r);if(Y.length){Y.off(d+".i mouseover.i mouseout.i "+x).on(d+".i mouseover.i mouseout.i "+x,function(ae){var ac=ae[u],ad=c(this);if(!S[i]){if(ac==d){if(c(ae.target).is("a")){return false}w(aa,false,true)}else{if(D){if(/ut|nd/.test(ac)){Z[f](J);ad[f](I)}else{Z[p](J);ad[p](I)}}}if(n||(S.getAttribute("stop")!=null&&S.getAttribute("stop").indexOf(ac)>-1)){ae.stopPropagation()}else{return true}}})}aa.on(d+".i focus.i blur.i keyup.i keydown.i keypress.i",function(ae){var ad=ae[u],ac=ae.keyCode;if(ad==d){return false}else{if(ad=="keydown"&&ac==32){if(!(S[u]==a&&S[s])){if(S[s]){z(aa,s)}else{k(aa,s)}}return false}else{if(ad=="keyup"&&S[u]==a){!S[s]&&k(aa,s)}else{if(/us|ur/.test(ad)){Z[ad=="blur"?f:p](N)}}}}});Q.off(d+" mousedown mouseup mouseover mouseout "+x).on(d+" mousedown mouseup mouseover mouseout "+x,function(ae){var ad=ae[u],ac=/wn|up/.test(ad)?L:J;if(!S[i]){if(ad==d){w(aa,false,true)}else{if(/wn|er|in/.test(ad)){Z[p](ac)}else{Z[f](ac+" "+L)}if(Y.length&&D&&ac==J){Y[/ut|nd/.test(ad)?f:p](I)}}if(n){ae.stopPropagation()}else{if(Y[0]&&(Y[0].className.indexOf("awsui-radio-label")>=0||Y[0].className.indexOf("awsui-checkbox-label")>=0)){return true}else{if(S.getAttribute("propagation")!=null&&S.getAttribute("propagation").indexOf(ad)>-1){return true}return false}}}})})}else{return this}}};function w(C,I,H){var D=C[0],F=/er/.test(H)?b:/bl/.test(H)?i:s,G=H==r?{checked:D[s],disabled:D[i],indeterminate:C.attr(b)=="true"||C.attr(h)=="false"}:D[F];if(/^(ch|di|in)/.test(H)&&!G){k(C,F)}else{if(/^(un|en|de)/.test(H)&&G){z(C,F)}else{if(H==r){for(var E in G){if(G[E]){k(C,E,true)}else{z(C,E,true)}}}else{if(!I||H=="toggle"){if(!I){C[l]("ifClicked")}if(G){if(D[u]!==a){z(C,F)}}else{k(C,F)}}}}}}function k(N,E,C){var M=false;try{M=c("#isMobile").val()}catch(L){}var H=N[0],P=N.parent(),O=E==s,D=E==b,I=E==i,Q=D?h:O?y:"enabled",G=m(N,Q+j(H[u])),K=m(N,E+j(H[u]));if(M=="true"||M==true){if(P.hasClass("ui-checkbox")){P=P.parent()}}if(H[E]!==true){if(!C&&E==s&&H[u]==a&&H.name){var F=N.closest("form"),J='input[name="'+H.name+'"]';J=F.length?F.find(J):c(J);J.each(function(){if(this!==H&&c(this).data(g)){z(c(this),E)}})}if(D){H[E]=true;if(H[s]){z(N,s,"force")}}else{if(!C){H[E]=true}if(O&&H[b]){z(N,b,false)}}B(N,O,E,C)}if(H[i]&&!!m(N,o,true)){P.find("."+e).css(o,"default")}P[p](K||m(N,E)||"");if(!!P.attr("role")&&!D){P.attr("aria-"+(I?i:s),"true")}P[f](G||m(N,Q)||"")}function z(L,E,C){var K=false;try{K=c("#isMobile").val()}catch(J){}var G=L[0],N=L.parent(),M=E==s,D=E==b,H=E==i,O=D?h:M?y:"enabled",F=m(L,O+j(G[u])),I=m(L,E+j(G[u]));if(K=="true"||K==true){if(N.hasClass("ui-checkbox")){N=N.parent()}}if(G[E]!==false){if(D||!C||C=="force"){G[E]=false}B(L,M,O,C)}if(!G[i]&&!!m(L,o,true)){N.find("."+e).css(o,"pointer")}N[f](I||m(L,E)||"");if(!!N.attr("role")&&!D){N.attr("aria-"+(H?i:s),"false")}N[p](F||m(L,O)||"")}function v(C,D){if(C.data(g)){C.parent().html(C.attr("style",C.data(g).s||""));if(D){C[l](D)}C.off(".i").unwrap();c(A+'[for="'+C[0].id+'"]').add(C.closest(A)).off(".i")}}function m(C,E,D){if(C.data(g)){return C.data(g).o[E+(D?"":"Class")]}}function j(C){return C.charAt(0).toUpperCase()+C.slice(1)}function B(D,E,F,C){if(!C){if(E){D[l]("ifToggled")}D[l]("ifChanged")[l]("if"+j(F))}}function t(C){A=C||A}})(window.jQuery||window.Zepto);
/*!
 * =====================================================
 * AWSUI组件库，基于jQuery 1.10.2
 * v1.0 (http://www.actionsoft.com.cn)
 * author zhangy
 * 发布后文件名：aws.util.js
 * =====================================================
 */
var ua=navigator.userAgent.toLowerCase();$.browser={isStrict:document.compatMode=="CSS1Compat",isOpera:ua.indexOf("opera")>-1,isSafari:ua.indexOf("safari")>-1&&ua.indexOf("chrome")==-1,isSafari3:this.isSafari&&ua.indexOf("webkit/5")!=-1,isIE:"ActiveXObject" in window,isIE6:!this.isOpera&&ua.indexOf("msie 6")>-1,isIE7:!this.isOpera&&ua.indexOf("msie 7")>-1,isIE8:!this.isOpera&&ua.indexOf("msie 8")>-1,isIE9:!this.isOpera&&ua.indexOf("msie 9")>-1,isIE10:!this.isOpera&&ua.indexOf("msie 10")>-1,isIE11:(/trident\/7\./).test(ua),isGecko:!this.isSafari&&ua.indexOf("gecko")>-1,isFirefox:!this.isSafari&&ua.indexOf("gecko")>-1&&ua.indexOf("firefox")>-1,isChrome:ua.indexOf("chrome")!==-1,isBorderBox:this.isIE&&!this.isStrict,isWindows:ua.indexOf("windows")!=-1||ua.indexOf("win32")!=-1,isMac:ua.indexOf("macintosh")!=-1||ua.indexOf("mac os x")!=-1,isAir:ua.indexOf("adobeair")!=-1,isLinux:ua.indexOf("linux")!=-1,isSecure:window.location.href.toLowerCase().indexOf("https")===0,isIPhone:ua.match(/(iphone\sos)\s([\d_]+)/)!=null||ua.match(/(ipad).*os\s([\d_]+)/)!=null,isIPhoneX:window.screen.width==375&&window.screen.height==812,isIPad:ua.match(/(ipad).*os\s([\d_]+)/)!=null,isAWSMobilePortalApp:ua.indexOf("awsmobileportal")>0,isAndroid:ua.indexOf("android")>0,isMobile:!!ua.match(/(iphone|ipod|android|ios)/i)};(function($){var parentScrollTopH="";var outserWindowH="";var iframeTop="";try{window.onmessage=function(e){e=e||event;var msg=e.data;if(msg&&msg.indexOf("paramHeight:")>-1){var msgArr=msg.split(":");if(msgArr.length==2){var params=msgArr[1].split(",");if(params.length>2){outserWindowH=params[1];parentScrollTopH=params[2];iframeTop=params[0]}}}}}catch(e){}$.widget("awsui.dialog",{options:{fixed:true,closable:true,draggable:true,containment:"document",isExist:false},close:function(){if(this.options.onClose){if(this.options.onClose()==false){return}}this.destroy()},_init:function(){if(this.options.mode===undefined){this.options.mode=this.options.model}if(this.options.mode===undefined){this.options.mode=true}$("#awsui_quicktip").remove();var title="";if(this.options.title){title=this.options.title}else{if(this.element.attr("title")){title=this.element.attr("title")}}this.element.removeAttr("title","");var wrap=this.options.height!=null&&this.options.height!="auto";var isWizard=false;if(this.element.children().hasClass("awsui-wizard")){isWizard=true}else{if(wrap){if(this.element.children().hasClass("dialog-wrap")){this.element.children().find("dialog-wrap").eq(0).remove()}else{this.element.wrapInner("<div class='dialog-wrap dlg-content'></div>")}}}if(this.element.children().hasClass("dlg-title")){}else{this.title=$("<h2 class='dlg-title'>"+title+"</h2>").prependTo(this.element)}if(this.element.children().hasClass("awsui-public-box-close")){var dialogClose=$(".awsui-public-box-close")}else{var dialogClose=$('<div class="awsui-iconfont awsui-public-box-close">&#58931</div>').appendTo(this.element)}this.element.addClass("awsui-dialog").fadeIn("fast");var self=this;dialogClose.off().on("click",function(){self.close()});if(this.options.closable){dialogClose.show()}else{dialogClose.hide()}if(this.options.buttons){var buts=$("<div class='dlg-button'></div>").appendTo($("<div class='dialog-button-wrap' style='text-align:"+(this.options.buttonAlign!=null?this.options.buttonAlign:"right")+"'></div>").appendTo(this.element));$.each(this.options.buttons,function(i,v){var item=v;var bt=$("<button type='button' class='button "+(item.cls?item.cls:"")+"'></button>").text(item.text).appendTo(buts);bt.on("click",item.handler)});this._setOption("buttons",buts)}this.element.find(".dlg-button .button:last-child").addClass("last");var optionWidth=this.options.width;if(this.options.width){optionWidth=this.options.width;var width=screen.width;if(optionWidth+50>$(window).width()){optionWidth=$(window).width()-50}this.element.css({width:optionWidth-10})}else{if(this.element.outerWidth()+50>$(window).width()){this.element.css({width:$(window).width()-50})}}var MaxHeight=$(window).height();if(wrap){var ih=this.options.height;var wrapH=ih-this.title.outerHeight(true);MaxHeight=MaxHeight-this.title.outerHeight(true);if(this.options.buttons!=null&&this.options.buttons.length){wrapH-=this.element.find(".dlg-button").outerHeight(true);MaxHeight-=this.element.find(".dlg-button").outerHeight(true)}if(wrapH>MaxHeight){wrapH=MaxHeight;wrapH-=44}this.element.find(".dialog-wrap").css({height:wrapH})}else{MaxHeight=MaxHeight-this.title.outerHeight(true);if(this.options.buttons!=null&&this.options.buttons.length){MaxHeight-=this.element.find(".dlg-button").outerHeight(true)}if(this.element.outerHeight()>MaxHeight){this.element.find(".dialog-wrap").css({height:MaxHeight-44})}}if(isWizard){var wizard=this.element.find(".awsui-wizard");this.element.css("height","");if(!this.options.isExist){this.element.css("width","")}}if(this.options.mode===true){$.mask()}var dialogWidth=this.element.outerWidth();var dialogHeight=this.element.outerHeight();var self=this;$(document).on("resize.dialog",function(){var top=0;if(self.options.fixed){self.element.css("position","fixed");top=($(window).height()-dialogHeight)/2+"px"}else{self.element.css("position","absolute");try{if(outserWindowH!=""){top=(parseInt(outserWindowH)-dialogHeight)/2+(parseInt(parentScrollTopH)-parseInt(iframeTop))+"px"}else{top=($(window).height()-dialogHeight)/2+"px"}}catch(e){top=($(window).height()-dialogHeight)/2+"px"}}var left=($(window).width()-dialogWidth)/2+"px";self.element.css({top:top,left:left})});$(document).trigger("resize.dialog");if(this.options.draggable&&$("#isMobile").val()!="true"){var t=this.title;var c=this.options.containment;this.element.draggable({handle:t,containment:c})}else{this.title.css("cursor","default")}var dlg=this;$(window).off("keydown.dialog").on("keydown.dialog",function(e){if(e.keyCode==27&&dlg.options.closable){dlg.close()}});$(document).off("keydown.dialog").on("keydown.dialog",function(e){if(e.keyCode==27&&dlg.options.closable){dlg.close()}});try{setTimeout(function(){dlg.element.find(".dlg-content,.dialog-wrap.dlg-content").preventScroll(dlg.options.scrollDiv)},200)}catch(e){console.log(阻止和功能窗口的滚动事件冒泡失败)}$(".awsui-dialog").off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(e){});$(document.body).find("a").blur();$(document.body).find("button").blur();$(document.body).find("input[type='button']").blur();$(document.body).find(".awsui-dialog").find("button[class$='blue']").focus()},_setOption:function(key,value){if(key==="disabled"){return}this._super(key,value);if(key==="title"){if(!this.options.title){this.title.html("&#160;")}this.title.text(this.options.title)}},_destroy:function(){if(!this.element.hasClass("confirm-window")){$("#simplealert").remove()}this.element.hide();var hasLoadingSimpleAlert=$("#simplealert").find(".loading").length>0;if((this.options.mode===true)&&!hasLoadingSimpleAlert){$.mask("close",this.options.isExist)}this.element.find(".dialog-wrap").children().unwrap();var title=this.element.find(".dlg-title");this.element.attr("title",title.text());title.remove();if(this.options.buttons){this.element.find(".dialog-button-wrap").remove()}this.element.find(".awsui-public-box-close").remove();this.element.removeClass("awsui-dialog").find(".dlg-close").remove();this.element.find("input[type='checkbox'][id='secondaryConfirmCheck']").remove();$(window).unbind("resize.dialog")}});FrmDialog={dlgs:{},open:function(config,url,data,id){if($("#awsui_tooltip").length>0){$("#awsui_tooltip").remove()}var dlg={initId:function(id){id=id||config.id;if(id==null){id=""}this.rawId=id;this.div="id-awsui-win-frm-2013"+id;this.frm="id-awsui-win-frm-2013-frm"+id},init:function(config,url,data){var self=this;var def={width:700,title:"",iconCls:"icon-file"};try{if(JSON.stringify(config).indexOf("CLIENT_COMMON_AC_ACTION_OPEN")>0){var buttons=config.buttons;for(var i=0;i<buttons.length;i++){var btn=buttons[i];if(btn.cls=="blue"){config.buttons.splice(i,1);break}}}}catch(e){}$.extend(def,config||{});def.mode=def.model;var oc=def.onClose;def.onClose=function(){var r=null;if(oc!=null){r=oc()}self.clear();return r};var mode=def.mode;if($(".window-mask").length>0){mode=false}def.mode=mode;if($("#"+this.div).length>0){return null}var s=$("<div id='"+this.div+"'><iframe name='"+this.frm+"' id='"+this.frm+"' frameborder=0 style='width:100%;height:100%' src=''></iframe></div>");$(document.body).append(s);$(s.find("iframe")).off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(event){event.preventDefault()});var dlg=$("#"+this.div).dialog(def);url=url||def.url;if(url!=null){var s="";s+="<html>";s+="<head>";s+="<title>loading...</title>";s+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">';s+="<body>";s+="<p>&nbsp;</p>";s+='<p align="center"><img src="../commons/img/waiting.gif" style="width:40px;"></p>';s+="<p>&nbsp;</p>";s+="</body>";$(s).appendTo($("#"+this.frm)[0].contentWindow.document.body);var fm=$('<form action="'+url+'" TARGET ="'+this.frm+'" method=post></form>').appendTo($("#"+this.div));data=data||def.data||{};for(var key in data){if(data[key]!=null){var jq=$("<input type='hidden' name=\""+key+'">').appendTo(fm);jq.val(data[key])}}if(navigator.userAgent.toLowerCase().indexOf("msie 8")==-1){fm[0].submit();fm.remove()}else{setTimeout(function(){fm[0].submit();fm.remove()},1)}}this.wrap=dlg;return dlg},close:function(){$("#"+this.div).dialog("close");this.clear()},clear:function(){delete FrmDialog.dlgs[this.rawId];$("#"+this.div).remove()},name:function(){return this.frm},win:function(){var ifrm=$("#"+this.frm)[0];return ifrm.contentWindow?ifrm.contentWindow:(ifrm.contentDocument.document?ifrm.contentDocument.document:ifrm.contentDocument)},id:function(id){return this.win().document.getElementById(id)},$:function(st,context){return this.win().jQuery(st,context)}};dlg.initId(id);var inner=dlg.init(config,url,data);if(inner!=null){FrmDialog.dlgs[dlg.rawId]=dlg;return dlg}return null},get:function(id){if(id!=null){return this.dlgs[id]}var keys=[];for(var i in FrmDialog.dlgs){if(FrmDialog.dlgs.hasOwnProperty(i)){keys.push(i)}}var l=keys.length;if(l>1){alert(当前对象拥有多个实例请对特定实例操作);return null}else{if(l==0){}}for(key in FrmDialog.dlgs){return this.dlgs[key]}return null},close:function(id){if(id!=null){return this.get(id).close()}var dlg=this.get();if(dlg!=null){dlg.close()}return},name:function(){var dlg=this.get();if(dlg!=null){return dlg.name()}return null},win:function(){var dlg=this.get();if(dlg!=null){return dlg.win()}return null},id:function(id){var dlg=this.get();if(dlg!=null){return dlg.el()}return null},$:function(st,context){var dlg=this.get();if(dlg!=null){return dlg.$(st,context)}return null}};window.initSideTitle=function(obj,title,iframeId){try{var toolbar=$(obj).contents().find("#AWSRowPageToolbar");if(toolbar.length>0){var w=$(obj).width()-21;toolbar.width(w)}else{toolbar=$(obj).contents().find("#FormToolbar")}if(toolbar.length>0){var titleHtm=$("<span style='font-size:16px;font-weight:700;line-height:28px;'>"+title+"</span>");if(toolbar.children().length>0){$(toolbar.children().get(0)).before(titleHtm)}else{titleHtm.append(titleHtm)}}}catch(e){}};window.AWSForJquerySetVal=function(obj,index,newValue,oldValue){if(obj.nodeName=="SELECT"&&obj.className.indexOf("select2-hidden-accessible")>-1){if(!$(obj).data("cache")){var options=$(obj).select2("getSetting");if(options.options.ajax&&options.options.ajax.cache){$(obj).select2("trigger","queryNotOpen")}}}return newValue};$.openSidebar=function(options){var rootPath=(window.getRootPath?window.getRootPath():"..")+/commons/;var defaults={url:rootPath+"wait.htm",title:"",closeText:"关闭",width:"60%",isMode:false,duration:"slow",iframeId:"",containerId:"",color:"",buttons:[]};var err=function(msg){if(window.console){console.log(msg)}else{alert(msg)}};var opt=$.extend(defaults,options);if(opt.iframeId&&options.topZone==undefined){opt.topZone="hide"}var parentContainer=opt.parent==undefined?window:opt.parent;var sidebarId="aws-sidebar-zone";var contentId="awsui-sidebar-content-container";if(options.parent!=undefined){if(parentContainer.jQuery==undefined){err("父容器没有引入jQuery");return}}else{sidebarId+="-"+opt.containerId;contentId+="-"+opt.containerId}var sidebar=parentContainer.$('<div class="awsui-sidebar" style="display:none;"></div>');var w=$(parentContainer).width();if(parentContainer.$("#"+sidebarId).length==0){var top=parentContainer.$('<div class="awsui-sidebar-top"></div>');var content=parentContainer.$('<div id="awsui-sidebar-content-container" class="awsui-sidebar-content-container"></div>');var buttonZone=parentContainer.$('<div class="awsui-sidebar-button"></div>');var iframe;var container;sidebar.attr("id",sidebarId);content.attr("id",contentId);if(opt.containerId){if(parentContainer.$("#"+opt.containerId).length>0){content.append($("#"+opt.containerId))}else{content.html('<div id="'+opt.containerId+'" width="100%" height="100%"></div>')}}if(opt.iframeId){var initsrc=rootPath+"wait.htm";if(opt.title!=""){content.html("<iframe onload=\"window.initSideTitle(this,'"+opt.title+'\');return false;" id="'+opt.iframeId+'" name="'+opt.iframeId+'"  src="'+initsrc+'" frameborder="0" width="100%" height="100%"></iframe>')}else{content.html('<iframe id="'+opt.iframeId+'" name="'+opt.iframeId+'"  src="'+initsrc+'" frameborder="0" width="100%" height="100%"></iframe>')}}if(opt.topZone=="hide"){var closeIcon=$('<div class="awsui-iconfont awsui-sidebar-operate">&#xe6fe;</div>');closeIcon.attr("title",opt.closeText);sidebar.append(closeIcon);var defaultCloseCss={width:"25px",height:"23px",lineHeight:"23px",position:"absolute",top:"12px",right:"10px",zIndex:200,cursor:"pointer",opacity:"0.8",background:"transparent",borderRadius:"25px"};var closeCss=$.extend(defaultCloseCss,opt.closeCss);closeIcon.css(closeCss);content.css({top:"0px"})}else{top.append('<div class="awsui-iconfont awsui-sidebar-operate" title="关闭">&#xe6fe;</div>');top.append(buttonZone);var button="";if(opt.buttons){for(var i=0;i<opt.buttons.length;i++){var btn=opt.buttons[i];var button=$('<li class="button" style="border:0px;cursor:pointer;width:59px;height:40px;line-height:50px;text-align:center;padding:0px 10px 0px 10px;float:left"></li>');buttonZone.append(button);if(btn.display){button.show()}button.attr("id",btn.id);button.text(btn.text);var sidebarColor=opt.color.toLowerCase();if(sidebarColor=="white"||sidebarColor=="#fff"||sidebarColor=="#ffffff"){button.css({color:"black"})}button.off("click").on("click",btn.click)}}sidebar.append(top)}sidebar.append(content);var containBody=$(parentContainer.document.body);if(containBody.find("#"+sidebarId).length==0){containBody.append(sidebar)}var op=sidebar.find(".awsui-sidebar-operate");var opW=op.width();if(!opt.iframeId||opt.topZone!="hide"){sidebar.find(".awsui-sidebar-top").css({background:opt.color});sidebar.find(".awsui-sidebar-operate").css({background:opt.color})}var sideWidth=opt.width;if(sideWidth.indexOf("%")>-1){var str=sideWidth.substring(0,sideWidth.length-1);sideWidth=w*parseFloat(parseInt(str)/100)}if(sideWidth>=(w)||sideWidth=="100%"){sideWidth=w;op.css("left","0")}sidebar.css({right:"-"+w+"px",width:sideWidth})}else{sidebar=parentContainer.$("#"+sidebarId);op=sidebar.find(".awsui-sidebar-operate")}var defaultComplete=function(){if(opt.containerId){}if(opt.iframeId){var sideFrameWindow=parentContainer.frames[opt.iframeId];sideFrameWindow.location=opt.url}};var complete=opt.complete;if(complete==undefined){complete=defaultComplete}else{if(typeof(complete)=="function"){var comp=complete;complete=function(){defaultComplete();comp()}}else{complete=defaultComplete}}var defaultCloseCallback=function(){if(opt.isMode){$("#window-mask").off("click.close");$.mask("close")}sidebar.animate({right:"-"+w+"px"},opt.duration,function(){})};var closeCallback=opt.onClose;if(closeCallback==undefined){closeCallback=defaultCloseCallback}else{if(typeof(closeCallback)=="function"){var tmp=closeCallback;closeCallback=function(){tmp();defaultCloseCallback()}}else{closeCallback=defaultCloseCallback}}op.off("click").on("click",closeCallback);if(opt.isMode){$.mask();$("#window-mask").css("z-index",2);$("#window-mask").off("click.close").on("click.close",closeCallback)}sidebar.show();if(opt.containerId){$("#"+opt.containerId).show()}sidebar.animate({right:"0px"},opt.duration,function(){if(complete){complete()}})};var maskStackCount=0;$.mask=function(method,isExist){if(typeof method=="undefined"){method="open"}if(method==undefined){method="open"}if(method=="open"){if(maskStackCount==0){if($("#iweboffice").length>0&&window.hideGold){hideGold(true,"mask")}if($("#iwebpdftable").length>0){$("#iwebpdftable").hide()}var mask=$("<div id='window-mask' class='window-mask' style='display:none;'></div>").appendTo("body");var height=($(window).height())+"px";if($.browser.isIPhoneX){height=($(window).height()+34)+"px"}mask.css({width:$(window).width()+"px",height:height,filter:"alpha(opacity=60)"}).show();$(window).on("resize.mask",function(){mask.css({width:$(window).width()+"px",height:height})});if($.browser.isMobile||$("#isMobile").val()==="true"){mask.off("touchmove.mask").on("touchmove.mask",function(event){event.preventDefault();return false})}mask.off("mousewheel.awsui.mask").on("mousewheel.awsui.mask",function(event){event.preventDefault();return false})}maskStackCount++}else{if(method=="close"){maskStackCount--;if(maskStackCount<0){maskStackCount=0}if(isExist){maskStackCount=0}if(maskStackCount==0){$("#window-mask").remove();if($("#iweboffice").length>0&&window.hideGold){hideGold(false,"mask")}if($("#iwebpdftable").length>0){$("#iwebpdftable").show()}$(window).off("resize.mask")}}}};$.simpleAlert=function(msg,type,delay,options){var isMobile=$("#isMobile").length>0?($("#isMobile").val()=="true"):false;if(typeof msg=="string"&&msg=="close"){$("#simplealert").remove();$.mask("close");return}if(arguments.length==3){if($.type(delay)=="object"){options=delay;delay=null}}var defaults={alertType:"info"};var opt=$.extend(defaults,options);if($("#simplealert").length){$("#simplealert").remove()}if(type){opt.alertType=type}if(opt.alertType=="infoClose"){delay="no";opt.alertType="info"}if(opt.forceClose===true){}else{if(opt.alertType=="loading"||opt.alertType=="error"||opt.alertType=="warning"){delay="no"}}if(opt.alertType=="loading"){if(opt.model===undefined){opt.model=opt.mode=true}}if($(".window-mask").length>0){opt.model=opt.mode=false}var fontIconObj={};if(opt.alertType=="ok"){fontIconObj[opt.alertType]={icon:"&#60017;",color:"green"}}else{if(opt.alertType=="info"){fontIconObj[opt.alertType]={icon:"&#58933;",color:"blue"}}else{if(opt.alertType=="warning"){fontIconObj[opt.alertType]={icon:"&#58941;",color:"orange"}}else{if(opt.alertType=="error"){fontIconObj[opt.alertType]={icon:"&#58927;",color:"red"}}}}}var imgRootPath=(window.getRootPath?window.getRootPath():"..")+"/commons/img/";var simpleAlert=$("<div id='simplealert' class='simplealert radius4 "+type+" awsui-public-box' style='position:absolute;'></div>").appendTo("body");var html="";if(type=="loading"){if(msg==""){msg=正在加载+"..."}html="<div>";html+="<span class='loading'><img src='"+imgRootPath+"waiting.gif'/></span>"}else{html="<div class='awsui-public-box-icon'><div class='awsui-iconfont awsui-icon-"+fontIconObj[opt.alertType].color+"'>"+fontIconObj[opt.alertType].icon+"</div>"}if(msg.indexOf("\n")==0){msg=msg.substring(1,msg.length)}html+="</div>";if(msg!=""){html+="<div class='msg'>"+msg.replace(/\n/g,"<br/>")+"</div>"}simpleAlert.html(html);var msg=simpleAlert.children(".msg");var icon=simpleAlert.children(".icon");simpleAlert.fadeIn();if(msg.width()>=425){if((msg.width()+icon.width())>(simpleAlert.width())){msg.css("max-width",simpleAlert.width()-icon.width())}}var top=($(window).height()-simpleAlert.height())/2+$(window).scrollTop();var left=($(window).width()-simpleAlert.outerWidth())/2+$(window).scrollLeft();if(top<0){simpleAlert.css("height",($(window).height()-200)+"px");top=($(window).height()-simpleAlert.height())/2+$(window).scrollTop();msg.css("overflow","auto")}else{msg.css("overflow","none")}simpleAlert.css("top",top+"px");simpleAlert.css("left",left+"px");icon.css("top",(simpleAlert.height()-icon.height())/2-5);if(opt.model===true||opt.mode===true){$.mask()}if(delay!="no"){setTimeout(function(){if(opt.model||opt.mode===true){$.mask("close")}if(opt.callback!=null){opt.callback()}try{simpleAlert.fadeOut(300)}catch(e){}},delay?delay:1500)}else{if(opt.alertType!="loading"){var closeDom=$('<span class="awsui-iconfont awsui-public-box-close">&#58931;</span>');if(isMobile){closeDom=$('<div class="awsui-iconfont" style="font-size:18px;">&#59134;</div>').css({position:"absolute",top:"3px",right:"3px"})}closeDom.appendTo(simpleAlert).click(function(){$("#simplealert").remove();if(opt.model||opt.mode===true){$.mask("close")}if(opt.callback!=null){opt.callback()}});msg.css("margin-right",17)}}if(msg.height()>$(window).height()){msg.css("height",(simpleAlert.height()-20))}var msgTop=(simpleAlert.height()-msg.height())/2};$.confirm=function(options){var isMobile=false;if($("#isMobile").length>0){isMobile=$("#isMobile").val=="true"}var defaults={title:提示,model:true,bOkText:确定,bCancelText:取消,type:"confirm",secondaryConfirm:false,secondaryConfirmInfo:是确定};var opt=$.extend(defaults,options);if(opt.model){$.mask()}var checkbox="";if(opt.secondaryConfirm){checkbox="<div class='msg'><input id='secondaryConfirmCheck' type='checkbox' class='awsui-checkbox'><label for='secondaryConfirmCheck' class='awsui-checkbox-label'>"+opt.secondaryConfirmInfo+"</label></div>"}var confirmWin=$("<div class='confirm-window'><div class='msg'>"+(options.content.replace(/\n/g,"<br/>")||"")+"</div>"+checkbox+"</div>");$("body").append(confirmWin);var bts=[{text:options.bOkText?options.bOkText:defaults.bOkText,cls:options.cls?options.cls:"blue",handler:function(){if(!options.onConfirm||options.onConfirm()!==false){confirmWin.dialog("close");return false}return false}}];if(opt.type!="alert"){bts.push({text:options.bCancelText?options.bCancelText:defaults.bCancelText,handler:function(){if(!options.onClose||options.onClose()!==false){if(isMobile==false){confirmWin.dialog("close");return false}}return false}})}opt.buttons=bts;opt.buttonAlign="center";if(options.onClose){opt.onClose=function(){options.onClose();confirmWin.remove()}}else{opt.onClose=function(){confirmWin.remove()}}if(isMobile==false){confirmWin.dialog(opt)}else{var okCallback=opt.buttons[0].handler;var cancelCallback=opt.buttons[1].handler;mobileConfirmDialog(opt.title,opt.content,okCallback,cancelCallback)}if(opt.secondaryConfirm){$("#secondaryConfirmCheck").check();confirmWin.find("button[class='button blue']").attr("disabled","true");confirmWin.find("button[class='button blue']").addClass("disable");$("#secondaryConfirmCheck").on("ifClicked",function(){if(!$("#secondaryConfirmCheck").prop("checked")){confirmWin.find("button[class='button blue disable']").removeAttr("disabled");confirmWin.find("button[class='button blue disable']").removeClass("disable")}else{confirmWin.find("button[class='button blue']").attr("disabled","true");confirmWin.find("button[class='button blue']").addClass("disable")}})}$(document.body).find("a").blur();$(document.body).find("button").blur();$(document.body).find("input[type='button']").blur();$(document.body).find(".confirm-window").find("button[class$='blue']").focus()};var ctp=function(id,temp,opt){if(temp.is(document)){return}if(!temp.offset()||temp.hasClass("cke_wysiwyg_frame")||$.trim(opt.text)==""){return}$("#"+id).remove();var tip=$("<div id='"+id+"' class='tooltip radius4'><div class='tooltip-content'></div></div>").appendTo("body");tip.data("target",temp);var arrow="<span class='tooltip-arrow'></span><span class='tooltip-arrow-inner'></span>";if(opt.text&&typeof opt.text=="object"){tip.find(".tooltip-content").html(arrow).append(opt.text.clone(true).show())}else{tip.find(".tooltip-content").html(arrow+opt.text);$(document).off("click.tooltip")}var mHeight=-1;mHeight=($(window).height()-temp.height())/2-20;if(opt.maxWidth){tip.find(".tooltip-content").css({"max-width":opt.maxWidth,"max-height":mHeight})}opt.bordercolor=opt.borderColor?opt.borderColor:opt.bordercolor;opt.bgcolor=opt.bgColor?opt.bgColor:opt.bgcolor;var top=0,left=0,arrowLeft=0,css1,css2;if(opt.position=="bottom"){css1={top:"-12px",left:0,"border-bottom":"6px solid "+opt.bordercolor};css2={top:"-10px",left:0,"border-bottom":"6px solid "+opt.bgcolor};top=temp.offset().top+temp.outerHeight()+10;left=temp.offset().left}else{if(opt.position=="top"){css1={top:"27px",left:0,"border-top":"6px solid "+opt.bordercolor};css2={top:"27px",left:0,"border-top":"6px solid "+opt.bgcolor};top=temp.offset().top-temp.outerHeight()-10;if(opt.close==true){top=top-20;css1.top="47px";css2.top="46px"}left=temp.offset().left}else{if(opt.position=="left"){css1={top:"7px",right:"-21px","border-left":"6px solid "+opt.bordercolor};css2={top:"7px",right:"-20px","border-left":"6px solid "+opt.bgcolor};top=temp.offset().top;left=temp.offset().left-temp.outerWidth()/2-tip.width()-5}else{if(opt.position=="right"){css1={top:"7px",left:"-21px","border-right":"6px solid "+opt.bordercolor};css2={top:"7px",left:"-20px","border-right":"6px solid "+opt.bgcolor};top=temp.offset().top;left=temp.offset().left+temp.outerWidth()+10}}}}if(opt.position=="bottom"&&top+tip.outerHeight()>($(window).height()+$(window).scrollTop())){top=Math.abs(temp.offset().top-tip.outerHeight()-10);var toheight=tip.outerHeight();css1={top:toheight-1,left:0,"border-top":"6px solid "+opt.bordercolor};css2={top:toheight-2,left:0,"border-top":"6px solid "+opt.bgcolor};if(opt.arrow_left!=null){css1.left=opt.arrow_left;css2.left=opt.arrow_left}}if(left+tip.outerWidth()+2>$(window).width()){left=Math.abs(left+temp.outerWidth()-tip.outerWidth());if(opt.arrow_left!=null){css1.left=opt.arrow_left;css2.left=opt.arrow_left}else{css1.left=tip.outerWidth()-30;css2.left=tip.outerWidth()-30}}tip.find(".tooltip-arrow").css(css1);tip.find(".tooltip-arrow-inner").css(css2);tip.css({color:opt.color,border:"1px solid "+opt.bordercolor,background:opt.bgcolor,top:top,left:left});tip.fadeIn()};$.fn.tooltip=function(options){var id="awsui_tooltip";var selector="#"+id;if(typeof options=="string"){if(options=="close"){$(selector).remove();$(document).off("mousedown.tooltip")}}else{var defaults={bordercolor:"#CCC",position:"bottom",bgcolor:"#fff",color:"#444",autoClose:false,arrow_left:null,maxWidth:250,close:false};var opt=$.extend(defaults,options);var temp=$(this);ctp(id,temp,opt);if(opt.autoClose){$(selector).off("mousedown.click").on("mousedown.click",function(e){e.stopPropagation()});$(document).off("mousedown.tooltip").on("mousedown.tooltip",function(e){var dragel=$(selector)[0],target=e.target;if(dragel!==target&&!$.contains(dragel,target)){temp.tooltip("close")}})}if(opt.close){$("#"+id+" div.tooltip-content").css({});$('<span class="awsui-tabs-icon close"></span>').appendTo($(selector)).click(function(){temp.tooltip("close")});$(selector).css({width:$(selector).outerWidth()+$(selector).find(".close").width()})}if(opt.delay){setTimeout(function(){$(selector).remove();$(document).off("mousedown.tooltip")},opt.delay)}}};$.fn.quicktip=function(option){var id="awsui_quicktip";if(option=="close"){$("#"+id).remove()}$(this).off("mouseover.over").on("mouseover.over",function(event){var defaults={bordercolor:"transparent",position:"bottom",bgcolor:"#000",color:"#fff",autoClose:false,arrow_left:null,maxWidth:250};var target=event.target;if(target){var tipDom=$("#"+id);if(tipDom.length>0&&tipDom.is(":visible")&&tipDom.data("target")&&tipDom.data("target").is(target)){return}target=$(target);if(target.hasClass("iCheck-helper")){target=target.parent()}if(!(target.attr("title")&&!target.attr("no-awsui-qtip"))&&!(target.hasClass("awsui-qtip")||target.attr("awsui-qtip"))){target=target.parent()}if(target.is(":disabled")){return true}if(target.attr("title")&&!target.attr("no-awsui-qtip")){target.attr("awsui-qtip",target.attr("title"));target.removeAttr("title")}if(target.hasClass("awsui-qtip")||target.attr("awsui-qtip")){if($.browser.isMobile||$.browser.isIPad){return}var props=target.attr("awsui-qtip");if(props!=null&&props.length>0){var o=null;try{o=awsui.decode("{"+props+"}");if(o.text==null){o={text:props}}}catch(e){o={text:props}}var opt=$.extend(defaults,o);ctp(id,target,opt,event);$("#"+id).on("mouseleave.awsui.quicktip",function(){target.off("mouseleave.awsui.quicktip");$("#"+id).off("mouseleave.awsui.quicktip");$("#"+id).remove()});target.on("mouseleave.awsui.quicktip",function(){$("#"+id).remove();target.off("mouseleave.awsui.quicktip");$("#"+id).off("mouseleave.awsui.quicktip")});target.on("mousedown.awsui.quicktip",function(){$("#"+id).remove();target.off("mousedown.awsui.quicktip");$("#"+id).off("mousedown.awsui.quicktip")})}}}})};$.fn.popbox=function(options){var obj=$(this);if(typeof options=="string"&&options=="close"){if(obj.length>0&&obj.is(":visible")){obj.hide();$(".awsui-popbox-arrow").remove();$(".awsui-popbox-arrow-inner").remove();$(document).off("mousedown.popbox_");if(obj.data("popboxConfig")){$(obj.data("popboxConfig").target).data("popbox",null);$(obj.data("popboxConfig").target).find(".awsui-arrow").removeClass("up")}}return}if(window.iweboffice){$(iweboffice).css("visibility","hidden")}var opt={width:"200",height:"200",target:null,distanceTop:5,distanceLeft:10,hideArrow:false,callBack:null};opt=$.extend(opt,options);if($(opt.target).data("popbox")===true){return}obj.data("popboxConfig",options);if(!obj.hasClass("awsui-pop")){obj.addClass("awsui-pop")}var arrow=$("<div class='awsui-popbox-arrow top'></div>").appendTo("body");var arrow_inner=$("<div class='awsui-popbox-arrow-inner top'></div>").appendTo("body");var target=$(opt.target),offsetLeft=target.offset().left,offsetTop=target.offset().top,arrowTop=0,arrowInnerToop=0;var popBoxHeight=0;$(this).css("top",-8000).show();obj.css({top:-8000,width:opt.width,height:opt.height});var popBoxHeight=$(this).outerHeight();var popBoxWidth=$(this).outerWidth();$(this).css("top",0).hide();if($(document).height()-offsetTop-target.height()-40<popBoxHeight&&offsetTop>popBoxHeight){arrowTop=offsetTop-arrow.outerHeight()/2-opt.distanceTop;arrowInnerToop=arrowTop-1;if(opt.hideArrow){offsetTop=offsetTop-1-popBoxHeight}else{offsetTop=offsetTop-arrow.outerHeight()/2-opt.distanceTop-popBoxHeight}arrow.removeClass("top").addClass("bottom");arrow_inner.removeClass("top").addClass("bottom")}else{if($(document).height()-offsetTop<popBoxHeight){var newHeight=$(document).height()+(popBoxHeight-($(document).height()-offsetTop))+target.outerHeight()+50}arrowTop=offsetTop+target.outerHeight()-arrow.outerHeight()/2+opt.distanceTop;arrowInnerToop=arrowTop+1;if(opt.hideArrow){offsetTop=offsetTop+target.outerHeight()+1}else{offsetTop=offsetTop+target.outerHeight()+arrow.outerHeight()/2+opt.distanceTop}}if((offsetLeft+popBoxWidth)>$(window).width()){if(offsetLeft+target.outerWidth()>popBoxWidth){offsetLeft=offsetLeft-popBoxWidth+target.outerWidth()}else{offsetLeft=($(window).width()-popBoxWidth)/2}}initPosition();$(document).off("mousedown.popbox").on("mousedown.popbox",".awsui-popbox",function(e){e.stopPropagation()});function innerClose(){if(window.iweboffice){$(iweboffice).css("visibility","")}$(".awsui-popbox").hide();$(".awsui-popbox-arrow").remove();$(".awsui-popbox-arrow-inner").remove();$(document).off("mousedown.popbox_");$(opt.target).data("popbox",null);$(opt.target).find(".awsui-arrow").removeClass("up");if(options.onClose){options.onClose()}return}$(document).off("mousedown.popbox_").on("mousedown.popbox_",function(e){if($(opt.target).is(e.target)||$(opt.target).find(e.target).length>0){$(opt.target).data("popbox",true);return false}if($(e.target).parent().parent().parent().hasClass("confirm-window")){return}if($(e.target).parent().parent().hasClass("confirm-window")){return}if($(e.target).parent().hasClass("confirm-window")){return}if($(e.target).hasClass("confirm-window")){return}if($(e.target).hasClass("window-mask")){return}if($(e.target).attr("id")=="id-awsui-win-frm-2013address_dialog"){return}if($(e.target).parent().attr("id")=="id-awsui-win-frm-2013address_dialog"){return}if($(e.target).parent().parent().attr("id")=="id-awsui-win-frm-2013address_dialog"){return}if($(e.target).parent().parent().parent().attr("id")=="id-awsui-win-frm-2013address_dialog"){return}if($(e.target).hasClass("awsui-dialog")){return}if($(e.target).parent().hasClass("awsui-dialog")){return}if($(e.target).parent().parent().hasClass("awsui-dialog")){return}if($(e.target).parent().parent().parent().hasClass("awsui-dialog")){return}innerClose(obj)});function initPosition(){obj.css({left:offsetLeft,top:offsetTop}).fadeIn("fast",function callb(){if(opt.callBack){opt.callBack()}});if(opt.hideArrow){arrow.css("display","none");arrow_inner.css("display","none")}else{arrow.css({left:target.offset().left+target.outerWidth()/2-opt.distanceLeft,top:arrowTop}).fadeIn("fast");arrow_inner.css({left:target.offset().left+target.outerWidth()/2-opt.distanceLeft,top:arrowInnerToop})}}};var current_extend_menu=null;$.fn.menu=function(options){if(typeof options=="string"&&options=="close"){$(this).trigger("close");$(this).hide();$(this).off("mousedown.menu");$(document).off("mousedown.mousedown");$(document).off("contextmenu")}else{var defaults={target:null,useTargetPosition:true,top:0,left:0};options=$.extend(defaults,options);var temp=$(this);if(options.items!=null){temp.html("");var htmls="";for(var i=0;i<options.items.length;i++){var attrs="";var icon="";var iconFont="";var iconCls="";var items=options.items[i];if(items.icon!=null){icon="<img src='"+items.icon+"'/>"}else{if(items.iconCls!=null){iconCls="<span class='icon "+items.iconCls+"'></span>"}else{if(items.iconFont!=null){iconFont="<span class='awsui-iconfont' style='font-size:"+items.iconFont.fontSize+"; color: "+items.iconFont.color+"; padding-right:6px;'>"+items.iconFont.code+"</span>"}else{if(items.imgs){icon=items.imgs}}}}if(items.noline){attrs=" class='noline' "}var curr_item=$("<li "+attrs+" tit='"+items.tit+"'>"+icon+iconFont+iconCls+items.text+"</li>").appendTo(temp);curr_item.data("awsui-combobox-item",items);if(items.method!=null){curr_item.on("click",items,items.method)}if(items.disabled){curr_item.addClass("awsui-disabled");curr_item.off("click")}}}if(options.target!=null&&options.useTargetPosition){var tar=options.target;var offset=options.target.offset();if($("#simple-right").length>0){offset.top=offset.top-parseInt($("#simple-right").css("top"),10);offset.left=offset.left-parseInt($("#simple-right").css("left"),10)}if(options.position=="center"){options.left=offset.left+tar.outerWidth()/2-temp.outerWidth()/2}else{if(options.position=="right"){options.left=offset.left-(temp.outerWidth()-tar.outerWidth())}else{options.left=offset.left}}options.top=offset.top+tar.outerHeight();if(options.top+temp.outerHeight()-$(document).scrollTop()>$(window).height()){options.top=options.top-temp.outerHeight()-options.target.outerHeight()}}temp.css({left:options.left,top:options.top}).show();temp.children().on("mouseenter",function(){var curr_child=$(this);temp.find(".active").removeClass("active");if(!curr_child.hasClass("disable")){curr_child.addClass("active")}showMenuList(curr_child)});temp.off("mousedown.menu").on("mousedown.menu",function(e){e.stopPropagation();return false});$(document).off("mousedown.mousedown").on("mousedown.mousedown",function(){temp=$(".awsui-menu:visible");temp.menu("close")});function showMenuList(curr_child){if(curr_child.find(".awsui-right-arrow:first").length>0){var curr_second_temp=curr_child.children(".awsui-menu");if(current_extend_menu!=null){current_extend_menu.hide()}current_extend_menu=curr_second_temp;curr_second_temp.menu({left:curr_child.outerWidth()})}else{if(!curr_child.parent().hasClass("extend-menu")){if(current_extend_menu!=null){current_extend_menu.hide();current_extend_menu=null}}}}}};$.fn.numberbox=function(options){var defaults={defaultValue:0,uplength:1,symbol:"",max:100,min:0};var opt=$.extend(defaults,options);var temp=$(this);var position=3;temp.addClass("awsui-numberbox");if(opt.size=="large"){temp.addClass("awsui-numberbox-lg");position=5}else{if(opt.size=="small"){temp.addClass("awsui-numberbox-sm");position=2}}if(opt.disabled){temp.attr("disabled",opt.disabled)}else{temp.removeAttr("disabled")}if(opt.width){temp.css("width",opt.width)}else{temp.data("width","0");temp.css("width",temp.parent().width()-32)}if(temp.next().hasClass("awsui-numberbox-arrow")){return}temp.after("<span class='awsui-numberbox-arrow' style='height:"+temp.height()+"px'><span class='forms-icon up'></span><span class='forms-icon down' style='background-position-y:"+position+"px'></span></span>");temp.next().find(".forms-icon").css({height:parseInt(temp.outerHeight()-2)/2});temp.val(opt.defaultValue+opt.symbol);bindEvent();function bindEvent(){temp.next().find(".forms-icon.up").on("click",function(){if(opt.upClick!=null){opt.upClick()}var value=temp.val();if(opt.symbol!=""){value=value.substring(0,value.length-1)}value=parseFloat(value);if(value>=opt.max){return}value+=opt.uplength;if(isNaN(value)){value=0}temp.val(value+opt.symbol)});temp.next().find(".forms-icon.down").on("click",function(){if(opt.downClick!=null){opt.downClick()}var value=temp.val();if(opt.symbol!=""){value=value.substring(0,value.length-1)}value=parseFloat(value);if(value<=opt.min){return}value-=opt.uplength;if(isNaN(value)){temp.val(0)}temp.val(value+opt.symbol)})}$(window).off("resize.numberbox").on("resize.numberbox",function(){$.each($(".awsui-numberbox"),function(i,el){if($(el).data("width")=="0"){$(el).css("width",$(el).parent().width()-32)}})})};$.fn.buttonedit=function(options){var isMobile=$("#isMobile").length>0?($("#isMobile").val()=="true"):false;var defaults={iconCls:"",symbol:"...",hideSearch:false};var opt=$.extend(defaults,options);var temp=$(this);var parentButtonEdit=$(this).parent();if($(this).parent().hasClass("disable")){opt.isClearData=false}if(isMobile){if(!parentButtonEdit.hasClass("awsui-buttonedit-wrap")){var disable="";if(temp.hasClass("disable")||temp.attr("disabled")){disable=" disable"}var _before;if(typeof opt.onSuperior=="function"){_before=temp.before('<span class="awsui-buttonedit-superior"></span>').prev();temp.css({"padding-left":_before.width()});_before.position({my:"left center",at:"left+1 center",of:wrap})}var wrap=$(this).wrap("<div class='mui-icon-div"+disable+"'></div>").parent();var removeDateBtnCss="";var searchBtn=$("<span class='mui-icon-span'></span>");if(temp.hasClass("disable")||temp.attr("disabled")){searchBtn.css("cursor","default")}var after=temp.after(searchBtn).next();if(opt.validate&&!opt.multiple){temp.attr("onChange","checkDictValidate(this,'"+opt.config+"','"+opt.record+"','"+opt.rowIndx+"','"+opt.boDefName+"')")}if(opt.iconCls!=""&&opt.iconCls=="icon-address"){after.html("<span class='mui-icon mui-icon-person'></span>").next()}else{after.html("<span class='mui-icon mui-icon-search'></span>").next()}}var buttonEdit_timeout;after.css({cursor:"pointer"});if(typeof opt.onClick=="function"){if(temp.prop("readOnly")){temp.off("click.be").on("click.be",function(e){opt.onClick(e)})}if($("#isMobile").val()=="true"){temp.next().off("tap.be").on("tap.be",function(e){opt.onClick(e)})}else{temp.next().off("click.be").on("click.be",function(e){opt.onClick(e)})}}if(typeof opt.onLiveSearch=="function"){temp.off("keyup").on("keyup",function(e){window.clearTimeout(buttonEdit_timeout);buttonEdit_timeout=window.setTimeout(function(){opt.onLiveSearch(e)},500)})}if(typeof opt.onSuperior=="function"&&_before!=null){_before.off("tap.be").on("tap.be",function(e){opt.onSuperior(e);e.stopPropagation()})}}else{var inputParentWidth=null;if(!parentButtonEdit.hasClass("awsui-buttonedit-wrap")){inputParentWidth=temp.parent().outerWidth();var w=temp.outerWidth();var h=temp.outerHeight();var disable="";if(temp.hasClass("disable")||temp.attr("disabled")){disable=" disable"}var wrap=$(this).wrap("<span class='awsui-buttonedit-wrap"+disable+"'></span>").parent();var _before;if(typeof opt.onSuperior=="function"){_before=temp.before('<span class="awsui-buttonedit-superior"></span>').prev();temp.css({"padding-left":_before.width()})}var removeDateBtnCss="";var after;if(opt.iconCls!=""){var searchBtn=$("<span class='awsui-buttonedit-search'></span>");if(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.match(/8./i)=="8."){searchBtn=$("<span class='awsui-buttonedit-search' style='top:0px;right:1px;'></span>")}searchBtn.addClass(opt.iconCls)}else{var searchBtn=$("<span class='awsui-iconfont awsui-iconfont-buttonedit-search'></span>");if(opt.iconFont){searchBtn.append(opt.iconFont)}else{searchBtn.append("&#59113;")}}after=temp.after(searchBtn).next();if(temp.hasClass("disable")||temp.attr("disabled")){after.css("cursor","default")}if(opt.hideSearch){after.css("display","none")}if(opt.isClearData){if(isMobile=="true"||isMobile==true){removeDateBtnCss="margin-top: 3px;padding:3px;"}else{removeDateBtnCss="width:16px;height:16px;background-color:#FFF;"}var removeDate="<span gridRowIndx="+opt.gridRowIndx+" style='"+removeDateBtnCss+"cursor: pointer;display:none;' title='"+清空数据+"' class='removeAll'><img  src='../apps/_bpm.portal/img/cancel.png'  border='0' ></span>";var removeDateBtn=after.after(removeDate).next();var removeBtnRight="30px";if(opt.hideSearch){removeBtnRight="12px"}if(temp.hasClass("aws-grid-editor-default")){removeBtnRight="28px"}removeDateBtn.css({position:"absolute",right:removeBtnRight,top:2});$(removeDateBtn).on("click",function(){$(this).prevAll("input").val("");if(opt.clearField){var clearFieldArr=opt.clearField.split("|");if(opt.record!="undefined"&&opt.record!=undefined){var record=AWSGrid.getGrid(opt.boDefName).awsGrid("getRowData",opt.rowIndx);for(var i=0;i<clearFieldArr.length;i++){var field=clearFieldArr[i].trim();record[field]="";AWSGrid.getGrid(opt.boDefName).awsGrid("setEditData",record);AWSGrid.getGrid(opt.boDefName).awsGrid("refreshCell",{rowIndx:opt.rowIndx,dataIndx:field})}}else{for(var i=0;i<clearFieldArr.length;i++){var id=clearFieldArr[i].trim();var target=$("#"+id);if(target.length==1){target.val("");if(target.hasClass("awsui-select")){target.customSelect("")}else{if(target.hasClass("awsui-combobox")){target.setComboboxVal("")}}if(target.is(":hidden")&&target.parent().find("label")){target.parent().find("label").html("")}}else{var firstDom=$("input[name='"+id+"']:first");if(firstDom.length==0){break}var type=firstDom.attr("type").toLowerCase();switch(type){case"radio":if($("input[name='"+id+"']:first").is(":visible")){$("input[name='"+id+"']").check("option","checked",false)}else{var src=$("input[name='"+id+"']:first").prev().attr("src");var uncheck=src.replace("icheck_radio_check","icheck_radio_uncheck");$("input[name='"+id+"']").prev().attr("src",uncheck);$("input[name='"+id+"']").prop("checked",false)}break;case"checkbox":if($("input[name='"+id+"']:first").is(":visible")){$("input[name='"+id+"']").check("option","checked",false)}else{var src=$("input[name='"+id+"']:first").prev().attr("src");var uncheck=src.replace("icheck_checkbox_check","icheck_checkbox_uncheck");$("input[name='"+id+"']").prev().attr("src",uncheck);$("input[name='"+id+"']").prop("checked",false)}break;default:}}}var gridId=$(this).parents(".aws-grid").attr("id");if(gridId){var indx=parseInt($(this).attr("gridRowIndx"));var $tr=$("#"+gridId).awsGrid("getRowData",indx);for(var i=0;i<clearFieldArr.length;i++){var field=clearFieldArr[i].trim();$tr[field]="";$("#"+gridId).awsGrid("setEditData",$tr)}$("#"+gridId).awsGrid("refresh")}}if(opt.callback!=undefined&&opt.callback!=null){opt.callback()}}});$(this).parent().off("mouseenter").on("mouseenter",function(){if($(this).children("input").val()!=""){$(this).children(".removeAll").show()}}).off("mouseleave").on("mouseleave",function(){$(this).children(".removeAll").hide()})}if(opt.validate&&!opt.multiple){temp.attr("onChange","checkDictValidate(this,'"+opt.config+"','"+opt.record+"','"+opt.rowIndx+"','"+opt.boDefName+"')")}if(isMobile==false){var style=temp.attr("style");var isAutoWidth=style?(style.indexOf("%")>-1&&style.indexOf("100")>-1):false;if(temp.attr("nofit")==="true"){isAutoWidth=false}if(isAutoWidth){if(inputParentWidth==null){}else{temp.css({width:temp.hasClass("awsui-input")?w:(inputParentWidth-4)});wrap.css({width:inputParentWidth})}}else{wrap.css({width:w+after.width()});temp.width(w-(temp.outerWidth()-temp.width()));temp.addClass("awsui-buttonedit");temp.css({"padding-right":after.width()});temp.css({width:temp.width()-22})}}wrap.outerWidth(temp.outerWidth())}var buttonEdit_timeout;if(typeof opt.onClick=="function"){if(temp.prop("readOnly")||temp.prop("disabled")){temp.off("click").on("click",function(e){opt.onClick(e)})}temp.next().off("click").on("click",function(e){opt.onClick(e)});after.addClass("click");temp.css({"padding-right":after.width()})}if(typeof opt.onLiveSearch=="function"){temp.off("keyup").on("keyup",function(e){window.clearTimeout(buttonEdit_timeout);buttonEdit_timeout=window.setTimeout(function(){opt.onLiveSearch(e)},500)})}if(typeof opt.onSuperior=="function"&&_before!=null){_before.off("click").on("click",function(e){opt.onSuperior(e);e.stopPropagation()})}}};$.fn.checkClass=function(options){var ck=function(e){var inputClassName=$(e.target).val();if(inputClassName==""){return false}awsui.ajax.request({url:"./jd",method:"POST",dataType:"json",async:false,data:{cmd:"CONSOLE_COMMON_CLASS_CHECK",sid:options.sid,type:options.type,appId:$.type(options.appId)=="function"?options.appId():options.appId,input:inputClassName}})};if(!$(this).data("checkClass.inst")){$(this).data("checkClass.inst",true);$(this).blur(ck)}};$.fn.superInput=function(options){var defaultArr=new Array();var defaults={maxLength:15,defaultVal:defaultArr};var opt=$.extend(defaults,options);var temp=$(this);var input=temp.find("input[type=text]:first");var content=$("<div></div>").prependTo(temp);var context=[];var defalutArrTemp=opt.defaultVal;for(key in defalutArrTemp){if(defalutArrTemp[key]!=""&&typeof(defalutArrTemp[key])=="string"){var defaulthtml=$("<span class='awsui-supertext-items' id='"+key+"'>"+defalutArrTemp[key]+"<span class='forms-icon down close'></span></span>").appendTo(content);context.push(defalutArrTemp[key]);defaulthtml.find(".close").on("click",function(){$(this).parent().fadeOut(function(){context.splice($.inArray(input.val(),context),1);$(this).remove();if(!opt.onClose||opt.onClose($(this))!==false){return false}})})}}input.on("focus",function(){if(!temp.hasClass("active")){temp.addClass("active")}});input.on("keyup",function(e){if(e.keyCode==13&&input.val()!=""){if($(".awsui-supertext-items").length>=opt.maxLength){input.val("");$.simpleAlert("标签超过最大个数限制:"+opt.maxLength);return}if($.inArray(input.val(),context)>=0){input.val("");return}context.push(input.val());var html=$("<span class='awsui-supertext-items'>"+input.val()+"<span class='forms-icon down close'></span></span>").appendTo(content);html.hide();html.fadeIn();if(!opt.onAdd||opt.onAdd()!==false){}input.val("");html.find(".close").on("click",function(){$(this).parent().fadeOut(function(){context.splice($.inArray(input.val(),context),1);$(this).remove();if(!opt.onClose||opt.onClose($(this))!==false){return false}})})}else{if(e.keyCode==8&&input.val()==""){content.find(".awsui-supertext-items:last").fadeOut(function(){context.splice($.inArray(input.val(),context),1);$(this).remove();if(!opt.onClose||opt.onClose(content.find(".awsui-supertext-items:last"))!==false){return false}})}}});var fun={getData:function(){return context}};return fun};$.fn.switchButton=function(options){var defaults={showtextflag:true,color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#ffffff",onColor:"#ffffff",offColor:"#000000",className:"switchery",disabled:false,disabledOpacity:0.5,speed:"0.1s",size:"default",ontext:"开",offtext:"关",swwidth:80,swheight:28,fontSize:13};var opt=$.extend(defaults,options);if(this.attr("data-switchery")=="true"){return}var swtchButton;if($(this).length>0){if(opt.change){$(this).get(0).onchange=opt.change}swtchButton=new Switchery($(this).get(0),opt)}return swtchButton};$.fn.customSelect=function(value){if($(this).hasClass("select2-hidden-accessible")){$(this).val(value).change();return}var cf=function(select){if(typeof value=="string"){select.val(value);setValue();return}if(select.data("awsui.customSelect")){return}else{select.data("awsui.customSelect",true)}var selectWidth=select.css("width");var selectHeight=select.css("height");var style="";if(select.hasClass("awsui-select-nofit")||select.attr("nofit")=="true"){style=select.attr("style")?select.attr("style"):""}else{if(selectWidth=="0px"||selectWidth=="100px"||selectWidth=="120px"||selectWidth=="100%"||select.hasClass("txt")){if(select.parent().is("span")){if(select.parent().parent().hasClass("awsui-ux-content")||select.parent().hasClass("aws-form-ux-content")){select.width(select.parent().parent().width()-5)}else{var tempWidth=selectWidth;select.width(select.parent().parent().width()+8)}}else{if(select.parent().hasClass("awsui-ux-content")||select.parent().hasClass("aws-form-ux-content")){select.width(select.parent().width()-5)}else{if(select.parent().is("div")){}else{select.css("width",select.parent().actual("width")+8)}}}}else{if(select.is(":hidden")){select.css("width",select.actual("width"))}else{select.css("width",(parseFloat(selectWidth))+"px")}}}select.css({position:"absolute",top:0,left:0});var disable=select.prop("disabled");var display=select.css("display");var span=$("<span class='awsui-select-span' style='"+style+"'><span class='awsui-select-text'></span></span>");if(disable){span.addClass("disable");span.css("opacity","0.5")}if(display=="none"){span.css("display","none")}select.after(span);span.append(select);var fixWidth=0;if(window.event==null||!!window.ActiveXObject||"ActiveXObject" in window){fixWidth=4}span.outerWidth(select.actual("outerWidth"));span.find("span[class='awsui-select-text']").css({width:select.actual("width")-18+fixWidth,height:"19px",lineHeight:"19px","vertical-align":"-3px"});setValue();select.css({height:span.actual("outerHeight")});select.on("change",function(){setValue()});function setValue(){var text=select.find(":selected").text();var placeholder=select.attr("placeholder");if($(select).val()==""){select.parent().find("span[class='awsui-select-text']").css("color","#999").text(placeholder==null||placeholder==""?text:placeholder)}else{select.parent().find("span[class='awsui-select-text']").css("color","#000").text(text)}}};$(this).each(function(i){cf($(this))})};$.fn.milestone=function(opt){var inp=$(this);var initMilestone=function(){var readonly=opt.readonly==true;var isIE8=$.browser.isIE8;var id=inp.attr("id");inp.hide();var isMobile=$("#isMobile").val()=="true";var arrow=false;var arrowWidth=0;if(opt.showMaxNum<opt.data.length&&!isMobile){arrow=true;arrowWidth=32}else{if(opt.showMaxNum>opt.data.length){opt.showMaxNum=opt.data.length}}if(isMobile&&opt.showMaxNum>3){opt.showMaxNum=3}inp.data("opt",opt);var cs=isMobile?"overflow-y:hidden;":"overflow:hidden;";var obj=$("<div id='milestone"+id+"' class='milestoneDiv' showMaxNum="+opt.showMaxNum+" style='float: left;width:"+(opt.width-arrowWidth)+"px; height: "+opt.height+"px;"+cs+"'></div>");inp.after(obj);obj.append(inp);if(obj.parent().hasClass("required")){obj.parent().css("display","flex")}var h=opt.height||25;var leftBtn;var rightBtn;var items="";var itemWidth=(opt.width-arrowWidth)/opt.showMaxNum;var totalWidth=opt.data.length*itemWidth;if(arrow){var btnStyle="float:left;width:auto;height:"+h+"px;line-height:"+h+"px;text-align:center;cursor:pointer;";leftBtn=$("<div class='awsui-iconfont milestoneLeftBtn disable' style="+btnStyle+">&#xe715;</div>");rightBtn=$("<div class='awsui-iconfont milestoneRightBtn' style="+btnStyle+">&#xe717;</div>");obj.before(leftBtn).after(rightBtn)}var mileDiv=$("<div class='mile-scroll' style='position:relative;width:"+totalWidth+"px;height:"+h+"px;'></div>");obj.append(mileDiv);var mt=isIE8?"":h/15;var r=isIE8?h/2.5:h/2;var arrowH=isMobile?h/1.2:h/1.3;var overIcon="<span class='awsui-iconfont over'>&#xe639;</span>";for(var i=0;i<opt.data.length;i++){var index=opt.data[i].status;var bgColor=opt.defaultColor[index];var fontColor=opt.defaultColor[index+3];var status=opt.data[i].status;items+="<div class='mile-item' value='"+opt.data[i].id+"' status="+status+" style='background:"+bgColor+";color:"+fontColor+";"+(readonly?"":"cursor:pointer;")+"width:"+itemWidth+"px;height:"+h+"px;line-height:"+h+"px;'>";items+="<span class='mile-text' style='margin-left:"+5+"px;'>";if(status==1){items+=overIcon}items+=opt.data[i].name+"</span>";if(i!=opt.data.length-1){items+="<span class='point' style='background:"+bgColor+";margin-top:"+mt+"px;right:-"+r+"px;width:"+arrowH+"px;height:"+arrowH+"px;'></span>"}items+="</div>"}mileDiv.append($(items));if(arrow){var step=0;leftBtn.click(function(){step--;if(step<0){step=0;return}else{var width=obj.find(".mile-item").width();obj.children().animate({left:(-step*width+"px")},100);rightBtn.hasClass("disable")&&rightBtn.removeClass("disable");(step==0)&&leftBtn.addClass("disable");obj.find(".point").eq(step).css("display","inline-block")}});rightBtn.click(function(){step++;if(step>(opt.data.length-opt.showMaxNum)){step=opt.data.length-opt.showMaxNum;return}else{var width=obj.find(".mile-item").width();obj.children().animate({left:(-step*width+"px")},100);leftBtn.hasClass("disable")&&leftBtn.removeClass("disable");(step==opt.data.length-opt.showMaxNum)&&rightBtn.addClass("disable");obj.find(".point").eq(step-1).css("display","none")}})}if(!readonly){bindEvent()}};var bindEvent=function(){var div=inp.parent();var opt=inp.data("opt");div.find(".mile-item").off("click.base").on("click.base",function(e,onlyClick){var overCol=opt.defaultColor["1"];var curCol=opt.defaultColor["2"];var notStartCol=opt.defaultColor["3"];var overFontCol=opt.defaultColor["4"];var curFontCol=opt.defaultColor["5"];var notStartFontCol=opt.defaultColor["6"];if(inp.val()!=$(this).attr("value")||onlyClick){$(this).parent().find(".over").remove();$(this).css("background",curCol).css("color",curFontCol);$(this).find(".point").css("background",curCol);$(this).prevAll().css("background",overCol).css("color",overFontCol);$(this).prevAll().find(".point").css("background",overCol);$(this).prevAll().find(".mile-text").prepend($("<span class='awsui-iconfont over'>&#xe639;</span>"));$(this).nextAll().css("background",notStartCol).css("color",notStartFontCol);$(this).nextAll().find(".point").css("background",notStartCol);if(!onlyClick){$(this).parent().parent().find("input").val($(this).attr("value")).trigger("change")}}else{if(opt.allowClear){$(this).parent().find(".over").remove();$(this).parent().find(".mile-item").css("background",notStartCol).css("color",notStartFontCol);$(this).parent().find(".point").css("background",notStartCol);$(this).parent().parent().find("input").val("").trigger("change")}}})};if(typeof arguments[0]=="object"){initMilestone()}else{if(arguments.length==2){if(arguments[0]=="readonly"){var div=inp.parent();if(arguments[1]==true){div.find(".mile-item").css("cursor","not-allowed").off("click.base")}else{if(arguments[1]==false){div.find(".mile-item").css("cursor","pointer");bindEvent()}}}else{if(arguments[0]=="setWidth"){var div=inp.parent();var width=arguments[1];if(div.prev().hasClass("milestoneLeftBtn")){width-=32}var itemWidth=width/div.attr("showMaxNum");div.width(width);div.find(".mile-item").width(itemWidth);var totalWidth=width*(div.find(".mile-item").length);div.find(".mile-scroll").width(totalWidth)}}}}};$.cookie=function(key,value,options){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(value))||value===null||value===undefined)){options=$.extend({},options);if(value===null||value===undefined){options.expires=-1}if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days)}value=String(value);return(document.cookie=[encodeURIComponent(key),"=",options.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join(""))}options=value||{};var decode=options.raw?function(s){return s}:decodeURIComponent;var pairs=document.cookie.split("; ");for(var i=0,pair;pair=pairs[i]&&pairs[i].split("=");i++){if(decode(pair[0])===key){return decode(pair[1]||"")}}return null};function setDisabled(target,disabled){var state=$.data(target,"awsui")||{};var opts=state.options||{};$(target)[disabled?"addClass":"removeClass"]("disable");var tmp=$(target);if(disabled){opts.disabled=true;var href=tmp.attr("href");if(href){state.href=href;tmp.attr("href","javascript:void(0)")}if(target.onclick){state.onclick=target.onclick;target.onclick=null}}else{opts.disabled=false;if(state.href){tmp.attr("href",state.href)}if(state.onclick){target.onclick=state.onclick}}$.data(target,"awsui",state)}var methods={enable:function(jq){return jq.each(function(){setDisabled(this,false)})},disable:function(jq){return jq.each(function(){setDisabled(this,true)})}};$.fn.awsui=function(options,param){if(typeof options=="string"){return methods[options](this,param)}};$.fn.check=function(){if(arguments!=null&&typeof arguments[0]=="string"){if(arguments.length==1){if(arguments[0]=="disabled"){$(this).prop(arguments[0],true)}return $(this).iCheck(arguments[0])}else{if(arguments.length==2){return $(this).prop(arguments[1])}else{if(arguments.length==3){return $(this).iCheck(arguments[2]?"check":"uncheck")}}}}var options={checkboxClass:"icheckbox_minimal-grey",radioClass:"iradio_minimal-grey",increaseArea:"20%"};$.extend(options,arguments[0]||{});return $(this).each(function(){$(this).iCheck(options);var chk=$(this);if(chk.attr("title")!=null){var t=chk.attr("title");chk.removeAttr("title");chk.parent().attr("title",t)}var checkAllGroup=chk.attr("group");if(chk.hasClass("check-all")&&chk.attr("type")=="checkbox"){var checkAll=function(){if($("input[group='"+checkAllGroup+"'][class*=check-all]").prop("checked")){$("input[group='"+checkAllGroup+"'][class=awsui-checkbox]").each(function(){if(typeof($(this).attr("disabled"))=="undefined"){$(this).check("option","checked",false)}})}else{$("input[group='"+checkAllGroup+"'][class=awsui-checkbox]").each(function(){if(typeof($(this).attr("disabled"))=="undefined"){$(this).check("option","checked",true)}})}try{var callback=$("input[group='"+checkAllGroup+"'][class*=check-all]").attr("callback");eval(callback)}catch(e){}};chk.on("ifClicked",checkAll)}if(checkAllGroup&&chk.hasClass("check-all")==false){var eachCheckClick=function(){$("input[class*=check-all][group='"+checkAllGroup+"']").check("option","checked",true);$("input[class=awsui-checkbox][group='"+checkAllGroup+"']").each(function(i,v){if(!$(v).prop("checked")){$("input[class*=check-all][group='"+checkAllGroup+"']").check("option","checked",false)}});try{var callback=chk.attr("callback");eval(callback)}catch(e){}};chk.on("ifChecked",eachCheckClick);chk.on("ifUnchecked",function(){$("input[class*=check-all][group='"+checkAllGroup+"']").check("option","checked",false);try{var callback=chk.attr("callback");eval(callback)}catch(e){}})}})};$.notification=function(options){var defaultOptions={color:"green",icon:"",title:"",description:"",btn:"",delay:3000,width:400,position:"topRight",fontSize:30};options=$.extend({},defaultOptions,options);var isShowIcon=false;var positionObj={};var notify=$('<div class="awsui-notification"></div>').addClass(options.position).appendTo("body");var notifyContent=$('<div class="awsui-notification-content awsui-public-box"></div>').appendTo(notify);var iconWrapper=null;if(options.icon!=""&&options.color!=""){isShowIcon=true;iconWrapper=$('<div class="awsui-public-box-icon" style="width:'+options.fontSize+'px;"></div>').appendTo(notifyContent);var icon=iconWrapper.append('<div class="awsui-iconfont awsui-icon-'+options.color+'" style="font-size:'+options.fontSize+'px;">'+options.icon+"</div>");iconWrapper.append(icon)}if(options.img){isShowIcon=true;iconWrapper=$('<div class="awsui-public-box-icon" style="width:'+options.fontSize+'px;"></div>').appendTo(notifyContent);var img=iconWrapper.append('<img src="'+options.img+'"/>');iconWrapper.append(img)}var $body=$("<div></div>").addClass("awsui-public-box-main").append('<div class="awsui-public-box-title">'+options.title+"</div>").appendTo(notifyContent);if(options.description!=""){var description=$('<div class="awsui-public-box-content">'+options.description+"</div>").appendTo($body)}else{$body.find(".awsui-public-box-title").css({"line-height":(options.fontSize-2)+"px"});if($body.find(".awsui-public-box-title").height()>options.fontSize){$body.find(".awsui-public-box-title").css({"line-height":options.fontSize/2+"px"})}}if(options.btn!=""){var btnWrapper=$('<div class="awsui-notification-btn"></div>').appendTo(notifyContent);var btn=btnWrapper.append('<button type="button" class="awsui-btn awsui-notification-btn-primary"><span>'+options.btn+"</span></button>");btnWrapper.append(btn);btn.on("click",function(ev){notify.remove();refreshPosition()})}var closeBtn=$('<span class="awsui-iconfont awsui-public-box-close">&#58931;</span>').appendTo(notifyContent);$body.css({width:notifyContent.width()-10+"px","padding-right":10});closeBtn.on("mousedown",function(e){e.stopPropagation()});closeBtn.on("click",function(){if(options.onClose){options.onClose()}notify.remove();refreshPosition()});if(isShowIcon){var width=notifyContent.width()-notify.find(".awsui-public-box-icon").outerWidth(true);$body.css({width:width-10+"px","padding-right":10})}switch(options.position){case"topLeft":setPosition("left","top");break;case"topRight":setPosition("right","top");break;case"bottomLeft":setPosition("left","bottom");break;case"bottomRight":setPosition("right","bottom");break}function setPosition(posX,posY){var cssObj={};cssObj[posX]=-$(notifyContent).outerWidth()-30;var list=$("."+options.position);$.each(list,function(index,el){if(index==0){cssObj[posY]=20}else{cssObj[posY]=parseInt($(list[index-1]).outerHeight())+parseInt($(list[index-1]).css(posY))}});$(notify).css(cssObj);positionObj[posX]=$(notify).outerWidth()+60;$(notifyContent).animate(positionObj,500)}addDelay(notifyContent);function addDelay($el){if(options.delay>0){setTimeout(function(){notify.remove();refreshPosition()},options.delay)}}function refreshPosition(){var list=$("."+options.position);$.each(list,function(index,el){if(options.position=="bottomLeft"||options.position=="bottomRight"){if(index==0){$(el).css("bottom",20)}else{$(el).css("bottom",parseInt($(list[index-1]).outerHeight())+parseInt($(list[index-1]).css("bottom")))}}else{if(index==0){$(el).css("top",20)}else{$(el).css("top",parseInt($(list[index-1]).outerHeight())+parseInt($(list[index-1]).css("top")))}}})}};$.fn.loading=function(options){var element=$(this);var defaultOptions={size:"default",description:"",color:"",delay:0,hidden:false};options=$.extend({},defaultOptions,options);var imgRootPath=(window.getRootPath?window.getRootPath():"..")+"/commons/img/";var htmlDom=$('<div class="awsui-loading"></div>');var imgDom=$('<div class="'+options.size+'"><img src="'+imgRootPath+'waiting.gif" alt=""/></div>').appendTo(htmlDom);if(options.description!=""){var desDom=$('<div class="description" style="color:'+options.color+'">'+options.description+"</div>").appendTo(htmlDom)}addDelay(options);function addDelay(options){if(options.delay){setTimeout(function(){element.append(htmlDom);if(options.hidden){setTimeout(function(){element.remove()},options.delay)}},options.delay)}else{element.append(htmlDom);if(options.hidden){setTimeout(function(){element.remove()},1000)}}}};$.progress=function(options){var imgRootPath=(window.getRootPath?window.getRootPath():"..")+"/commons/img/";var settings={type:"line",percent:"",strokeWidth:8,color:"",icon:"",isShowInfo:true};settings=$.extend(true,settings,options);initProgress();function initProgress(){if(settings.elementId){$("#"+settings.elementId).empty();if(settings.type=="line"){var htmlDom=$('<div class="awsui-progress" ></div>');var infoHtml=$('<div class="awsui-progress-show-info"></div>').appendTo(htmlDom);var typeHtml=$('<div class="awsui-progress-'+settings.type+'"></div>').appendTo(infoHtml);var bgHtml=$('<div class="awsui-progress-bg" style="width:'+settings.percent+"%;height:"+settings.strokeWidth+'px;"></div>').appendTo(typeHtml);var textHtml=null;if(settings.icon!=""){textHtml=$('<div class="awsui-progress-text awsui-iconfont"  style="color:'+options.color+'">'+options.icon+"</div>").appendTo(htmlDom)}else{if(settings.percent!=""&&settings.isShowInfo){textHtml=$('<div class="awsui-progress-text">'+settings.percent+"%</div>").appendTo(htmlDom)}}if(settings.width){htmlDom.css("width",settings.width)}if(settings.color!=""){bgHtml.css("background",settings.color)}$("#"+settings.elementId).append(htmlDom);infoHtml.css("width",htmlDom.outerWidth()-46+"px")}else{if(settings.type=="circle"){loopFun(settings.elementId,settings.width,settings.percent,settings.color)}}}}function loopFun(b,w,n,c){this.paper=Raphael(b,w,w);this.paper.image(imgRootPath+"progressBg.png",0,0,w,w);var percent=n,drawPercent=(percent>=100?99.99:percent)/100;var r1=w/2-w/26,r2=w/2,PI=Math.PI,p1={x:w/2,y:w},p4={x:p1.x,y:p1.y-r2+r1},p2={x:p1.x+r2*Math.sin(2*PI*(1-drawPercent)),y:p1.y-r2+r2*Math.cos(2*PI*(1-drawPercent))},p3={x:p4.x+r1*Math.sin(2*PI*(1-drawPercent)),y:p4.y-r1+r1*Math.cos(2*PI*(1-drawPercent))},path=["M",p1.x," ",p1.y,"A",r2," ",r2," 0 ",percent>drawPercent?1:0," 1 ",p2.x," ",p2.y,"L",p3.x," ",p3.y,"A",r1," ",r1," 0 ",percent>drawPercent?1:0," 0 ",p4.x," ",p4.y,"Z"].join("");this.paper.path(path).attr({"stroke-width":0,stroke:c,fill:"90-"+c});$("#"+b).after('<div class="pertxt" style="width:'+w+"px;height:"+w+"px;line-height:"+w+"px;position:absolute;margin-top:-"+w+"px;color:"+c+';text-align:center;font-size:14px;">'+percent+"%</div>");$("#"+b).css("height",w+"px")}};$.fn.scopedNotifications=function(options){var _this=$(this);var defaultOptions={type:"info",content:"",description:"",fontSize:30,isShowClose:false,isShowTop:false,isShowIcon:false};options=$.extend({},defaultOptions,options);var notify=null;if(options.isShowTop){notify=$('<div class="awsui-scoped-notifications awsui-scoped-notifications-'+options.type+'" style="margin:0 10px 10px;"></div>').prependTo("body")}else{notify=$('<div class="awsui-scoped-notifications awsui-scoped-notifications-'+options.type+'"></div>').appendTo(_this)}var notifyMain=$("<div></div>").addClass("main").append('<span class="content">'+options.content+"</span>").appendTo(notify);if(options.isShowIcon){var fontIconObj={};if(options.type=="ok"){fontIconObj[options.type]={icon:"&#60017;",color:"green"}}else{if(options.type=="info"){fontIconObj[options.type]={icon:"&#58933;",color:"blue"}}else{if(options.type=="warning"){fontIconObj[options.type]={icon:"&#58941;",color:"orange"}}else{if(options.type=="error"){fontIconObj[options.type]={icon:"&#58927;",color:"red"}}}}}var iconWrapper=$('<div class="icon" style="width:'+options.fontSize+'px;"></div>').prependTo(notify);var icon=iconWrapper.append('<div class="awsui-iconfont awsui-icon-'+fontIconObj[options.type].color+'" style="font-size:'+options.fontSize+"px; line-height:"+options.fontSize+'px;">'+fontIconObj[options.type].icon+"</div>");iconWrapper.append(icon);notifyMain.css("width",Math.floor(notify.width())-options.fontSize-12+"px");if(options.isShowClose){var closeBtn=$('<span class="awsui-iconfont awsui-public-box-close">&#58931;</span>').appendTo(notify);closeBtn.on("click",function(){if(options.onClose){options.onClose()}notify.fadeOut(2000)});notifyMain.css("width",Math.floor(notify.width())-options.fontSize-22+"px")}}else{if(options.isShowClose){var closeBtn=$('<span class="awsui-iconfont awsui-public-box-close">&#58931;</span>').appendTo(notify);closeBtn.on("click",function(){if(options.onClose){options.onClose()}notify.fadeOut(2000)});notifyMain.css("width",notify.width()-12+"px")}}if(options.description!=""){var description=$('<span class="description">'+options.description+"</span>").appendTo(notifyMain);notifyMain.find(".content").css({"line-height":options.fontSize/2+"px"})}else{notifyMain.find(".content").css({"line-height":(options.fontSize-2)+"px"});if(notifyMain.find(".content").height()>options.fontSize){notifyMain.find(".content").css({"line-height":options.fontSize/2+"px"})}}};$.fn.popBox=function(options){$(this).awsuiPopBox(options)};$.fn.popConfirm=function(options){$(this).awsuiPopBox(options)};$.fn.box=function(options,value){var that=$(this);var defaultOptions={id:that.attr("id"),background:"#f9f9f9",color:"#0ca72d",isShowIcon:false,disabled:false,fontSize:20};var icon="&#60017;";if(typeof options=="string"){if(options=="disabled"||options=="readonly"){options={};options.disabled=value;options=$.extend({},defaultOptions,options)}else{that.attr(options,value)}}else{options=$.extend({},defaultOptions,options)}that.css({width:options.width,cursor:"pointer","box-shadow":"none"});if(options.isSelected){options.icon=icon;that.css({background:options.background});that.data("selected",true)}if(options.multipleSelected){that.data("multipleSelected",true)}if(options.icon){var iconWrapper=$('<div class="awsui-public-box-icon icon-position"></div>').appendTo($(this));var iconDom=iconWrapper.append('<div class="awsui-iconfont" style="font-size:'+options.fontSize+"px; color:"+options.color+'">'+options.icon+"</div>");iconWrapper.append(iconDom);if(options.width){that.find(".awsui-public-box-title").css("width",options.width-options.fontSize)}else{var width=that.attr("style").indexOf("width");if(width==-1){that.data("width","0");that.css("width",$(this).find(".awsui-public-box-title").width()+options.fontSize+42)}}}if(options.noBorder){that.addClass("awsui-noBorder")}if(options.disabled){that.data("disabled",true);that.addClass("awsui-disabled");that.find(".awsui-public-box-icon").remove();that.css("background","#f5f5f5")}else{that.off("click").on("click",function(){if(that.data("disabled")){return}if($(this).data("selected")){if(options.isClickSelected){$(this).find(".awsui-public-box-icon").remove()}$(this).data("selected",false);if($(this).data("width")){$(this).css(width,"")}$(this).css("background","")}else{var boxArr=$(".awsui-layout-box");$.each(boxArr,function(i,el){if($(el).data("multipleSelected")){return}if($(el).data("width")){$(el).css("width","")}if($(el).data("disabled")){$(el).addClass("awsui-disabled")}else{if($(el).data("selected")){if(options.isClickSelected){$(el).find(".awsui-public-box-icon").remove()}$(el).data("selected",false);$(el).css({background:""})}}});$(this).data("selected",true);$(this).css({background:options.background,"box-shadow":"none"});if(options.isClickSelected){$(this).find(".awsui-public-box-icon").remove();var iconWrapper=$('<div class="awsui-public-box-icon icon-position"></div>').appendTo($(this));var iconDom=iconWrapper.append('<div class="awsui-iconfont" style="font-size:'+options.fontSize+"px; color:"+options.color+'">'+icon+"</div>");iconWrapper.append(iconDom);if(options.width){$(this).find(".awsui-public-box-title").css("width",options.width-options.fontSize)}else{var width=$(this).attr("style").indexOf("width");if(width==-1){$(this).data("width","0");$(this).css("width",$(this).find(".awsui-public-box-title").width()+options.fontSize+42)}}}}if(options.onClick){options.onClick()}});that.hover(function(){if(that.data("disabled")){return}$(this).css("box-shadow","0px 0px 30px rgba(31, 31, 31, 0.2)");if($(this).data("selected")){$(this).css({background:options.background})}else{if(that.hasClass("awsui-noBorder")){$(this).css({background:"#fff",border:"1px solid #e9e9e9","box-shadow":"none"})}else{$(this).css("background","#f9f9f9")}}},function(){$(this).css({"box-shadow":"none",border:""});if($(this).data("selected")){$(this).css("background",options.background)}else{$(this).css("background","")}})}};$.fn.accordions=function(options){var that=$(this);var defaultOptions={background:"#f8f8f8",color:"#666",fontSize:16,icon:"&#xe717;",currentIcon:"&#xe716;",speed:0,expand:"collapse",list:[]};options=$.extend({},defaultOptions,options);var accordions={init:function(){var temp=this;if(options.list.length>0){for(var i=0;i<options.list.length;i++){var item=options.list[i];var liDom=$('<li><div class="awsui-collapse-item awsui-collapse-show" style="color:'+options.color+"; background:"+options.background+'"><div class="awsui-collapse-icon awsui-iconfont" style="font-size:'+options.fontSize+'px;">'+options.icon+'</div><span class="awsui-collapse-text">'+item.title+'</span></div><div class="awsui-collapse-menuList"><div class="awsui-collapse-box">'+item.content+"</div></div></li>");liDom.appendTo(that);var totate=false;liDom.find(".awsui-collapse-item").off();liDom.find(".awsui-collapse-item").on("click",function(){if($(this).hasClass("awsui-collapse-show")){totate=true}else{totate=false}$(this).children(".awsui-iconfont").empty();$(this).children(".awsui-iconfont").addClass("awsui-transition");if(totate){temp.handleExpandStatus(this,options.speed,totate)}else{temp.handleExpandStatus(this,options.speed,totate)}})}if(options.expand=="all"){var item=that.find(".awsui-collapse-item");$.each(item,function(i,el){temp.expandAll()})}else{if(options.expand=="first"){var item=that.find(".awsui-collapse-item").eq(0);temp.handleExpandStatus(item,0,true)}else{temp.collapseAll()}}}},handleExpandStatus:function(el,speed,isExpand){if(isExpand){$(el).removeClass("awsui-collapse-show");$(el).next(".awsui-collapse-menuList").css("border-bottom","1px solid #e9e9e9");$(el).children(".awsui-iconfont").html(options.currentIcon);$(el).next().show(speed)}else{$(el).addClass("awsui-collapse-show");$(el).children(".awsui-iconfont").html(options.icon);$(el).next().hide(speed)}},expandAll:function(){var item=that.find(".awsui-collapse-item");$.each(item,function(i,el){accordions.handleExpandStatus(el,options.speed,true)})},collapseAll:function(){var item=that.find(".awsui-collapse-item");$.each(item,function(i,el){accordions.handleExpandStatus(el,options.speed,false)})},expand:function(index){var item=that.find(".awsui-collapse-item").eq(index);accordions.handleExpandStatus(item,options.speed,true)},collapse:function(index){var item=that.find(".awsui-collapse-item").eq(index);accordions.handleExpandStatus(item,options.speed,false)}};accordions.init();return accordions}})(jQuery);(function(){$("input[type='text']").each(function(){if($(this).next().hasClass("awsui-removeIcon")){$(this).on("keyup",function(){var a=$(this).val();if(a!=""){$(this).next().css("visibility","inherit")}else{$(this).next().css("visibility","hidden")}$(this).next().on("click",function(){$(this).prev().val("");$(this).css("visibility","hidden")})})}})})(jQuery);String.prototype.format=function(b){var a=this;if(arguments.length>0){if(arguments.length==1&&typeof(b)=="object"){for(var d in b){if(b[d]!=undefined){var e=new RegExp("({"+d+"})","g");a=a.replace(e,b[d])}}}else{for(var c=0;c<arguments.length;c++){if(arguments[c]!=undefined){var e=new RegExp("({)"+c+"(})","g");a=a.replace(e,arguments[c])}}}}return a};function stopPropagation(a){a=window.event||a;if(document.all){a.cancelBubble=true}else{a.stopPaopagation()}}function isTelphone(a){var b="((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)";if(a.test(b)){return true}return false}(function(a){a.fn.addBack=a.fn.addBack||a.fn.andSelf;a.fn.extend({actual:function(b,l){if(!this[b]){throw'$.actual => The jQuery method "'+b+'" you called does not exist'}var f={absolute:false,clone:false,includeMargin:false};var i=a.extend(f,l);var e=this.eq(0);var h,j;if(i.clone===true){h=function(){var m="position: absolute !important; top: -1000 !important; ";e=e.clone().attr("style",m).appendTo("body")};j=function(){e.remove()}}else{var g=[];var d="";var c;h=function(){c=e.parents().addBack().filter(":hidden");d+="visibility: hidden !important; display: block !important; ";if(i.absolute===true){d+="position: absolute !important; "}c.each(function(){var m=a(this);var n=m.attr("style");g.push(n);m.attr("style",n?n+";"+d:d)})};j=function(){c.each(function(m){var o=a(this);var n=g[m];if(n===undefined){o.removeAttr("style")}else{o.attr("style",n)}})}}h();var k=/(outer)/.test(b)?e[b](i.includeMargin):e[b]();j();return k}})})(jQuery);function mobileCachetDialog(f,d,e,b,a){var c="<header id='mobile-header' class='mui-bar mui-bar-nav'><a class='mui-icon mui-icon-left-nav mui-pull-left' id='cachetCancelBtn'><font size='4'>"+返回+"</font></a><a class='mui-icon mui-pull-right' id='cachetOkBtn'><font size='4'>"+确定+"</font></a></header><div class='mui-content' style='padding:54px 10px 10px 10px'><div class='mui-input-row'><label>"+印章密码+"</label><span class='required'><input type='password' name='confirmPwd' id='confirmPwd' class='mui-input-clear' value='' style='border: 1px solid rgba(0,0,0,.2);width:65%;'/></span></div></div>";$("#aws-form-container").hide();$("#boItemNameSearch_div").append(c);$("#boItemNameSearch_div").show();$("#cachetCancelBtn").off("click").on("click",function(g){if(b){b()}return false});$("#cachetOkBtn").off("click").on("click",function(g){if(e){e()}return false})}function mobileConfirmDialog(f,c,e,b,a){$("#aws-form-container").hide();var d=$("#frmMain");$("<div id='popup_cachet' class='mui-cachet-div'><header class='mui-bar mui-bar-nav'><a class='mui-icon mui-icon-left-nav mui-pull-left' id='cachetCancelBtn'>"+返回+"</a><a class='mui-icon' style='float:right;' id='cachetOkBtn'>"+保存+"</a></header><div class='mui-content'><div class='mui-input-row'><label>"+印章密码+"</label><span class='required'><input type='password' name='confirmPwd' id='confirmPwd' class='mui-input-clear' value='' style='border: 1px solid rgba(0,0,0,.2);width:65%;'/></span></div></div></div>").appendTo(d);$("#cachetCancelBtn").off("click").on("click",function(g){if(b){b()}$("#popup_cachet").remove();$("#aws-form-container").show()});$("#cachetOkBtn").off("click").on("click",function(g){if(e){e()}})}$.fn.extend({preventScroll:function(a){if(typeof a=="string"){a=$(a)}$(this).each(function(){var b=this;if(navigator.userAgent.indexOf("Firefox")>=0){b.addEventListener("DOMMouseScroll",function(c){if($(b).children().eq(0).is("iframe")){c.preventDefault()}if(a){a.scrollTop(a.scrollTop()+(c.detail>0?60:-60));c.preventDefault()}},false)}else{b.onmousewheel=function(c){c=c||window.event;if($(b).children().eq(0).is("iframe")){return false}if(a){a.scrollTop(a.scrollTop()+(c.wheelDelta>0?-60:60));return false}}}})}});
/*!
 * jQuery File Upload Plugin 5.40.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],b)}else{b(window.jQuery)}}(function(b){b.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||b('<input type="file">').prop("disabled"));b.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);b.support.xhrFormDataFileUpload=!!window.FormData;b.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);b.widget("blueimp.fileupload",{options:{dropZone:b(document),pasteZone:b(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(d,a){d=this.messages[d]||d.toString();if(a){b.each(a,function(f,c){d=d.replace("{"+f+"}",c)})}return d},formData:function(a){return a.serializeArray()},add:function(d,a){if(d.isDefaultPrevented()){return false}if(a.autoUpload||(a.autoUpload!==false&&b(this).fileupload("option","autoUpload"))){a.process().done(function(){a.submit()})}},processData:false,contentType:false,cache:false},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:b.support.blobSlice&&function(){var a=this.slice||this.webkitSlice||this.mozSlice;return a.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(g,h,a){var f=g-this.timestamp;if(!this.bitrate||!a||f>a){this.bitrate=(h-this.loaded)*(1000/f)*8;this.loaded=h;this.timestamp=g}return this.bitrate}},_isXHRUpload:function(a){return !a.forceIframeTransport&&((!a.multipart&&b.support.xhrFileUpload)||b.support.xhrFormDataFileUpload)},_getFormData:function(a){var d;if(b.type(a.formData)==="function"){return a.formData(a.form)}if(b.isArray(a.formData)){return a.formData}if(b.type(a.formData)==="object"){d=[];b.each(a.formData,function(f,c){d.push({name:f,value:c})});return d}return[]},_getTotal:function(d){var a=0;b.each(d,function(f,c){a+=c.size||1});return a},_initProgressObject:function(d){var a={loaded:0,total:0,bitrate:0};if(d._progress){b.extend(d._progress,a)}else{d._progress=a}},_initResponseObject:function(a){var d;if(a._response){for(d in a._response){if(a._response.hasOwnProperty(d)){delete a._response[d]}}}else{a._response={}}},_onProgress:function(e,g){if(e.lengthComputable){var h=((Date.now)?Date.now():(new Date()).getTime()),a;if(g._time&&g.progressInterval&&(h-g._time<g.progressInterval)&&e.loaded!==e.total){return}g._time=h;a=Math.floor(e.loaded/e.total*(g.chunkSize||g._progress.total))+(g.uploadedBytes||0);this._progress.loaded+=(a-g._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(h,this._progress.loaded,g.bitrateInterval);g._progress.loaded=g.loaded=a;g._progress.bitrate=g.bitrate=g._bitrateTimer.getBitrate(h,a,g.bitrateInterval);this._trigger("progress",b.Event("progress",{delegatedEvent:e}),g);this._trigger("progressall",b.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(a){var f=this,e=a.xhr?a.xhr():b.ajaxSettings.xhr();if(e.upload){b(e.upload).bind("progress",function(d){var c=d.originalEvent;d.lengthComputable=c.lengthComputable;d.loaded=c.loaded;d.total=c.total;f._onProgress(d,a)});a.xhr=function(){return e}}},_isInstanceOf:function(a,d){return Object.prototype.toString.call(d)==="[object "+a+"]"},_initXHRData:function(l){var j=this,h,k=l.files[0],a=l.multipart||!b.support.xhrFileUpload,i=b.type(l.paramName)==="array"?l.paramName[0]:l.paramName;l.headers=b.extend({},l.headers);if(l.contentRange){l.headers["Content-Range"]=l.contentRange}if(!a||l.blob||!this._isInstanceOf("File",k)){l.headers["Content-Disposition"]='attachment; filename="'+encodeURI(k.name)+'"'}if(!a){l.contentType=k.type||"application/octet-stream";l.data=l.blob||k}else{if(b.support.xhrFormDataFileUpload){if(l.postMessage){h=this._getFormData(l);if(l.blob){h.push({name:i,value:l.blob})}else{b.each(l.files,function(d,c){h.push({name:(b.type(l.paramName)==="array"&&l.paramName[d])||i,value:c})})}}else{if(j._isInstanceOf("FormData",l.formData)){h=l.formData}else{h=new FormData();b.each(this._getFormData(l),function(d,c){h.append(c.name,c.value)})}if(l.blob){h.append(i,l.blob,k.name)}else{b.each(l.files,function(d,c){if(j._isInstanceOf("File",c)||j._isInstanceOf("Blob",c)){h.append((b.type(l.paramName)==="array"&&l.paramName[d])||i,c,encodeURI(c.uploadName||c.name))}})}}l.data=h}}l.blob=null},_initIframeSettings:function(a){var d=b("<a></a>").prop("href",a.url).prop("host");a.dataType="iframe "+(a.dataType||"");a.formData=this._getFormData(a);if(a.redirect&&d&&d!==location.host){a.formData.push({name:a.redirectParamName||"redirect",value:a.redirect})}},_initDataSettings:function(a){if(this._isXHRUpload(a)){if(!this._chunkedUpload(a,true)){if(!a.data){this._initXHRData(a)}this._initProgressListener(a)}if(a.postMessage){a.dataType="postmessage "+(a.dataType||"")}}else{this._initIframeSettings(a)}},_getParamName:function(a){var f=b(a.fileInput),e=a.paramName;if(!e){e=[];f.each(function(){var h=b(this),d=h.prop("name")||"files[]",c=(h.prop("files")||[1]).length;while(c){e.push(d);c-=1}});if(!e.length){e=[f.prop("name")||"files[]"]}}else{if(!b.isArray(e)){e=[e]}}return e},_initFormSettings:function(a){if(!a.form||!a.form.length){a.form=b(a.fileInput.prop("form"));if(!a.form.length){a.form=b(this.options.fileInput.prop("form"))}}a.paramName=this._getParamName(a);if(!a.url){a.url=a.form.prop("action")||location.href}a.type=(a.type||(b.type(a.form.prop("method"))==="string"&&a.form.prop("method"))||"").toUpperCase();if(a.type!=="POST"&&a.type!=="PUT"&&a.type!=="PATCH"){a.type="POST"}if(!a.formAcceptCharset){a.formAcceptCharset=a.form.attr("accept-charset")}},_getAJAXSettings:function(d){var a=b.extend({},this.options,d);this._initFormSettings(a);this._initDataSettings(a);return a},_getDeferredState:function(a){if(a.state){return a.state()}if(a.isResolved()){return"resolved"}if(a.isRejected()){return"rejected"}return"pending"},_enhancePromise:function(a){a.success=a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(h,i,j){var a=b.Deferred(),g=a.promise();i=i||this.options.context||g;if(h===true){a.resolveWith(i,j)}else{if(h===false){a.rejectWith(i,j)}}g.abort=a.promise;return this._enhancePromise(g)},_addConvenienceMethods:function(e,g){var h=this,a=function(c){return b.Deferred().resolveWith(h,c).promise()};g.process=function(c,d){if(c||d){g._processQueue=this._processQueue=(this._processQueue||a([this])).pipe(function(){if(g.errorThrown){return b.Deferred().rejectWith(h,[g]).promise()}return a(arguments)}).pipe(c,d)}return this._processQueue||a([this])};g.submit=function(){if(this.state()!=="pending"){g.jqXHR=this.jqXHR=(h._trigger("submit",b.Event("submit",{delegatedEvent:e}),this)!==false)&&h._onSend(e,this)}return this.jqXHR||h._getXHRPromise()};g.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}this.errorThrown="abort";h._trigger("fail",null,this);return h._getXHRPromise(false)};g.state=function(){if(this.jqXHR){return h._getDeferredState(this.jqXHR)}if(this._processQueue){return h._getDeferredState(this._processQueue)}};g.processing=function(){return !this.jqXHR&&this._processQueue&&h._getDeferredState(this._processQueue)==="pending"};g.progress=function(){return this._progress};g.response=function(){return this._response}},_getUploadedBytes:function(g){var a=g.getResponseHeader("Range"),f=a&&a.split("-"),h=f&&f.length>1&&parseInt(f[1],10);return h&&h+1},_chunkedUpload:function(a,s){a.uploadedBytes=a.uploadedBytes||0;var t=this,v=a.files[0],u=v.size,x=a.uploadedBytes,w=a.maxChunkSize||u,q=this._blobSlice,p=b.Deferred(),n=p.promise(),r,o;if(!(this._isXHRUpload(a)&&q&&(x||w<u))||a.data){return false}if(s){return true}if(x>=u){v.error=a.i18n("uploadedBytes");return this._getXHRPromise(false,a.context,[null,"error",v.error])}o=function(){var c=b.extend({},a),d=c._progress.loaded;c.blob=q.call(v,x,x+w,v.type);c.chunkSize=c.blob.size;c.contentRange="bytes "+x+"-"+(x+c.chunkSize-1)+"/"+u;t._initXHRData(c);t._initProgressListener(c);r=((t._trigger("chunksend",null,c)!==false&&b.ajax(c))||t._getXHRPromise(false,c.context)).done(function(g,e,f){x=t._getUploadedBytes(f)||(x+c.chunkSize);if(d+c.chunkSize-c._progress.loaded){t._onProgress(b.Event("progress",{lengthComputable:true,loaded:x-c.uploadedBytes,total:x-c.uploadedBytes}),c)}a.uploadedBytes=c.uploadedBytes=x;c.result=g;c.textStatus=e;c.jqXHR=f;t._trigger("chunkdone",null,c);t._trigger("chunkalways",null,c);if(x<u){o()}else{p.resolveWith(c.context,[g,e,f])}}).fail(function(g,e,f){c.jqXHR=g;c.textStatus=e;c.errorThrown=f;t._trigger("chunkfail",null,c);t._trigger("chunkalways",null,c);p.rejectWith(c.context,[g,e,f])})};this._enhancePromise(n);n.abort=function(){return r.abort()};o();return n},_beforeSend:function(d,a){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0}this._initResponseObject(a);this._initProgressObject(a);a._progress.loaded=a.loaded=a.uploadedBytes||0;a._progress.total=a.total=this._getTotal(a.files)||1;a._progress.bitrate=a.bitrate=0;this._active+=1;this._progress.loaded+=a.loaded;this._progress.total+=a.total},_onDone:function(a,h,i,k){var j=k._progress.total,l=k._response;if(k._progress.loaded<j){this._onProgress(b.Event("progress",{lengthComputable:true,loaded:j,total:j}),k)}l.result=k.result=a;l.textStatus=k.textStatus=h;l.jqXHR=k.jqXHR=i;this._trigger("done",null,k)},_onFail:function(i,g,h,j){var a=j._response;if(j.recalculateProgress){this._progress.loaded-=j._progress.loaded;this._progress.total-=j._progress.total}a.jqXHR=j.jqXHR=i;a.textStatus=j.textStatus=g;a.errorThrown=j.errorThrown=h;this._trigger("fail",null,j)},_onAlways:function(g,f,h,a){this._trigger("always",null,a)},_onSend:function(m,o){if(!o.submit){this._addConvenienceMethods(m,o)}var n=this,e,r,l,q,a=n._getAJAXSettings(o),p=function(){n._sending+=1;a._bitrateTimer=new n._BitrateTimer();e=e||(((r||n._trigger("send",b.Event("send",{delegatedEvent:m}),a)===false)&&n._getXHRPromise(false,a.context,r))||n._chunkedUpload(a)||b.ajax(a)).done(function(f,c,d){n._onDone(f,c,d,a)}).fail(function(f,c,d){n._onFail(f,c,d,a)}).always(function(c,g,d){n._onAlways(c,g,d,a);n._sending-=1;n._active-=1;if(a.limitConcurrentUploads&&a.limitConcurrentUploads>n._sending){var f=n._slots.shift();while(f){if(n._getDeferredState(f)==="pending"){f.resolve();break}f=n._slots.shift()}}if(n._active===0){n._trigger("stop")}});return e};this._beforeSend(m,a);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){l=b.Deferred();this._slots.push(l);q=l.pipe(p)}else{this._sequence=this._sequence.pipe(p,p);q=this._sequence}q.abort=function(){r=[undefined,"abort","abort"];if(!e){if(l){l.rejectWith(a.context,r)}return p()}return e.abort()};return this._enhancePromise(q)}return p()},_onAdd:function(i,x){var j=this,F=true,G=b.extend({},this.options,x),C=x.files,a=C.length,B=G.limitMultiFileUploads,z=G.limitMultiFileUploadSize,H=G.limitMultiFileUploadSizeOverhead,v=0,w=this._getParamName(G),D,E,e,y,A=0;if(z&&(!a||C[0].size===undefined)){z=undefined}if(!(G.singleFileUploads||B||z)||!this._isXHRUpload(G)){e=[C];D=[w]}else{if(!(G.singleFileUploads||z)&&B){e=[];D=[];for(y=0;y<a;y+=B){e.push(C.slice(y,y+B));E=w.slice(y,y+B);if(!E.length){E=w}D.push(E)}}else{if(!G.singleFileUploads&&z){e=[];D=[];for(y=0;y<a;y=y+1){v+=C[y].size+H;if(y+1===a||((v+C[y+1].size+H)>z)||(B&&y+1-A>=B)){e.push(C.slice(A,y+1));E=w.slice(A,y+1);if(!E.length){E=w}D.push(E);A=y+1;v=0}}}else{D=w}}}x.originalFiles=C;b.each(e||C,function(f,d){var c=b.extend({},x);c.files=e?d:[d];c.paramName=D[f];j._initResponseObject(c);j._initProgressObject(c);j._addConvenienceMethods(i,c);F=j._trigger("add",b.Event("add",{delegatedEvent:i}),c);return F});return F},_replaceFileInput:function(a){var d=a.clone(true);b("<form></form>").append(d)[0].reset();a.after(d).detach();b.cleanData(a.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(f,c){if(c===a[0]){return d[0]}return c});if(a[0]===this.element[0]){this.element=d}},_handleFileTreeEntry:function(m,k){var p=this,l=b.Deferred(),q=function(c){if(c&&!c.entry){c.entry=m}l.resolve([c])},o=function(c){p._handleFileTreeEntries(c,k+m.name+"/").done(function(d){l.resolve(d)}).fail(q)},n=function(){a.readEntries(function(c){if(!c.length){o(r)}else{r=r.concat(c);n()}},q)},a,r=[];k=k||"";if(m.isFile){if(m._file){m._file.relativePath=k;l.resolve(m._file)}else{m.file(function(c){c.relativePath=k;l.resolve(c)},q)}}else{if(m.isDirectory){a=m.createReader();n()}else{l.resolve([])}}return l.promise()},_handleFileTreeEntries:function(a,e){var f=this;return b.when.apply(b,b.map(a,function(c){return f._handleFileTreeEntry(c,e)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(d){d=d||{};var a=d.items;if(a&&a.length&&(a[0].webkitGetAsEntry||a[0].getAsEntry)){return this._handleFileTreeEntries(b.map(a,function(c){var f;if(c.webkitGetAsEntry){f=c.webkitGetAsEntry();if(f){f._file=c.getAsFile()}return f}return c.getAsEntry()}))}return b.Deferred().resolve(b.makeArray(d.files)).promise()},_getSingleFileInputFiles:function(g){g=b(g);var a=g.prop("webkitEntries")||g.prop("entries"),h,f;if(a&&a.length){return this._handleFileTreeEntries(a)}h=b.makeArray(g.prop("files"));if(!h.length){f=g.prop("value");if(!f){return b.Deferred().resolve([]).promise()}h=[{name:f.replace(/^.*\\/,"")}]}else{if(h[0].name===undefined&&h[0].fileName){b.each(h,function(d,c){c.name=c.fileName;c.size=c.fileSize})}}return b.Deferred().resolve(h).promise()},_getFileInputFiles:function(a){if(!(a instanceof b)||a.length===1){return this._getSingleFileInputFiles(a)}return b.when.apply(b,b.map(a,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(e){var a=this,f={fileInput:b(e.target),form:b(e.target.form)};this._getFileInputFiles(f.fileInput).always(function(c){f.files=c;if(a.options.replaceFileInput){a._replaceFileInput(f.fileInput)}if(a._trigger("change",b.Event("change",{delegatedEvent:e}),f)!==false){a._onAdd(e,f)}})},_onPaste:function(e){var a=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,f={files:[]};if(a&&a.length){b.each(a,function(h,c){var d=c.getAsFile&&c.getAsFile();if(d){f.files.push(d)}});if(this._trigger("paste",b.Event("paste",{delegatedEvent:e}),f)!==false){this._onAdd(e,f)}}},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var a=this,g=e.dataTransfer,h={};if(g&&g.files&&g.files.length){e.preventDefault();this._getDroppedFiles(g).always(function(c){h.files=c;if(a._trigger("drop",b.Event("drop",{delegatedEvent:e}),h)!==false){a._onAdd(e,h)}})}},_onDragOver:function(d){d.dataTransfer=d.originalEvent&&d.originalEvent.dataTransfer;var a=d.dataTransfer;if(a&&b.inArray("Files",a.types)!==-1&&this._trigger("dragover",b.Event("dragover",{delegatedEvent:d}))!==false){d.preventDefault();a.dropEffect="copy"}},_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop});this._on(this.options.pasteZone,{paste:this._onPaste})}if(b.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(a,f){var e=b.inArray(a,this._specialOptions)!==-1;if(e){this._destroyEventHandlers()}this._super(a,f);if(e){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var a=this.options;if(a.fileInput===undefined){a.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else{if(!(a.fileInput instanceof b)){a.fileInput=b(a.fileInput)}}if(!(a.dropZone instanceof b)){a.dropZone=b(a.dropZone)}if(!(a.pasteZone instanceof b)){a.pasteZone=b(a.pasteZone)}},_getRegExp:function(e){var f=e.split("/"),a=f.pop();f.shift();return new RegExp(f.join("/"),a)},_isRegExpOption:function(a,d){return a!=="url"&&b.type(d)==="string"&&/^\/.*\/[igm]{0,3}$/.test(d)},_initDataAttributes:function(){var f=this,a=this.options,e=b(this.element[0].cloneNode(false));b.each(e.data(),function(h,d){var c="data-"+h.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();if(e.attr(c)){if(f._isRegExpOption(h,d)){d=f._getRegExp(d)}a[h]=d}})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(d){var a=this;if(!d||this.options.disabled){return}if(d.fileInput&&!d.files){this._getFileInputFiles(d.fileInput).always(function(c){d.files=c;a._onAdd(null,d)})}else{d.files=b.makeArray(d.files);this._onAdd(null,d)}},send:function(i){if(i&&!this.options.disabled){if(i.fileInput&&!i.files){var k=this,a=b.Deferred(),h=a.promise(),l,j;h.abort=function(){j=true;if(l){return l.abort()}a.reject(null,"abort","abort");return h};this._getFileInputFiles(i.fileInput).always(function(c){if(j){return}if(!c.length){a.reject();return}i.files=c;l=k._onSend(null,i);l.then(function(f,d,e){a.resolve(f,d,e)},function(f,d,e){a.reject(f,d,e)})});return this._enhancePromise(h)}i.files=b.makeArray(i.files);if(i.files.length){return this._onSend(null,i)}}return this._getXHRPromise(false,i&&i.context)}})}));
/*!
 * jQuery File Upload Processing Plugin 1.3.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload"],b)}else{b(window.jQuery)}}(function(d){var c=d.blueimp.fileupload.prototype.options.add;d.widget("blueimp.fileupload",d.blueimp.fileupload,{options:{processQueue:[],add:function(a,e){var b=d(this);e.process(function(){return b.fileupload("process",e)});c.call(this,a,e)}},processActions:{},_processFile:function(a,b){var h=this,j=d.Deferred().resolveWith(h,[a]),i=j.promise();this._trigger("process",null,a);d.each(a.processQueue,function(g,f){var e=function(k){if(b.errorThrown){return d.Deferred().rejectWith(h,[b]).promise()}return h.processActions[f.action].call(h,k,f)};i=i.pipe(e,f.always&&e)});i.done(function(){h._trigger("processdone",null,a);h._trigger("processalways",null,a)}).fail(function(){h._trigger("processfail",null,a);h._trigger("processalways",null,a)});return i},_transformProcessQueue:function(b){var a=[];d.each(b.processQueue,function(){var j={},h=this.action,i=this.prefix===true?h:this.prefix;d.each(this,function(f,e){if(d.type(e)==="string"&&e.charAt(0)==="@"){j[f]=b[e.slice(1)||(i?i+f.charAt(0).toUpperCase()+f.slice(1):f)]}else{j[f]=e}});a.push(j)});b.processQueue=a},processing:function(){return this._processing},process:function(a){var b=this,f=d.extend({},this.options,a);if(f.processQueue&&f.processQueue.length){this._transformProcessQueue(f);if(this._processing===0){this._trigger("processstart")}d.each(a.files,function(j){var e=j?d.extend({},f):f,i=function(){if(a.errorThrown){return d.Deferred().rejectWith(b,[a]).promise()}return b._processFile(e,a)};e.index=j;b._processing+=1;b._processingQueue=b._processingQueue.pipe(i,i).always(function(){b._processing-=1;if(b._processing===0){b._trigger("processstop")}})})}return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=d.Deferred().resolveWith(this).promise()}})}));
/*!
 * jQuery File Upload User Interface Plugin 9.5.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery","tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],b)}else{b(window.jQuery,window.tmpl)}}(function(c,d){c.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId");c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{autoUpload:false,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:undefined,prependFiles:false,dataType:"json",getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(a){if(a.result&&c.isArray(a.result.files)){return a.result.files}return[]},add:function(a,e){if(a.isDefaultPrevented()){return false}var b=c(this),i=b.data("blueimp-fileupload")||b.data("fileupload"),j=i.options;e.context=i._renderUpload(e.files).data("data",e).addClass("processing");j.filesContainer[j.prependFiles?"prepend":"append"](e.context);i._forceReflow(e.context);i._transition(e.context);e.process(function(){return b.fileupload("process",e)}).always(function(){e.context.each(function(f){c(this).find(".size").text(i._formatFileSize(e.files[f].size))}).removeClass("processing");i._renderPreviews(e)}).done(function(){e.context.find(".start").prop("disabled",false);if((i._trigger("added",a,e)!==false)&&(j.autoUpload||e.autoUpload)&&e.autoUpload!==false){e.submit()}}).fail(function(){if(e.files.error){e.context.each(function(f){var g=e.files[f].error;if(g){c(this).find(".error").text(g)}})}})},send:function(a,b){if(a.isDefaultPrevented()){return false}var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload");if(b.context&&b.dataType&&b.dataType.substr(0,6)==="iframe"){b.context.find(".progress").addClass(!c.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%")}return e._trigger("sent",a,b)},done:function(a,b){if(a.isDefaultPrevented()){return false}var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),m=b.getFilesFromResponse||e.options.getFilesFromResponse,k=m(b),l,n;if(b.context){b.context.each(function(g){var f=k[g]||{error:"Empty file upload result"};n=e._addFinishedDeferreds();e._transition(c(this)).done(function(){var h=c(this);l=e._renderDownload([f]).replaceAll(h);e._forceReflow(l);e._transition(l).done(function(){b.context=c(this);e._trigger("completed",a,b);e._trigger("finished",a,b);n.resolve()})})})}else{l=e._renderDownload(k)[e.options.prependFiles?"prependTo":"appendTo"](e.options.filesContainer);e._forceReflow(l);n=e._addFinishedDeferreds();e._transition(l).done(function(){b.context=c(this);e._trigger("completed",a,b);e._trigger("finished",a,b);n.resolve()})}},fail:function(a,b){if(a.isDefaultPrevented()){return false}var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),i,j;if(b.context){b.context.each(function(g){if(b.errorThrown!=="abort"){var f=b.files[g];f.error=f.error||b.errorThrown||true;j=e._addFinishedDeferreds();e._transition(c(this)).done(function(){var h=c(this);i=e._renderDownload([f]).replaceAll(h);e._forceReflow(i);e._transition(i).done(function(){b.context=c(this);e._trigger("failed",a,b);e._trigger("finished",a,b);j.resolve()})})}else{j=e._addFinishedDeferreds();e._transition(c(this)).done(function(){c(this).remove();e._trigger("failed",a,b);e._trigger("finished",a,b);j.resolve()})}})}else{if(b.errorThrown!=="abort"){b.context=e._renderUpload(b.files)[e.options.prependFiles?"prependTo":"appendTo"](e.options.filesContainer).data("data",b);e._forceReflow(b.context);j=e._addFinishedDeferreds();e._transition(b.context).done(function(){b.context=c(this);e._trigger("failed",a,b);e._trigger("finished",a,b);j.resolve()})}else{e._trigger("failed",a,b);e._trigger("finished",a,b);e._addFinishedDeferreds().resolve()}}},progress:function(a,b){if(a.isDefaultPrevented()){return false}var e=Math.floor(b.loaded/b.total*100);if(b.context){b.context.each(function(){c(this).find(".progress").attr("aria-valuenow",e).children().first().css("width",e+"%")})}},progressall:function(b,j){if(b.isDefaultPrevented()){return false}var e=c(this),k=Math.floor(j.loaded/j.total*100),l=e.find(".fileupload-progress"),a=l.find(".progress-extended");if(a.length){a.html((e.data("blueimp-fileupload")||e.data("fileupload"))._renderExtendedProgress(j))}l.find(".progress").attr("aria-valuenow",k).children().first().css("width",k+"%")},start:function(a){if(a.isDefaultPrevented()){return false}var b=c(this).data("blueimp-fileupload")||c(this).data("fileupload");b._resetFinishedDeferreds();b._transition(c(this).find(".fileupload-progress")).done(function(){b._trigger("started",a)})},stop:function(a){if(a.isDefaultPrevented()){return false}var b=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e=b._addFinishedDeferreds();c.when.apply(c,b._getFinishedDeferreds()).done(function(){b._trigger("stopped",a)});b._transition(c(this).find(".fileupload-progress")).done(function(){c(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%");c(this).find(".progress-extended").html("&nbsp;");e.resolve()})},processstart:function(a){if(a.isDefaultPrevented()){return false}c(this).addClass("fileupload-processing")},processstop:function(a){if(a.isDefaultPrevented()){return false}c(this).removeClass("fileupload-processing")},destroy:function(b,e){if(b.isDefaultPrevented()){return false}var h=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),a=function(){h._transition(e.context).done(function(){c(this).remove();h._trigger("destroyed",b,e)})};if(e.url){e.dataType=e.dataType||h.options.dataType;c.ajax(e).done(a).fail(function(){h._trigger("destroyfailed",b,e)})}else{a()}}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(a){if(!a){a=c.Deferred()}this._finishedUploads.push(a);return a},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var a=c(this),g=a.prop("href"),h=a.prop("download"),b="application/octet-stream";a.bind("dragstart",function(f){try{f.originalEvent.dataTransfer.setData("DownloadURL",[b,h,g].join(":"))}catch(e){}})},_formatFileSize:function(a){if(typeof a!=="number"){return""}if(a>=1000000000){return(a/1000000000).toFixed(2)+" GB"}if(a>=1000000){return(a/1000000).toFixed(2)+" MB"}return(a/1000).toFixed(2)+" KB"},_formatBitrate:function(a){if(typeof a!=="number"){return""}if(a>=1000000000){return(a/1000000000).toFixed(2)+" Gbit/s"}if(a>=1000000){return(a/1000000).toFixed(2)+" Mbit/s"}if(a>=1000){return(a/1000).toFixed(2)+" kbit/s"}return a.toFixed(2)+" bit/s"},_formatTime:function(b){var f=new Date(b*1000),a=Math.floor(b/86400);a=a?a+"d ":"";return a+("0"+f.getUTCHours()).slice(-2)+":"+("0"+f.getUTCMinutes()).slice(-2)+":"+("0"+f.getUTCSeconds()).slice(-2)},_formatPercentage:function(a){return(a*100).toFixed(2)+" %"},_renderExtendedProgress:function(a){return this._formatBitrate(a.bitrate)+" | "+this._formatTime((a.total-a.loaded)*8/a.bitrate)+" | "+this._formatPercentage(a.loaded/a.total)+" | "+this._formatFileSize(a.loaded)+" / "+this._formatFileSize(a.total)},_renderTemplate:function(a,b){if(!a){return c()}var f=a({files:b,formatFileSize:this._formatFileSize,options:this.options});if(f instanceof c){return f}return c(this.options.templatesContainer).html(f).children()},_renderPreviews:function(a){a.context.find(".preview").each(function(f,b){c(b).append(a.files[f].preview)})},_renderUpload:function(a){return this._renderTemplate(this.options.uploadTemplate,a)},_renderDownload:function(a){return this._renderTemplate(this.options.downloadTemplate,a).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(a){a.preventDefault();var h=c(a.currentTarget),e=h.closest(".template-upload"),b=e.data("data");h.prop("disabled",true);if(b&&b.submit){b.submit()}},_cancelHandler:function(a){a.preventDefault();var e=c(a.currentTarget).closest(".template-upload,.template-download"),b=e.data("data")||{};b.context=b.context||e;if(b.abort){b.abort()}else{b.errorThrown="abort";this._trigger("fail",a,b)}},_deleteHandler:function(a){a.preventDefault();var b=c(a.currentTarget);this._trigger("destroy",a,c.extend({context:b.closest(".template-download"),type:"DELETE"},b.data()))},_forceReflow:function(a){return c.support.transition&&a.length&&a[0].offsetWidth},_transition:function(a){var b=c.Deferred();if(c.support.transition&&a.hasClass("fade")&&a.is(":visible")){a.bind(c.support.transition.end,function(e){if(e.target===a[0]){a.unbind(c.support.transition.end);b.resolveWith(a)}}).toggleClass("in")}else{a.toggleClass("in");b.resolveWith(a)}return b},_initButtonBarEventHandlers:function(){var b=this.element.find(".fileupload-buttonbar"),a=this.options.filesContainer;this._on(b.find(".start"),{click:function(e){e.preventDefault();a.find(".start").click()}});this._on(b.find(".cancel"),{click:function(e){e.preventDefault();a.find(".cancel").click()}});this._on(b.find(".delete"),{click:function(e){e.preventDefault();a.find(".toggle:checked").closest(".template-download").find(".delete").click();b.find(".toggle").prop("checked",false)}});this._on(b.find(".toggle"),{change:function(e){a.find(".toggle").prop("checked",c(e.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",false).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",true).parent().addClass("disabled")},_initTemplates:function(){var a=this.options;a.templatesContainer=this.document[0].createElement(a.filesContainer.prop("nodeName"));if(d){if(a.uploadTemplateId){a.uploadTemplate=d(a.uploadTemplateId)}if(a.downloadTemplateId){a.downloadTemplate=d(a.downloadTemplateId)}}},_initFilesContainer:function(){var a=this.options;if(a.filesContainer===undefined){a.filesContainer=this.element.find(".files")}else{if(!(a.filesContainer instanceof c)){a.filesContainer=c(a.filesContainer)}}},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();if(!c.support.fileInput){this._disableFileInputButton()}},enable:function(){var a=false;if(this.options.disabled){a=true}this._super();if(a){this.element.find("input, button").prop("disabled",false);this._enableFileInputButton()}},disable:function(){if(!this.options.disabled){this.element.find("input, button").prop("disabled",true);this._disableFileInputButton()}this._super()}})}));
/*!
 * =====================================================
 * AWS附件上传通用库文件
 * v1.0 (http://www.actionsoft.com.cn)
 * 发布后文件名：aws.upfile.js
 * =====================================================
 */
function __awsui_upfile_handler(d,a,c){var b=$("#"+d).parent().data("upfile-opts");var e=b[a];if(e!=null){if(a=="complete"){e()}else{return e.apply(b,c)}}}(function(b){var c=false;var a=navigator.userAgent.toLowerCase();if(a.indexOf("msie 8")>-1||a.indexOf("msie 9")>-1){c=true}var d=function(){var g=document.URL;var f="uf";if(g&&g.indexOf("/r/")!=-1){f=g.substring(0,g.indexOf("/r/"))+"/r/uf"}else{if(g&&g.indexOf("/apps")>-1){f=g.substring(0,g.indexOf("/apps"))+"/r/uf"}}var e=f+"?";return e};b.fn.upfile=function(E){if(c){if("close"==E){b(this).find("div[t_upfile]").remove();b(this).removeData("upfile-instance");return}if(b(this).data("upfile-instance")!=null){return}}var P=b(this);var B=E||{};var A=E.sid,C=E.groupValue,Z=E.extParam===undefined?"":E.extParam,D=E.fileValue,G=E.repositoryName;var g=false;var k=5*1024*1024;if(E.maxFileSize!=null||E.sizeLimit!=null){k=E.maxFileSize||E.sizeLimit}AWSFile.sizelimit=k;var M="[]";if(E.filter!=null||E.filesToFilter!=null){M=E.filter||E.filesToFilter;if(jQuery.isArray(M)){M=awsui.encode(M)}}if(E.isShowProgress&&E.isShowProgress==true){g=true;AWSFile.initProgress()}var I=E.appId;var z=0;if(E.numLimit!=null||E.maxUpLength!=null){z=E.numLimit||E.maxUpLength}if(E.filesToFilter){var s;try{s=E.filesToFilter[0][1]}catch(ab){}}var x=0;var O="";if(b(this).attr("id")!=undefined){O="upfile_"+b(this).attr("id")}else{O="upfile_"+Math.random().toString(36).substring(7)}if(c){var J={sizeLimit:k,filter:M,numLimit:z,url:d()+"appId="+E.appId+"&sid="+A+"&groupValue="+C+"&fileValue="+D+"&repositoryName="+G+"&extParam="+Z,eId:O};var ad=E.complete;var W=E.progress;var u=E.done;var i=E.add;E.add=function(aj,w){AWSFile.currentLoading_t=0;AWSFile.currentLoading_t_progress=1;x=0;var ah=b("#"+E.fileDomId).val();if(ah){x=ah.split("@@@@").length}var al={};var h=new Array();var ai=arguments[0].length;if(ai>0){for(var ag=0;ag<ai;ag++){var p={};p.name=arguments[0][ag]["fileName"];p.type=arguments[0][ag]["fileType"];p.size=arguments[0][ag]["fileSize"];h.push(p)}}al.files=h;al.originalFiles=h;var ak=AWSFile.addCallbackFn(i,al,E,x);if(ak){b.simpleAlert(正在上传请稍候,"loading",{model:true})}return ak};E.progress=function(ah,ag){var p={};var w=new Array();if(arguments!=null){var h={};h.name=arguments[0];w.push(h)}p.files=w;p.loaded=arguments[1];p.total=arguments[2];AWSFile.progressCallbackFn(W,p,g)};E.done=function(aj,ai){b.simpleAlert("close");var h=false;if(arguments.length>3&&arguments[3]!=null){try{var w=awsui.decode(arguments[3]);if(w.data.result!=="ok"){h=true}if(h){if(E.error!=null){E.error.apply(P,arguments)}else{b.simpleAlert(w.data.result.data.msg,"error")}}}catch(aj){alert(aj)}}if(!h){var ag={};var ah=new Array();if(arguments!=null){var p={};p.name=arguments[0];p.type=arguments[2];p.size=arguments[1];ah.push(p)}ag.files=ah;var w=awsui.decode(arguments[3]);ag.result=w;AWSFile.doneCallbackFn(u,E,ag)}};E.complete=function(p,h){b.simpleAlert("close");b(".ph_loaded").html(100+"%");b(".inner_mask").css("width",100+"%");b.simpleAlert(上传成功,"ok",2000);if(ad!=null){ad.apply(P,arguments)}else{AWSFile.completeCallbackFn(g)}};var t="upfile"+O;var m="../commons/js/jquery/scripts/ui/upfile/FileUpload.swf";htmls="";htmls+='<div id="'+t+'" style="position :absolute;top:0px;left:0px;">';htmls+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+O+'">';htmls+='<param name="movie" value="'+m+'" />';htmls+='<param name="quality" value="high" />';htmls+='<param name="allowScriptAccess" value="sameDomain" />';htmls+='<param name="allowFullScreen" value="true" />';htmls+='<param name="wmode" value="transparent" />';htmls+='<param name="flashvars" value="'+b.param(J)+'" />';htmls+='<embed id="'+O+'" name="'+O+'" wmode="transparent" allowScriptAccess="sameDomain" allowNetworking ="all" quality="high" width="100%" height="100%" src="'+m;htmls+='" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/cn/products/flashplayer" flashvars="'+b.param(J)+'">';htmls+="</embed>";htmls+="</object>";htmls+="</div>";b(this).css("position","relative");var V=b(this).actual("outerWidth");var Y=b(this).actual("outerHeight");var ac=b(htmls).appendTo(b(this));b(this).data("upfile-instance",ac);ac.data("upfile-opts",E);ac.width(V);ac.height(Y)}else{var f="";var n="";if(E.filesToFilter){var L=E.filesToFilter[0][1];if(L){var v=L.split(";").join(",");v=v.replace(/\*/g,"");if(v.length>0){if(v.indexOf(".xls,")>-1){v=v.replace(".xls,","application/vnd.ms-excel,")}if(v.indexOf(".xlsx,")>-1){v=v.replace(".xlsx,","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,")}if(v.indexOf(".doc,")>-1){v=v.replace(".doc,","application/msword,")}if(v.indexOf(".docx,")>-1){v=v.replace(".docx,","application/vnd.openxmlformats-officedocument.wordprocessingml.document,")}if(v.indexOf(".ppt,")>-1){v=v.replace(".ppt,","application/vnd.ms-powerpoint,")}if(v.indexOf(".pptx,")>-1){v=v.replace(".pptx,","application/vnd.openxmlformats-officedocument.presentationml.presentation,")}if(v.indexOf(".app")>-1){v=v.replace(".app","application/app")}if(v.indexOf(".zip")>-1){v=v.replace(".zip","application/zip")}if(v.indexOf(".cer")>-1){v=v.replace(".cer","application/x-x509-ca-cert")}if(v.indexOf(".p12")>-1){v=v.replace(".p12","application/x-pkcs12")}if(v.indexOf(".crt")>-1){v=v.replace(".crt","application/x-x509-ca-cert")}if(v.indexOf(".pdf")>-1){v=v.replace(".pdf","application/pdf")}}n="accept='"+v+"'";if(E.accept){n="accept='"+E.accept+"'"}}}f="<input type='file' style='display:none;' id='"+O+"' "+(z==1?"":"multiple='multiple' ")+n+">";b(f).insertAfter(b(this));var m=encodeURI(d()+"appId="+E.appId+"&sid="+A+"&groupValue="+C+"&fileValue="+D+"&repositoryName="+G+"&extParam="+Z);var r={appId:E.appId,sid:A,groupValue:C,fileValue:D,repositoryName:G,extParam:Z};var j=0;var S={url:m,autoUpload:true,sequentialUploads:E.sequentialUploads===true,dataType:"json",fileInput:b("#"+O),paramName:r,add:function(ag,w){if(w){if(w.files&&w.files.length>0){if("/"==w.files[0].name){return false}}}x=0;var h=b("#"+E.fileDomId).val();if(h){x=h.split("@@@@").length}var p=AWSFile.addCallbackFn(E.add,w,E,x);if(p){w.submit();if(j==0){b.simpleAlert(正在上传请稍候,"loading",{model:true})}j++}},progress:function(p,h){AWSFile.progressCallbackFn(E.progress,h,g)},complete:function(p,h){if(E.complete){E.complete(p,h)}else{AWSFile.completeCallbackFn(g)}},done:function(p,h){j--;if(j==0){b.simpleAlert("close")}if(h.result.data.result=="error"){b.simpleAlert(h.result.data.msg,"error")}else{AWSFile.doneCallbackFn(E.done,E,h)}},error:function(p,h){}};b("#"+O).on("click",function(){b("#"+O).fileupload(S);b("#"+O).off("click")});var K=b("#isMobile").val();var R="click";if(K=="true"){R="tap"}b(this).off(R).on(R,function(){if(b(this).hasClass("disable")){return}try{if(b(this).attr("id")){var ag=b(this).attr("id").substring(3,b(this).attr("id").length-5);var ah=b("#"+ag).attr("fileCount");var p=b("#"+ag).val();if(ah&&parseInt(ah)>0&&p){var h=p.split("@@@@").length;if(parseInt(ah)<=h){b.simpleAlert(上传文件总数不允许超过+parseInt(ah),"info");return}}}}catch(w){}b("#"+O).trigger("click");AWSFile.currentLoading_t=0;AWSFile.currentLoading_t_progress=1;return false})}if(!K){var X=E.cloudDCEnabled!=null?E.cloudDCEnabled:false;var af=E.cloudDCBut!=null?E.cloudDCBut:"";if(X){var aa=false;awsui.ajax.request({type:"POST",url:"./jd",dataType:"json",async:false,data:{sid:A,cmd:"CLIENT_FILE_IFSUPPORT_CLOUDDC"},success:function(e){aa=e.data.ifSupportCloudDC},error:function(e){}});if(aa){var ae=b(this).attr("class");var U=b(this).attr("id");var H=b(this).attr("style");var q=b(this).outerHeight();var l=E.fileDomId;var F=E.boId;var Q=E.boDefId;var y=b("#boDefName").length>0?b("#boDefName").val():"";var o=b("#taskInstId").val()==undefined?"":b("#taskInstId").val();var T=b("#processInstId").val()==undefined?"":b("#processInstId").val();if(b("#clouddc_"+U).length==0){if(af!=""){var N=b(af);N.attr("id","clouddc_"+U);b(N).insertAfter(b(this))}else{var N="<button type='button' id=\"clouddc_"+U+"\" class='"+ae+"'  style=\""+H+";height:"+q+'px; ">'+云文档+"</button>";b(N).insertAfter(b(this))}b("#clouddc_"+U).on("click",function(){var e=FrmDialog.open({title:云文档,width:800,height:500,id:"openclouddc",url:"./w?cmd=CLIENT_FILE_CLOUDDC_PULL_HOME_PAGE&sid="+A,data:{appId:E.appId,groupValue:C,fileValue:D,repositoryName:G,processInstId:T,taskInstId:o,boId:F,boItemName:l,boDefId:Q,boName:y},buttons:[{text:确认上传,cls:"blue",handler:function(){var h=b("#id-awsui-win-frm-2013-frmopenclouddc")[0];var p=h.contentWindow?h.contentWindow:(h.contentDocument.document?h.contentDocument.document:h.contentDocument);p.saveCloudDCFile(E,E.add,E.complete,E.done)}},{text:取消,handler:function(){FrmDialog.close()}}]})})}}}}}})(jQuery);var AWSFile={currentLoading_t:0,currentLoading_t_progress:1,sizelimit:0,addCallbackFn:function(b,i,p,n){var j=this;var l;var m=true;if(b){var c=b(l,i);if(c==false){m=false}}else{var f=p.fileDomId;if($("select[uid=securityLevelSelBo_"+f+"]").length>0){var a=$("select[uid=securityLevelSelBo_"+f+"]").val();var d=true;var o=true;try{if($("#formFileSecurityCheck").length>0){o=$("#formFileSecurityCheck").val()==="true"}else{o=parent.$("#formFileSecurityCheck").val()==="true"}}catch(l){}if(o){$.each(i.files,function(e,q){var r=q.name;if(a=="0"){if(r.indexOf("普通")<0||r.indexOf("秘密")>0||r.indexOf("机密")>0||r.indexOf("绝密")>0){d=false}}else{if(a=="1"){if(r.indexOf("秘密")<0||r.indexOf("普通")>0||r.indexOf("机密")>0||r.indexOf("绝密")>0){d=false}}else{if(a=="2"){if(r.indexOf("机密")<0||r.indexOf("秘密")>0||r.indexOf("普通")>0||r.indexOf("绝密")>0){d=false}}else{if(a=="3"){if(r.indexOf("绝密")<0||r.indexOf("秘密")>0||r.indexOf("机密")>0||r.indexOf("普通")>0){d=false}}}}}})}if(!d){$.simpleAlert("上传文件名必须包含所选密级信息且不允许包含其他密级信息","info",3000);return false}}if(p.numLimit!=0&&p.numLimit<n+i.originalFiles.length){$.simpleAlert(上传文件总数不允许超过+p.numLimit,"info");m=false}if(i.originalFiles.length>0){$.each(i.originalFiles,function(e,q){if(q.size>0){if(p.sizeLimit!=0&&p.sizeLimit<q.size){m=false;var r=j.formatSize(p.sizeLimit);r=r.replace(".00","");$.simpleAlert(文件大小不允许超过+r,"info",2000);return false}}else{m=false;$.simpleAlert(空文件不能上传,"info",2000);return false}})}var g="";if(p.filesToFilter){var k=p.filesToFilter[0][1];if(k){var h=k.split(";").join(",");g=h.replace(/\*/g,"")}}if(m){$.each(i.files,function(r,s){g=g.toLowerCase();if(g.length>0){var t=s.name.lastIndexOf(".");if(t==-1){m=false;$.simpleAlert(文件类型不正确,"info",2000);return false}var q=s.name.substring(t,s.name.length);q=q.toLowerCase();if((g+",").indexOf(q+",")==-1){m=false;$.simpleAlert(文件类型不正确,"info",2000);return false}}if(s.size>0){try{if(p.isShowProgress){AWSFile.upfileAddCallBackFun(s.name,s.type,s.size)}}catch(u){}}})}}return m},progressCallbackFn:function(a,c,b){var d;if(a){a(d,c)}else{$.each(c.files,function(f,g){try{if(b){AWSFile.upfileProgressCallBackFun(g.name,c.loaded,c.total)}}catch(h){}})}},doneCallbackFn:function(c,b,d){var f;if(c){c(f,d)}else{var a=$("#"+b.fileDomId).val();if(!a){a=""}var g=a.split("@@@@");$.each(d.files,function(h,i){if(b.saveFile){var k=i.name;try{k=d.result.data.data.attrs.fileName}catch(j){}a=a+"@@@@"+k;b.saveFile(k,i.size,b.fileDomId,b.boId,b.groupValue,b.fileValue,b.repositoryName)}});if(a.startWith("@@@@")){a=a.substring(4,a.length)}$("#"+b.fileDomId).val(a)}if(b.isShowProgress){}},completeCallbackFn:function(a){if(!($("#simplealert").length>0&&$("#simplealert").is(":visible"))){$.simpleAlert(上传成功,"ok",2000)}if(a){setTimeout(function(){$(".progress_wrap").animate({height:"0px"},"fast",function(){$(".dlg_hd .min").removeClass("min").addClass("max")})},"2000")}},initProgress:function(){if(!($("div").hasClass("dlg_hd"))){progressFile="";progressFile+='<div class="box">';progressFile+='<div class="dlg_hd"><font style="font-size:16px;">'+上传状态+'</font>  <h3><a href="javascript:void();" class="min zom"></a><a href="#" class="progress_close"></a></h3></div>';progressFile+='<div class="progress_wrap"><div class="progress_header clearfix">';progressFile+='<div class="progress_title">'+标题+'</div><div class="progress_size">'+大小+"</div>";progressFile+='<div class="progress_loaded">'+进度+'</div><div class="progress_content"></div></div></div></div>';$(progressFile).appendTo("body")}},upfileAddCallBackFun:function(a,c,b){AWSFile.currentLoading_t++;if($(".box").is(":visible")==false){$(".box").slideToggle("fast",function(){});$(".dlg_hd .zom").off("click").on("click",function(){if($(this).hasClass("min")){$(".progress_wrap").animate({height:"0px"},"fast",function(){$(".dlg_hd .min").removeClass("min").addClass("max")});return false}else{$(".progress_wrap").animate({height:"170px"},"fast",function(){$(".dlg_hd .max").removeClass("max").addClass("min")});return false}});$(".dlg_hd .progress_close").off("click").on("click",function(){AWSFile.currentLoading_t=0;AWSFile.currentLoading_t_progress=1;$(".box").hide();$(".progress_content").empty();return false});setTimeout(function(){$(".box").slideToggle("fast",function(){AWSFile.currentLoading_t=0;AWSFile.currentLoading_t_progress=1;$(".box").hide();$(".progress_content").empty()})},"3000")}else{$(".progress_wrap").animate({height:"170px"},"fast",function(){$(".dlg_hd .max").removeClass("max").addClass("min")})}if(AWSFile.currentLoading_t==1){$(".progress_content").empty()}var d=$("<div class='p_item' t="+AWSFile.currentLoading_t+"><div class='inner_mask'></div><div class='inner_result'><div class='ph_title'></div><div class='ph_size'></div><div class='ph_loaded'></div></div>");$(".progress_content").append(d);return true},upfileProgressCallBackFun:function(a,d,c){if(a!=""&&a!=null&&a!=undefined){var b=(d/c)*100;$(".p_item[t="+AWSFile.currentLoading_t_progress+"]").find(".ph_title").html(a);$(".p_item[t="+AWSFile.currentLoading_t_progress+"]").find(".ph_size").html(AWSFile.formatSize(c));$(".p_item[t="+AWSFile.currentLoading_t_progress+"]").find(".ph_loaded").html(Math.floor(b)+"%");$(".p_item[t="+AWSFile.currentLoading_t_progress+"]").find(".inner_mask").css("width",b+"%");if(d==c){AWSFile.currentLoading_t_progress++}}},formatSize:function formatSize(c){if(c=="0"){return"-"}c=parseFloat(c);var a=["B","KB","MB","GB","TB","PB","EB","ZB","YB","BB"];var d=1024;var b=0;while(true){if(c>=1024){c=parseFloat(c/d).toFixed(2);b++}else{break}}return c+a[b]},removeFile:function(c,d,f,b,e){var a=$("#isMobile").val();awsui.MessageBox.confirm(提示,确定要删除吗文件名+e,function(){AWSFile.removeFileAjax(c,d,f,b,e)})},removeFileAjax:function(c,d,f,a,e){var b=this;awsui.ajax.request({url:"./jd",method:"POST",alert:false,data:{sid:$("#sid").val(),cmd:"CLIENT_UI_FILE_ROVEME",uuId:c,appId:d,fileName:e,boDefId:f,boItemName:a},success:function(h){if(h.result=="ok"){$.simpleAlert(h.msg,h.result);$("#"+c).remove();var i=$("#"+a).val();var g="@@@@";if(i.indexOf(g)>-1){if(i.endWith(e)){i=i.replace(g+e,"")}else{i=i.replace(e+g,"")}}else{i=""}$("#"+a).val(i);if(b.removeComplete){b.removeComplete()}}else{$.simpleAlert(h.msg,h.result)}}})},addComment:function(c,d,b,a){if(!$("#"+d).parent().is("body")){$(document.body).append($("#"+d))}$("#"+d).popbox({target:$("#img_"+d),height:100});$("#"+b).off("blur").on("blur",function(){if(!a){var e=$(this).val();awsui.ajax.request({url:"./jd",method:"POST",data:{sid:$("#sid").val(),cmd:"CLIENT_UI_FILE_SAVE_COMMENT",uuId:c,remark:e},success:function(f){if(awsui.ajax.ok(f)){$("#"+b).val(e);var g=b.replace("remark_","img_pop");$("#"+g).attr("awsui-qtip",e);if(e==null||e.trim()==""){$("#"+g).find("img").css("opacity","0.5");$("#"+g).find("img").css("filter","alpha(opacity=50)")}else{$("#"+g).find("img").css("opacity","1.0");$("#"+g).find("img").css("filter","alpha(opacity=100)")}}}})}})},officeFilePreview:function(c,h,d,k,m,i,e,f,j,l){if(e=="1"){this.officeFileEdit(c,h,d,k,m,i,e,f,j,l);return}var a="";var b=$("#sid").val();var g={appId:m,repositoryName:k,groupValue:JSON.stringify(d),fileValue:i,fileName:h,editType:e,copyType:f,printType:j,localType:l,showHandToolbar:0,sid:$("#sid").val(),cmd:"CLIENT_UI_FILE_PREVIEW_FILE",documentHeight:"95%"};$.simpleAlert("文件预览后台处理中...","info",800);awsui.ajax.request({type:"POST",url:"./jd",dataType:"json",alert:false,data:g,err:function(n){$.simpleAlert("close");$.simpleAlert(n.msg,n.result,2000)},ok:function(o){$.simpleAlert("close");if(o.result=="ok"){try{if(awsWebview.isMobileAWSApp()){var n=new String(document.location);n=n.substring(0,n.indexOf("r/w"));awsWebview.openWebview(n+"r/w"+o.data.url.replace("./w",""))}else{var q=window.open(o.data.url);if($.browser.isMobile&&$.browser.isSafari){if(q==null){window.location.href=o.data.url}}}}catch(p){var q=window.open(o.data.url);if($.browser.isMobile&&$.browser.isSafari){if(q==null){window.location.href=o.data.url}}}}else{$.simpleAlert(o.msg,o.result,2000)}}})},officeFileEdit:function(c,h,d,k,m,i,e,f,j,l){var a="";var b=$("#sid").val();var g={downloadUrl:c,appId:m,repositoryName:k,groupValue:JSON.stringify(d),fileValue:i,fileName:h,editType:e,copyType:f,printType:j,localType:l,showHandToolbar:0,documentHeight:"95%"};a="./w?sid="+b+"&cmd=com.actionsoft.apps.formui.iweboffice_view_online&"+$.param(g);window.open(a)},addWaterMark:function(d,l,i,c,f,j,k,g,h){if(!h){var b=$("#sid").val();var e={sid:b,uuId:d,appId:l,fileName:f,boDefId:i,boItemName:c,waterMarkFontColor:j,waterMarkPosition:k,waterMarkFontSize:g};var a="./jd?cmd=CLIENT_UI_FILE_ADD_WATERMARK";awsui.ajax.post(a,e,function(n){if(n.result=="ok"){var m=n.data["pictureLogoThumDownLoadUrl"];if(m!=""){$("#img_"+d).attr("src",m+"&v="+new Date().getTime());$("#preview_a_"+d).attr("href",m);$($($("#"+d).children()[0]).children().children()[1]).attr("href",m);if($("#isMobile").val()!="true"){$("a[rel=fancyboxgrouppreview]").fancybox({transitionIn:"none",transitionOut:"none",titlePosition:"over",showNavArrows:"true"});$.simpleAlert(水印添加成功,"ok")}}}else{$.simpleAlert(n.msg,n.result)}},"json")}else{}},compressFile:function(d,j,i,b,g,h){if(!h){var e=$("#compresswidth_"+d).val();var c=$("#sid").val();var f={sid:c,uuId:d,appId:j,fileName:g,boDefId:i,boItemName:b,compressWidth:e};var a="./jd?cmd=CLIENT_UI_FILE_COMPRESS_FILE";awsui.ajax.post(a,f,function(l){if(l.result=="ok"){var k=l.data["pictureLogoThumDownLoadUrl"];$("#img_"+d).attr("src",k+"&v="+new Date().getTime());$("#preview_a_"+d).attr("href",k);if($("#isMobile").val()!="true"){$("a[rel=fancyboxgrouppreview]").fancybox({transitionIn:"none",transitionOut:"none",titlePosition:"over",showNavArrows:"true"});$.simpleAlert(图片压缩成功,"info")}}else{$.simpleAlert(l.msg,l.result)}},"json")}else{}},fileAuth:function(b){var a="./w?sid="+$("#sid").val()+"&cmd=CLIENT_COMMON_AC_ACTION_OPEN&resourceId="+b+"&resourceType=portal.uifile";FrmDialog.open({title:"AC授权",width:750,height:400,url:a,id:"addFileAC",buttons:[{text:"添加",cls:"blue",handler:function(){FrmDialog.win().saveAC()}},{text:"关闭",handler:function(){FrmDialog.close()}}]})},getFileSuffixIcon:function(g){try{g=g.toLowerCase()}catch(f){}var d=g.substring(g.lastIndexOf(".")+1);var c=["ai","apk","avi","bmp","chm","css","dmg","doc","exe","file","gif","html","icon","ics","ie","ipa","jpg","js","key","mov","mp3","mp4","mpg","normal","outlook","pdf","php","png","ppt","psd","rar","torrent","txt","visio","vsd","xls","xml","zip"];if($.inArray(d,c)>-1){return"../commons/img/fileSuffix/"+d+".png"}var a=[["word","rtf","docx","wps"],["xls","xlt","xlw","xlsx","et"],["html","htm"],["jpg","pcx","jpeg"],["ppt","pot","dps","pps","pptx","potx","ppsx"],["zip","tar","jar","gz"],["txt","logging","ini"],["avi","mpeg","mpg","ra","rm","rmvb","mov","qt","asf","wmv","swf"],["access","mdb","accdb"],["xml","xsd"]];for(var b in a){if($.inArray(d,a[b])>-1){return"../commons/img/fileSuffix/"+a[b][0]+".png"}}return"../commons/img/fileSuffix/unknown.png"},getFilesHtml:function(a){if(a==null||$.trim(a)==""){return""}var c=a.split(/@@@@|,/);for(var b=0;b<c.length;b++){c[b]='<img border="0" width="15" src="'+this.getFileSuffixIcon(c[b])+'" align="absmiddle">'+c[b]}return c.join(",")},checkCallback:function(b,a){if($("#awsuiFile_"+a).length>0&&$("#awsuiFile_"+a).find("input[group=fileAll_"+a+"]").length==1){$("#download_btn_"+a).hide()}else{if($("#file_tab").length>0&&$("#file_tab").find("input[group=fileAll_"+a+"]").length==1){$("#download_btn_"+a).hide()}else{if($(b).prop("checked")){$("#download_btn_"+a).show()}else{if($("#awsuiFile_"+a).length>0&&$("#awsuiFile_"+a).find("input[group=fileAll_"+a+"]:checked").length>0){$("#download_btn_"+a).show()}else{if($("#file_tab").length>0&&$("#file_tab").find("input[group=fileAll_"+a+"]:checked").length>0){$("#download_btn_"+a).show()}else{$("#download_btn_"+a).hide()}}}}}}};function confirmDialog(c,b,e){var d="popupDialog";$('<div data-role="popup" id="'+d+'" data-confirmed="no" data-transition="pop" data-overlay-theme="a" data-theme="a" data-dismissible="false" style="max-width:500px;"> <div data-role="header" data-theme="a"><h1>'+c+'</h1></div><div role="main" class="ui-content"><h3 class="ui-title">'+c+"</h3>"+b+'<br><a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b optionConfirm" data-rel="back">Yes</a><a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b optionCancel" data-rel="back" data-transition="flow">No</a></div></div>').appendTo($.mobile.pageContainer);var a=$("#"+d);a.trigger("create");a.popup({afterclose:function(g,h){a.find(".optionConfirm").first().off("click");var f=a.attr("data-confirmed")==="yes"?true:false;$(g.target).remove();if(f&&e){e()}}});a.popup("open");a.find(".optionConfirm").first().on("click",function(){a.attr("data-confirmed","yes")})}
/*!
 * =====================================================
 * Switchery
 * iOS 7 style switches for your checkboxes
 * http://abpetkov.github.io/switchery/
 * =====================================================
 */
(function(){function b(a){var d=b.modules[a];if(!d){throw new Error('failed to require "'+a+'"')}if(!("exports" in d)&&typeof d.definition==="function"){d.client=d.component=true;d.definition.call(this,d.exports={},d);delete d.definition}return d.exports}b.loader="component";b.helper={};b.helper.semVerSort=function(m,n){var s=m.version.split(".");var p=n.version.split(".");for(var q=0;q<s.length;++q){var r=parseInt(s[q],10);var a=parseInt(p[q],10);if(r===a){var i=s[q].substr((""+r).length);var o=p[q].substr((""+a).length);if(i===""&&o!==""){return 1}if(i!==""&&o===""){return -1}if(i!==""&&o!==""){return i>o?1:-1}continue}else{if(r>a){return 1}else{return -1}}}return 0};b.latest=function(w,i){function t(c){throw new Error('failed to find latest module of "'+c+'"')}var x=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/;var a=/(.*)~(.*)/;if(!a.test(w)){t(w)}var s=Object.keys(b.modules);var q=[];var u=[];for(var r=0;r<s.length;r++){var y=s[r];if(new RegExp(w+"@").test(y)){var p=y.substr(w.length+1);var z=x.exec(y);if(z!=null){q.push({version:p,name:y})}else{u.push({version:p,name:y})}}}if(q.concat(u).length===0){t(w)}if(q.length>0){var v=q.sort(b.helper.semVerSort).pop().name;if(i===true){return v}return b(v)}var v=u.pop().name;if(i===true){return v}return b(v)};b.modules={};b.register=function(a,d){b.modules[a]={definition:d}};b.define=function(d,a){b.modules[d]={exports:a}};b.register("abpetkov~transitionize@0.0.3",function(a,f){f.exports=e;function e(d,c){if(!(this instanceof e)){return new e(d,c)}this.element=d;this.props=c||{};this.init()}e.prototype.isSafari=function(){return(/Safari/).test(navigator.userAgent)&&(/Apple Computer/).test(navigator.vendor)};e.prototype.init=function(){var c=[];for(var d in this.props){c.push(d+" "+this.props[d])}this.element.style.transition=c.join(", ");if(this.isSafari()){this.element.style.webkitTransition=c.join(", ")}}});b.register("ftlabs~fastclick@v0.6.11",function(a,f){function e(d){var c,h=this;this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=10;this.layer=d;if(!d||!d.nodeType){throw new TypeError("Layer must be a document node")}this.onClick=function(){return e.prototype.onClick.apply(h,arguments)};this.onMouse=function(){return e.prototype.onMouse.apply(h,arguments)};this.onTouchStart=function(){return e.prototype.onTouchStart.apply(h,arguments)};this.onTouchMove=function(){return e.prototype.onTouchMove.apply(h,arguments)};this.onTouchEnd=function(){return e.prototype.onTouchEnd.apply(h,arguments)};this.onTouchCancel=function(){return e.prototype.onTouchCancel.apply(h,arguments)};if(e.notNeeded(d)){return}if(this.deviceIsAndroid){d.addEventListener("mouseover",this.onMouse,true);d.addEventListener("mousedown",this.onMouse,true);d.addEventListener("mouseup",this.onMouse,true)}d.addEventListener("click",this.onClick,true);d.addEventListener("touchstart",this.onTouchStart,false);d.addEventListener("touchmove",this.onTouchMove,false);d.addEventListener("touchend",this.onTouchEnd,false);d.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){d.removeEventListener=function(m,g,n){var l=Node.prototype.removeEventListener;if(m==="click"){l.call(d,m,g.hijacked||g,n)}else{l.call(d,m,g,n)}};d.addEventListener=function(l,g,m){var n=Node.prototype.addEventListener;if(l==="click"){n.call(d,l,g.hijacked||(g.hijacked=function(i){if(!i.propagationStopped){g(i)}}),m)}else{n.call(d,l,g,m)}}}if(typeof d.onclick==="function"){c=d.onclick;d.addEventListener("click",function(g){c(g)},false);d.onclick=null}}e.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0;e.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent);e.prototype.deviceIsIOS4=e.prototype.deviceIsIOS&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);e.prototype.deviceIsIOSWithBadTarget=e.prototype.deviceIsIOS&&(/OS ([6-9]|\d{2})_\d/).test(navigator.userAgent);e.prototype.needsClick=function(c){switch(c.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(c.disabled){return true}break;case"input":if((this.deviceIsIOS&&c.type==="file")||c.disabled){return true}break;case"label":case"video":return true}return(/\bneedsclick\b/).test(c.className)};e.prototype.needsFocus=function(c){switch(c.nodeName.toLowerCase()){case"textarea":return true;case"select":return !this.deviceIsAndroid;case"input":switch(c.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return !c.disabled&&!c.readOnly;default:return(/\bneedsfocus\b/).test(c.className)}};e.prototype.sendClick=function(i,d){var j,c;if(document.activeElement&&document.activeElement!==i){document.activeElement.blur()}c=d.changedTouches[0];j=document.createEvent("MouseEvents");j.initMouseEvent(this.determineEventType(i),true,true,window,1,c.screenX,c.screenY,c.clientX,c.clientY,false,false,false,false,0,null);j.forwardedTouchEvent=true;i.dispatchEvent(j)};e.prototype.determineEventType=function(c){if(this.deviceIsAndroid&&c.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};e.prototype.focus=function(d){var c;if(this.deviceIsIOS&&d.setSelectionRange&&d.type.indexOf("date")!==0&&d.type!=="time"){c=d.value.length;d.setSelectionRange(c,c)}else{d.focus()}};e.prototype.updateScrollParent=function(d){var c,h;c=d.fastClickScrollParent;if(!c||!c.contains(d)){h=d;do{if(h.scrollHeight>h.offsetHeight){c=h;d.fastClickScrollParent=h;break}h=h.parentElement}while(h)}if(c){c.fastClickLastScrollTop=c.scrollTop}};e.prototype.getTargetElementFromEventTarget=function(c){if(c.nodeType===Node.TEXT_NODE){return c.parentNode}return c};e.prototype.onTouchStart=function(d){var j,c,i;if(d.targetTouches.length>1){return true}j=this.getTargetElementFromEventTarget(d.target);c=d.targetTouches[0];if(this.deviceIsIOS){i=window.getSelection();if(i.rangeCount&&!i.isCollapsed){return true}if(!this.deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier){d.preventDefault();return false}this.lastTouchIdentifier=c.identifier;this.updateScrollParent(j)}}this.trackingClick=true;this.trackingClickStart=d.timeStamp;this.targetElement=j;this.touchStartX=c.pageX;this.touchStartY=c.pageY;if((d.timeStamp-this.lastClickTime)<200){d.preventDefault()}return true};e.prototype.touchHasMoved=function(h){var c=h.changedTouches[0],d=this.touchBoundary;if(Math.abs(c.pageX-this.touchStartX)>d||Math.abs(c.pageY-this.touchStartY)>d){return true}return false};e.prototype.onTouchMove=function(c){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(c.target)||this.touchHasMoved(c)){this.trackingClick=false;this.targetElement=null}return true};e.prototype.findControl=function(c){if(c.control!==undefined){return c.control}if(c.htmlFor){return document.getElementById(c.htmlFor)}return c.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};e.prototype.onTouchEnd=function(n){var l,m,o,c,d,p=this.targetElement;if(!this.trackingClick){return true}if((n.timeStamp-this.lastClickTime)<200){this.cancelNextClick=true;return true}this.cancelNextClick=false;this.lastClickTime=n.timeStamp;m=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(this.deviceIsIOSWithBadTarget){d=n.changedTouches[0];p=document.elementFromPoint(d.pageX-window.pageXOffset,d.pageY-window.pageYOffset)||p;p.fastClickScrollParent=this.targetElement.fastClickScrollParent}o=p.tagName.toLowerCase();if(o==="label"){l=this.findControl(p);if(l){this.focus(p);if(this.deviceIsAndroid){return false}p=l}}else{if(this.needsFocus(p)){if((n.timeStamp-m)>100||(this.deviceIsIOS&&window.top!==window&&o==="input")){this.targetElement=null;return false}this.focus(p);if(!this.deviceIsIOS4||o!=="select"){this.targetElement=null;n.preventDefault()}return false}}if(this.deviceIsIOS&&!this.deviceIsIOS4){c=p.fastClickScrollParent;if(c&&c.fastClickLastScrollTop!==c.scrollTop){return true}}if(!this.needsClick(p)){n.preventDefault();this.sendClick(p,n)}return false};e.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};e.prototype.onMouse=function(c){if(!this.targetElement){return true}if(c.forwardedTouchEvent){return true}if(!c.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(c.stopImmediatePropagation){c.stopImmediatePropagation()}else{c.propagationStopped=true}c.stopPropagation();c.preventDefault();return false}return true};e.prototype.onClick=function(d){var c;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(d.target.type==="submit"&&d.detail===0){return true}c=this.onMouse(d);if(!c){this.targetElement=null}return c};e.prototype.destroy=function(){var c=this.layer;if(this.deviceIsAndroid){c.removeEventListener("mouseover",this.onMouse,true);c.removeEventListener("mousedown",this.onMouse,true);c.removeEventListener("mouseup",this.onMouse,true)}c.removeEventListener("click",this.onClick,true);c.removeEventListener("touchstart",this.onTouchStart,false);c.removeEventListener("touchmove",this.onTouchMove,false);c.removeEventListener("touchend",this.onTouchEnd,false);c.removeEventListener("touchcancel",this.onTouchCancel,false)};e.notNeeded=function(d){var h;var c;if(typeof window.ontouchstart==="undefined"){return true}c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(c){if(e.prototype.deviceIsAndroid){h=document.querySelector("meta[name=viewport]");if(h){if(h.content.indexOf("user-scalable=no")!==-1){return true}if(c>31&&window.innerWidth<=window.screen.width){return true}}}else{return true}}if(d.style.msTouchAction==="none"){return true}return false};e.attach=function(c){return new e(c)};if(typeof define!=="undefined"&&define.amd){define(function(){return e})}else{if(typeof f!=="undefined"&&f.exports){f.exports=e.attach;f.exports.FastClick=e}else{window.FastClick=e}}});b.register("component~indexof@0.0.3",function(a,d){d.exports=function(h,c){if(h.indexOf){return h.indexOf(c)}for(var g=0;g<h.length;++g){if(h[g]===c){return g}}return -1}});b.register("component~classes@1.2.1",function(a,k){var l=b("component~indexof@0.0.3");var j=/\s+/;var i=Object.prototype.toString;k.exports=function(c){return new h(c)};function h(c){if(!c){throw new Error("A DOM element reference is required")}this.el=c;this.list=c.classList}h.prototype.add=function(d){if(this.list){this.list.add(d);return this}var e=this.array();var c=l(e,d);if(!~c){e.push(d)}this.el.className=e.join(" ");return this};h.prototype.remove=function(d){if("[object RegExp]"==i.call(d)){return this.removeMatching(d)}if(this.list){this.list.remove(d);return this}var e=this.array();var c=l(e,d);if(~c){e.splice(c,1)}this.el.className=e.join(" ");return this};h.prototype.removeMatching=function(c){var e=this.array();for(var d=0;d<e.length;d++){if(c.test(e[d])){this.remove(e[d])}}return this};h.prototype.toggle=function(d,c){if(this.list){if("undefined"!==typeof c){if(c!==this.list.toggle(d,c)){this.list.toggle(d)}}else{this.list.toggle(d)}return this}if("undefined"!==typeof c){if(!c){this.remove(d)}else{this.add(d)}}else{if(this.has(d)){this.remove(d)}else{this.add(d)}}return this};h.prototype.array=function(){var c=this.el.className.replace(/^\s+|\s+$/g,"");var d=c.split(j);if(""===d[0]){d.shift()}return d};h.prototype.has=h.prototype.contains=function(c){return this.list?this.list.contains(c):!!~l(this.array(),c)}});b.register("switchery",function(m,k){var n=b("abpetkov~transitionize@0.0.3"),a=b("ftlabs~fastclick@v0.6.11"),l=b("component~classes@1.2.1");k.exports=i;var j={showtextflag:true,color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#ffffff",onColor:"#ffffff",offColor:"#000000",className:"switchery",disabled:false,disabledOpacity:0.5,speed:"0.4s",size:"default",ontext:"开",offtext:"关",swwidth:80,swheight:30,fontSize:13};function i(c,e){if(!(this instanceof i)){return new i(c,e)}this.element=c;this.options=e||{};for(var d in j){if(this.options[d]==null){this.options[d]=j[d]}}if(this.element!=null&&this.element.type=="checkbox"){this.init()}}i.prototype.hide=function(){this.element.style.display="none"};i.prototype.show=function(){var c=this.create();this.insertAfter(this.element,c)};i.prototype.create=function(){this.switcher=document.createElement("span");this.jack=document.createElement("small");this.switchtext=document.createElement("span");this.switcher.appendChild(this.jack);this.switcher.appendChild(this.switchtext);this.switcher.className=this.options.className;return this.switcher};i.prototype.insertAfter=function(d,c){d.parentNode.insertBefore(c,d.nextSibling)};i.prototype.isChecked=function(){return this.element.checked};i.prototype.changeStatus=function(c){this.element.checked=c;this.setPosition()};i.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled||this.element.readOnly};i.prototype.setPosition=function(e){var s=this.options.showtextflag;var h=this.options.ontext;var g=this.options.offtext;var c=this.isChecked(),f=this.switcher,r=this.jack;switchtext=this.switchtext;if(e&&c){c=false}else{if(e&&!c){c=true}}if(c===true){this.element.checked=true;if(window.getComputedStyle){r.style.left=parseInt(window.getComputedStyle(f).width)-parseInt(window.getComputedStyle(r).width)+"px"}else{r.style.left=parseInt(f.currentStyle.width)-parseInt(r.currentStyle.width)+"px"}if(s==true){if(hasClass(r.nextSibling,"right")){removeClass(r.nextSibling,"right")}if(!hasClass(r.nextSibling,"left")){addClass(r.nextSibling,"left")}this.jack.nextSibling.innerHTML=h;var t=this.options.onColor;if(t!=""){$(switchtext).css("color",t)}}if(this.options.color){this.colorize()}this.setSpeed()}else{r.style.left=0;this.element.checked=false;this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor;this.switcher.style.borderColor=this.options.secondaryColor;this.switcher.style.backgroundColor=(this.options.secondaryColor!==j.secondaryColor)?this.options.secondaryColor:"#fff";this.jack.style.backgroundColor=this.options.jackColor;this.setSpeed();if(s==true){if(hasClass(r.nextSibling,"left")){removeClass(r.nextSibling,"left")}if(!hasClass(r.nextSibling,"right")){addClass(r.nextSibling,"right")}this.jack.nextSibling.innerHTML=g;var d=this.options.offColor;if(d!=""){$(switchtext).css("color",d)}}}};i.prototype.setSpeed=function(){var c={},d={left:this.options.speed.replace(/[a-z]/,"")/2+"s"};if(this.isChecked()){c={border:this.options.speed,"box-shadow":this.options.speed,"background-color":this.options.speed.replace(/[a-z]/,"")*3+"s"}}else{c={border:this.options.speed,"box-shadow":this.options.speed}}n(this.switcher,c);n(this.jack,d)};i.prototype.setText=function(){var c=this.options.ontext;var d=this.options.offtext};i.prototype.setSize=function(){var d=this.switcher,g=this.jack;switchtext=this.switchtext;var c=this.options.fontSize;if(c==undefined){c=13}$(switchtext).css("font-size",c+"px");var f=this.options.swwidth;if(f==undefined){f=20}var e=this.options.swheight;if(e==undefined){e=60}$(d).css("width",f+"px");$(d).css("height",e+"px");$(g).css("width",e+"px");$(g).css("height",e+"px");$(switchtext).css("height",e+"px");$(switchtext).css("line-height",e+"px")};i.prototype.colorize=function(){var c=this.switcher.offsetHeight/2;this.switcher.style.backgroundColor=this.options.color;this.switcher.style.borderColor=this.options.color;this.switcher.style.boxShadow="inset 0 0 0 "+c+"px "+this.options.color;this.jack.style.backgroundColor=this.options.jackColor};i.prototype.handleOnchange=function(d,c){if(document.dispatchEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",true,true);$(this.element).data("upperStrataEvent",c);this.element.dispatchEvent(e)}else{this.element.fireEvent("onchange")}};i.prototype.handleChange=function(){var d=this,c=this.element;if(c.addEventListener){c.addEventListener("change",function(){d.setPosition()})}else{c.attachEvent("onchange",function(){d.setPosition()})}};i.prototype.handleClick=function(){var f=this,c=this.switcher,d=f.element.parentNode.tagName.toLowerCase(),e=(d==="label")?false:true;if(this.isDisabled()===false){a(c);if(c.addEventListener){var g=$("#isMobile").val();var h="click";if(g=="true"){h="tap"}c.addEventListener(h,function(p){if(f.options.disabled==true){return}f.setPosition(e);f.handleOnchange(f.element.checked,p)})}else{c.attachEvent("onclick",function(){if(f.options.disabled==true){return}f.setPosition(e);f.handleOnchange(f.element.checked)})}}else{this.element.disabled=true;this.switcher.style.opacity=this.options.disabledOpacity;this.switcher.style.cursor="default"}};i.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",true)};i.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")};i.prototype.init=function(){this.hide();this.show();this.setSize();this.setPosition();this.markAsSwitched();this.handleChange();this.handleClick()};i.prototype.isChecked=function(){return this.element.checked};i.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled||this.element.readOnly};i.prototype.destroy=function(){this.events.unbind()};i.prototype.enable=function(){if(!this.options.disabled){return}if(this.options.disabled){this.options.disabled=false}if(this.element.disabled){this.element.disabled=false}if(this.element.readOnly){this.element.readOnly=false}this.switcher.style.opacity=1};i.prototype.disable=function(){if(this.options.disabled){return}if(!this.options.disabled){this.options.disabled=true}if(!this.element.disabled){this.element.disabled=true}if(!this.element.readOnly){this.element.readOnly=true}this.switcher.style.opacity=this.options.disabledOpacity}});if(typeof exports=="object"){module.exports=b("switchery")}else{if(typeof define=="function"&&define.amd){define("Switchery",[],function(){return b("switchery")})}else{(this||window)["Switchery"]=b("switchery")}}})();function hasClass(c,d){return c.className.match(new RegExp("(\\s|^)"+d+"(\\s|$)"))}function addClass(c,d){if(!this.hasClass(c,d)){c.className+=" "+d}}function removeClass(f,e){if(hasClass(f,e)){var d=new RegExp("(\\s|^)"+e+"(\\s|$)");f.className=f.className.replace(d," ")}}function toggleClass(c,d){if(hasClass(c,d)){removeClass(c,d)}else{addClass(c,d)}}
/*!
 * =====================================================
 * AWS地址簿运行时库文件
 * v1.0 (http://www.actionsoft.com.cn)
 * 发布后文件名：aws.address.js
 * =====================================================
 */
(function(a){a.fn.address=function(h){var r={callback:null,beforeCancel:null,filter:{addressType:"user",isAdvMode:true,isAddTeam:false,addressSetting:{title:人员,rootDetpId:"",isDisplayMap:true,isMapFormat:true,mapSuffix:"($dept $role)",isDisplayOtherMap:false,layerFrom:"",layerTo:"",range:"department|role|team",delimiter:" ",choiceType:"single",leafType:"user",filterClass:""},sourceField:"",targetField:"",deptSourceField:"",deptTargetField:""},valueType:0,separator:" ",inDialog:false,dialogId:"",isGrid:false,gridId:"",gridRowIndx:0,isClearData:true,isLiveSearch:true,allowAnyValue:false,maxRowNumber:0,clearCallback:null};var b=r;if(h){b=a.extend(true,r,h)}if(h==undefined||h.filter==undefined){var w={separator:" ",filter:{addressType:"user",isAdvMode:false},allowAnyValue:false,isLiveSearch:true};b=a.extend(w,h)}else{if(b.filter.sourceField==""){if(b.filter.deptSourceField){b.filter.sourceField=b.filter.deptSourceField;b.filter.targetField=b.filter.deptTargetField}else{if(h.valueType){if(h.valueType==0){b.filter.sourceField="USERNAMEALIAS"}else{if(h.valueType==1){b.filter.sourceField="UID"}else{if(h.valueType==2){b.filter.sourceField="USERNAME"}}}}}}if(h.separator){b.filter.addressSetting.delimiter=h.separator}else{b.separator=b.filter.addressSetting.delimiter}}if(b.filter&&b.filter.addressSetting&&b.filter.addressSetting.rootDeptId!=undefined){b.filter.addressSetting.rootDetpId=b.filter.addressSetting.rootDeptId}var u=a(this);if(!b.isAddTeam){if(a("#addTeamDlg")){a("#addTeamDlg").hide()}}if(b.filter.addressType=="dept"){b.address=getTargetValue(a(this).attr("name"),b);b.value=u.val()}else{if(b.filter.addressType=="user"&&b.filter.isAdvMode){b.value=u.val()}}var s;if(b.filter.targetField){s=b.filter.targetField.replace(/,/g,"|")}else{if(b.filter.deptTargetField){s=b.filter.deptTargetField.replace(/,/g,"|")}}b.isClearData=u.hasClass("disable")?false:b.isClearData;b.boItemName=u.attr("id");var l="";if(a("#sid").length>0){l=a("#sid").val()}else{if(a("input[name=sid]").length>0){l=a("input[name=sid]").val()}}var j="_bpm.portal";if(a("#appId").length>0){j=a("#appId").val()}if(l==""||l==undefined){return}var C=地址簿;var y=false;try{y=a("#isMobile").val()=="true"?true:false}catch(E){}var D=a.escapeSelector(u.attr("id"));if(a("#awsui-address-"+D).length==1){return}if(u.prop("readonly")){b.isLiveSearch=false}if(D.indexOf("Address_")>-1){b.gridId=h.gridId;b.gridRowIndx=h.gridRowIndx;b.isGrid=true}var C=人员;if(b.filter&&b.filter.addressSetting&&b.filter.addressSetting.leafType=="dept"){C=部门}else{if(b.filter&&b.filter.addressSetting&&b.filter.addressSetting.leafType=="team"){C=群组}}var k=function(e){a("#"+a.escapeSelector(e)).trigger("blur.casecade_"+e)};window.deleteItem=function(O){var e=a(O).parent();var p=e.parent();if(p.find(".awsui-address-btn").hasClass("disable")){return}var P=a.escapeSelector(p.find("input").attr("id"));var M=e.attr("value")||e.attr("id");var N=a("#"+P).val();var R=p.attr("delimiter")||" ";var Q=N.split(R);for(var t=0;t<Q.length;t++){if(Q[t]==M){Q.splice(t,1);break}}p.find("input").val(Q.join(R));e.remove();if(b.clearCallback&&p.find(".awsui-item").length==0){b.clearCallback()}H();k(P)};var B="";var v=u.attr("title")?("title='"+u.attr("title")+"'"):"";var z=u.outerWidth();var d=a("<div id='awsui-address-"+u.attr("id")+"' "+v+" "+B+" delimiter='"+b.separator+"' style='position:relative' class='awsui-address'></div>");var J=a("<div class='awsui-iconfont awsui-address-btn' style='position:relative;right:0px;z-index:4'>&#59008;</div>");var L=a("<div class='awsui-iconfont awsui-address-del' style='position:absolute;right:20px;z-index:5'>&#58927;</div>");var x=u.attr("placeholder")?u.attr("placeholder"):"";var o=a("<div id='awsui-placeholder-"+u.attr("id")+"' style='overflow:hidden;color: #CCC;font-size: 13px;display:none;height:24px;line-height:25px;'>"+x+"</div>");if(!y){L.attr("title",全部删除)}d.append(J);d.append(L);d.append(o);var H=function(){if(a("#"+D).val()==""){a("#awsui-placeholder-"+D).show()}else{a("#awsui-placeholder-"+D).hide()}};if(a("#"+D).val()==""){o.show()}if(b.maxRowNumber>0){d.addClass("fixed-h").css("max-height",b.maxRowNumber*24+"px")}if(b.isGrid){d.addClass("grid");J.addClass("grid")}u.before(d);d.prepend(u);if(y){z=d.width()}d.outerWidth(z);o.outerWidth(z-38);if(d.parent().hasClass("required")&&a.browser.isFirefox){d.parent().css("display","block")}u.hide();var q=function(){H();var e=a("#"+D).val()||"";if(e==""){d.find(".awsui-item").remove();return}var p={};if(b.isGrid){p=a("#"+b.gridId).awsGrid("getRowData",b.gridRowIndx)}else{if(window.AWSForm){p=AWSForm.getFormData()}}awsui.ajax.request({type:"POST",url:"./jd",async:false,data:{sid:l,cmd:"CLIENT_AWSUI_ADDRESS_VALUE",address:awsui.encode(b),addressDomId:D,value:e,formData:awsui.encode(p)},ok:function(t){d.find(".awsui-item").remove();d.append(a(t.data.data));d.find(".awsui-item-del").removeAttr("onclick").off("click").on("click",function(){deleteItem(a(this));return false});d.find(".awsui-item").off("click").on("click",function(){event.stopPropagation()});if(y=="true"){if(d.find(".awsui-item").length>0){L.show()}d.find(".awsui-item").each(function(){var M=z-35;if(a(this).find(".awsui-item-icon").length>0){M=z-52}a(this).find(".awsui-item-t").css("max-width",M+"px")})}},err:function(t){}})};q();var i=u.parents("form");if(i.length>0){i.on("reset",function(){setTimeout(function(){q()},10)})}u.off("change.render").on("change.render",function(){q()});if(u.prop("disabled")){J.addClass("disable");return}if(!y){d.on("mouseover",function(){if(d.find(".awsui-item").length>0){if(!u.prop("disabled")){L.show()}}});d.on("mouseleave",function(){L.hide()})}L.off("click").on("click",function(){L.hide();var N=a(this).parent();N.find("input").val("");q();if(b.clearCallback){b.clearCallback()}if(s){var t=s.split("|");if(b.isGrid){N.find(".awsui-item").remove();var e=a("#"+b.gridId).awsGrid("getRowData",b.gridRowIndx);for(var p=0;p<t.length;p++){var M=t[p];e[M]="";if(e.hasOwnProperty(M+"_DISPLAYVALUE")){e[M+"_DISPLAYVALUE"]=""}a("#"+b.gridId).awsGrid("setEditData",e)}a("#"+b.gridId).awsGrid("refresh")}else{for(var p=0;p<t.length;p++){var M=t[p];window.ui?ui(M,""):a("#"+M).val("");a("#"+M).trigger("change")}}}H();k(D);return false});if(y){J.off("click").on("click",function(){var O={};a.extend(true,O,b);try{var p=b.filter.addressSetting.rootDetpId;if(/^\$.*/g.test(p)){var M="";M=a("#"+p.replace("$","")).val();b.filter.addressSetting.rootDetpId=M}}catch(N){}var t="./w?sid="+l+"&cmd=CLIENT_UI_ADDRESSBOOK&appId"+j+"&address="+encodeURI(b);try{openMobileDialog("address",D,b.filter)}catch(N){}b=O})}else{var F=function(){var P=600;var p=450;if(b.inDialog==false){P=a(window).width()-50;p=a(window).height()-50}if(P>615){P=615}if(p>450){p=450}var M=FrmDialog;if(b.inDialog){M=parent.FrmDialog}var O={};if(b.isGrid){O=a("#"+b.gridId).awsGrid("getRowData",b.gridRowIndx)}else{if(window.AWSForm){O=AWSForm.getFormData()}}var R={};a.extend(true,R,b);try{var t=b.filter.addressSetting.rootDetpId;if(t.indexOf("$")==0){t=t.substring(1,t.length);t=O[t];R.filter.addressSetting.rootDetpId=t}if(b.inDialog&&window.name=="dialog_toolbar_action_page_frame"){parent.$("#dialog_toolbar_action .dlg-button button").attr("disabled","true")}}catch(N){}var Q=M.open({id:"address_dialog",title:C,width:P,height:p,url:"./w",data:{sid:l,cmd:"CLIENT_AWSUI_ADDRESSBOOK",appId:a("#appId").val(),address:awsui.encode(R),addressDomId:D,value:a("#"+D).val(),formData:awsui.encode(O)},buttons:[{text:确定,id:"address_dialog_button_confirm",cls:"blue",handler:function(){var U="";var V=Q.win();var T=V.getValue();var S=T.value;var e=T.showValue;var W=T.gridValue;d.find(".awsui-item").remove();d.append(a(e));d.find(".awsui-item-del").removeAttr("onclick").off("click").on("click",function(){deleteItem(a(this));return false});a.each(S,function(Y,Z){if(b.isGrid){if(Y.startsWith("Address_")){Y=Y.substring("Address_".length)}a("#Address_"+a.escapeSelector(Y)).val(Z);if(b.gridId){var X=a("#"+a.escapeSelector(b.gridId)).awsGrid("getRowData",b.gridRowIndx);X[Y]=Z;if("ADDRESS_"+Y==D&&X.hasOwnProperty(Y+"_DISPLAYVALUE")){X[Y+"_DISPLAYVALUE"]=W}a("#"+a.escapeSelector(b.gridId)).awsGrid("setEditData",X);a("#"+a.escapeSelector(b.gridId)).awsGrid("refreshRow",{rowIndx:b.gridRowIndx})}}else{if(window.ui&&typeof(window.ui)=="function"){window.ui(a.escapeSelector(Y),Z)}else{a("#"+a.escapeSelector(Y)).val(Z)}if(Y!=D){a("#"+a.escapeSelector(Y)).trigger("change")}k(D)}});if(window.onAddressSelectedEvent){window.onAddressSelectedEvent(D,S[D]||"",S)}if(b.callback!=null){b.callback()}H();Q.close("address_dialog")}},{text:取消,handler:function(){a.mask("close");try{if(b.inDialog&&window.name=="dialog_toolbar_action_page_frame"){parent.$("#dialog_toolbar_action .dlg-button button").removeAttr("disabled")}}catch(S){}Q.close("address_dialog")}}],onClose:function(S){try{if(b.inDialog&&window.name=="dialog_toolbar_action_page_frame"){parent.$("#dialog_toolbar_action .dlg-button button").removeAttr("disabled")}}catch(S){}}})};J.off("click").on("click",function(){if(!a(this).hasClass("disable")){F()}});if(u.prop("readonly")){d.on("click",function(){if(!J.hasClass("disable")){F();return false}})}var G=b.isLiveSearch!=undefined?b.isLiveSearch:true;if(G){var n=b.allowAnyValue!=undefined?b.allowAnyValue:false;var I=b.filter.sourceField?b.filter.sourceField:"USERNAMEALIAS";var A=b.filter.targetField?b.filter.targetField:D;var g=I.split(",");var m=A.split(",");var c="user";var K="multiple";if(b.filter.addressSetting){c=b.filter.addressSetting.leafType;K=b.filter.addressSetting.choiceType}var f=" ";if(b.filter.isAdvMode){f=b.separator||","}a("body").off("click.address").on("click.address",function(p){if(a(p.target).parents("#awsui-address-"+D).length==0||a(p.target).hasClass("awsui-iconfont")){a("#select2-livesearch-"+D).select2("destroy");a("#select2-livesearch-"+D).remove();H()}});d.off("click").on("click",function(Q){if(u.prop("disabled")){return}if(a("#"+D).val()!=""){placeholder=""}else{placeholder=u.attr("placeholder")?u.attr("placeholder"):""}var O=d.outerWidth()-2;var N=3;if(d.children(".awsui-item:last").length>0){N=d.children(".awsui-item:last").position().left+d.children(".awsui-item:last").outerWidth()+3}if(a.escapeSelector(a(Q.target).attr("id"))!="awsui-address-"+D&&a.escapeSelector(a(Q.target).attr("id"))!="awsui-placeholder-"+D){return}a("#awsui-placeholder-"+D).hide();if(a("#select2-livesearch-"+a.escapeSelector(D)).length==0){d.append("<select id='select2-livesearch-"+D+"'></select>");var P={width:O,multiple:true,placeholder:placeholder,tags:n,dropdownCss:{border:"1px solid #d2d2d2"},dropdownCssClass:"awsui-select2-dropdown-height",templateResult:M,ajax:{url:"./jd?sid="+l+"&cmd=CLIENT_AWSUI_ADDRESS_SEARCH",dataType:"json",delay:250,data:function(R){var e={type:c,config:awsui.encode(b),appId:j,sourceField:b.filter.sourceField,keyWord:R.term,page:R.page||1,limit:12};return e},processResults:function(e,R){R.page=R.page||1;return{results:e.data.list,pagination:{more:R.page<e.data.totalPageNum}}}},minimumInputLength:1};a("#select2-livesearch-"+D).select2(P);d.find(".select2-selection").css("border","0px solid red");d.find(".select2-container").css("position","absolute").css("bottom","0px").css("left","0px").css("height","26px").css("overflow","hidden");d.find(".select2-container").find("input.select2-search__field").css("position","absolute").css("top","1px").css("left",N).css("margin-top","3px");a("#select2-livesearch-"+D).focus();a("#select2-livesearch-"+D).on("select2:select",function(T){var S=a(this).select2("data");if(!S){return}for(var R=0;R<S.length;R++){if(d.find("[sourceId='"+a.escapeSelector(S[R].sourceId)+"']").length==0){t(S[R])}}a("#select2-livesearch-"+D).select2("destroy");a(this).remove();H()});function M(R){if(R.showtextsuffix){var e=a("<span >"+R.text+" <span style='color:#ccc;font-size:12px;'>"+R.showtextsuffix+"</span></span>");return e}return R.text}function t(R){var T=p(R);var S=T.value;var e=T.showValue;var U=T.gridValue;if(K=="single"){d.find(".awsui-item").remove();d.append(a(e));a.each(S,function(W,X){window.ui?ui(W,X):a("#"+W).val(X);a("#"+W).trigger("change");if(b.isGrid){a("#Address_"+W).val(X);var V=a("#"+b.gridId).awsGrid("getRowData",b.gridRowIndx);V[W]=X;if("ADDRESS_"+W==D&&V.hasOwnProperty(W+"_DISPLAYVALUE")){V[W+"_DISPLAYVALUE"]=U}a("#"+b.gridId).awsGrid("setEditData",V);a("#"+b.gridId).awsGrid("refreshRow",{rowIndx:b.gridRowIndx})}if(window.onAddressSelectedEvent){window.onAddressSelectedEvent(D,S[D]||"",S)}})}else{d.append(a(e));a.each(S,function(W,X){if(window.ui){if(ui(W)!=""){ui(W,ui(W)+f+X)}else{ui(W,X)}}else{if(a("#"+W).val()!=""){a("#"+W).val(a("#"+W).val()+f+X)}else{a("#"+W).val(X)}}a("#"+W).trigger("change");if(b.isGrid){a("#Address_"+W).val((a("#Address_"+W).val()==""?"":(a("#Address_"+W).val()+f))+X);var V=a("#"+b.gridId).awsGrid("getRowData",b.gridRowIndx);V[W]=V[W]==""?"":(V[W]+f)+X;V[W+"_DISPLAYVALUE"]=V[W+"_DISPLAYVALUE"]==""?"":(V[W+"_DISPLAYVALUE"]+f)+U;a("#"+b.gridId).awsGrid("setEditData",V);a("#"+b.gridId).awsGrid("refreshRow",{rowIndx:b.gridRowIndx})}if(window.onAddressSelectedEvent){window.onAddressSelectedEvent(D,S[D]||"",S)}})}if(b.callback!=null){b.callback()}}function p(T){if(!T.name){T.name=T.text}var e=T.name.replace("(兼)","");var W={};var af={};var V=[];var Z="";var U=[];for(var X=0;X<m.length;X++){var ab=g[X];var S=m[X];var Y=[];V=[];if(T[ab]){Y.push(T[ab]?T[ab]:"")}else{V.push(e)}if(S==D||D=="Address_"+S){var R=T[ab]||e;var e=e;var ag=e;var ae="";var ad="";if(c=="user"&&(ab=="UID"||ab=="USERNAMEALIAS")){ae="&#58939;";ad="user";var aa=T[ab]?T[ab]:T.text;if(ab=="USERNAMEALIAS"){var aa=aa.substring(0,aa.indexOf("<"))}ag="<span userid='"+aa+"' class='awsui-user-profile'>"+e+"</span>"}else{if(c=="dept"&&ab=="DEPTID"){ae="&#59318;";ad="dept"}else{if(c=="team"&&ab=="TEAMID"){ae="&#58945;";ad="team"}else{e=T[ab]?T[ab]:T.text;ag=T[ab]?T[ab]:T.text}}}Z+="<div class='awsui-item' sourceId='"+T.sourceId+"'  value='"+R+"' type='"+ad+"' >";var ac="";if(ae){ac="<div class='awsui-item-icon awsui-iconfont'>"+ae+"</div>"}Z+=ac;Z+="<div class='awsui-item-t'>"+ag+"</div>";Z+="<div class='awsui-item-del awsui-iconfont' onclick='deleteItem(this);return false;'>&#59134;</div></div>";U.push(e)}if(S==D){Y=a.merge(V,Y)}af[S]=Y.join(f)}W.value=af;W.showValue=Z;W.gridValue=U.join(f);return W}}return false})}}return};a.fn.acAddress=function(d){var f={title:"",width:700,resourceType:"platform.companyAdmin",defAssignmentTypes:"department",isClearData:false,clearField:"",okHandler:null};var e=f;if(d){e=a.extend(true,f,d)}var b="";if(a("#sid").length>0){b=a("#sid").val()}else{if(a("input[name=sid]").length>0){b=a("input[name=sid]").val()}}var c=a(this);c.buttonedit({iconCls:"icon-address",isClearData:e.isClearData,clearField:e.clearField,onClick:function(){var g=FrmDialog.open({title:e.title,width:700,fixed:false,model:false,height:380,id:"AC_FRAMEDLG",url:"./w",data:{sid:b,cmd:"CLIENT_UI_AC_ADDRESSBOOK_PAGE",resourceId:"",resourceType:e.resourceType,defAssignmentTypes:e.defAssignmentTypes},buttons:[{text:"确定",cls:"blue",handler:e.okHandler},{text:"关闭",handler:function(){g.close()}}]})}})}})(jQuery);function enableAllAddress(a){if(a&&document.parent){parent.$("button, .button, input[type='button']").removeAttr("disabled");parent.$("button, .button, input[type='button']").removeClass("disable")}else{$("button, .button, input[type='button']").removeAttr("disabled");$("button, .button, input[type='button']").removeClass("disable")}}function disableAllAddress(a){if(a&&document.parent){parent.$("button, .button, input[type='button']").attr("disabled","true");parent.$("button, .button, input[type='button']").addClass("disable")}else{$("button, .button, input[type='button']").attr("disabled","true");$("button, .button, input[type='button']").addClass("disable")}}function getValue(u,j,b,k){var g;if(u){g=u.win()}else{g=k}var n=false;try{n=parent.$("#isMobile").val()}catch(s){}var z;if(g.addressType=="user"){if(g.isSingle){z=g.getAdvancedSelectValue()}else{z=g.getAdvancedMultipartValue()}}else{if(g.addressType=="dept"){if(g.isSingle){z=g.getDeparmentValue()}else{z=g.getAdvancedMultipartValue()}}}z=awsui.decode(z);if(b.isGrid){$("#"+b.gridId).awsGrid("quitEditMode")}if(b.isGrid){var a=$("#"+b.gridId);var d=a.awsGrid("getRowData",b.gridRowIndx);var x=[];for(var o in z){d[o]=z[o];if(o+"_DISPLAYVALUE" in d){d[o+"_FINDTEXT"]=true}x.push(o)}if(parent.AWSGrid&&parent.AWSGrid.version){a.awsGrid("setEditData",{rowData:d,refresh:false,rowIndx:b.gridRowIndx})}else{a.awsGrid("setEditData",d)}for(var p in x){a.awsGrid("refreshCell",{rowIndx:b.gridRowIndx,dataIndx:x[p]})}}else{for(var o in z){try{var y=$("#"+o);var c=z[o].split(b.separator);if(y.length==1){y.focus();y.val(z[o]);if(y.hasClass("awsui-select")){y.customSelect(c[0]);y.val(c[0])}else{if(y.hasClass("awsui-combobox")){y.setComboboxVal(z[o])}else{if(y.attr("type")=="select2"){var m=z[o];var q=b.separator||",";if(m.indexOf(q)>0){m=m.split(q)}y.val(m).trigger("change")}}}if(y.is(":hidden")&&y.parent().find("label")){y.parent().find("label").html(z[o])}y.blur()}else{var f=$("input[name='"+o+"']:first").attr("type").toLowerCase();switch(f){case"radio":var l=$("input[name='"+o+"'][value='"+c[0]+"']");if(l.is(":visible")){l.check("option","checked",true)}else{var h=$("input[name='"+o+"']:first").prev().attr("src");var r=h.replace("icheck_radio_check","icheck_radio_uncheck");var t=h.replace("icheck_radio_uncheck","icheck_radio_check");$("input[name='"+o+"']").prev().attr("src",r);$("input[name='"+o+"']").prop("checked",false);l.prop("checked",true);l.prev().attr("src",t)}break;case"checkbox":if($("input[name='"+o+"'][value='"+c[0]+"']").is(":visible")){$("input[name='"+o+"']").check("option","checked",false);$.each(c,function(e,v){$("input[name='"+o+"'][value='"+v+"']").check("option","checked",true)})}else{var h=$("input[name='"+o+"']:first").prev().attr("src");var r=h.replace("icheck_checkbox_check","icheck_checkbox_uncheck");var t=h.replace("icheck_checkbox_uncheck","icheck_checkbox_check");$("input[name='"+o+"']").prev().attr("src",r);$("input[name='"+o+"']").prop("checked",false);$.each(c,function(e,w){var v=$("input[name='"+o+"'][value='"+w+"']");v.prop("checked",true);v.prev().attr("src",t)})}break;default:}}}catch(s){}}}if(n==true||n=="true"){}else{(j?parent.FrmDialog:FrmDialog).get("address_dialog").close()}return z}function getTargetValue(c,h){var n=$("#targetField_"+c).val();var d=$("#targetField_"+c).attr("delimiter");if(n==undefined||n==""){n="";if(h.filter.addressType=="user"){d=h.filter.addressSetting.delimiter;n=h.filter.targetField}else{if(h.filter.addressType=="dept"){n=h.filter.deptTargetField}}}var g=new Array();if(n!=""){var r=n.split(",");for(var p=0;p<r.length;p++){try{if(h.isGrid){var q=$("#"+h.gridId).awsGrid("getRowData",h.gridRowIndx);if(q[r[p]]==undefined){g.push("")}else{g.push(q[r[p]])}}else{g.push(document.getElementById(r[p]).value)}}catch(s){}}}if(d==undefined){return g}var b=getmailListOptions(g[0]);var a=b?b.split(d).length:0;var o=new Array(a);for(var m=0;m<a;m++){o[m]="";for(var p=0;p<g.length;p++){var t=getmailListOptions(g[p]);var l=t.split(d);var f=l[m]==""?null:l[m];o[m]+=f==null?"":(f.replace(/&nbsp;/g," ")+d)}if(o[m].endWith(d)){o[m]=o[m].substring(0,o[m].length-1)}}return o}function getmailListOptions(d){if(d){var a=d.match(/<[^>]+>/g);for(var c=0;a!=null&&c<a.length;c++){var b=a[c].replace(/\s/g,"&nbsp;");d=d.replace(a[c],b)}}return d}function fillBackTargetValue(){var b=$("#targetField_"+adressName).val();var a=$("#targetField_"+adressName).attr("delimiter")}function openMobileDialog(d,b,c){var a=$("#isMobile").val()=="true"?true:false;if(a){mobileDialogOpen.scrollTop=$("body").scrollTop();$("#aws-form-container").hide();var e=$("#isMainForm").val()=="true"?window:parent;e.$("#mainFormPage").hide();e.$("#boItemNameSearch_div").html("");if(d="address"){if($("#isMainForm").val()=="false"){if(c){c.isSelf=true}else{c={isSelf:true}}}mobileDialogOpen.openMobileAddress("","",b,"",c,false);boItemNameGlobal=undefined;configGlobal=undefined;addressDatasObj={}}}}var boItemNameGlobal;var configGlobal;var addressDatasObj={};var mobileDialogOpen={openMobileAddress:function(f,e,a,d,b,c){awsui.ajax.request({type:"POST",url:"../r/jd",dataType:"json",alert:false,data:{sid:$("#sid").val(),cmd:"CLIENT_UI_MOBILE_CHOOSE_TASK_PERSON",keyWord:f,dept:e,type:"address",haveChooseUser:"",addressConfig:awsui.encode(b),isShowUser:c,appId:$("#appId").length>0?$("#appId").val():"_bpm.portal"},ok:function(j){if(b!=undefined&&configGlobal==undefined){configGlobal=b}var i=$("#isMainForm").val()=="true"||(configGlobal&&configGlobal.isSelf)?window:parent;if(a&&!boItemNameGlobal){boItemNameGlobal=a}i.$("#mainFormPage").hide();i.$("#boItemNameSearch_div").html(j.data.html);i.$("#boItemNameSearch_div").show();mobileDialogOpen.initCheckBoxStatus();var l=i.document.getElementById("list");l.style.height=(i.$("#boItemNameSearch_div").height()-50)+"px";try{setTimeout(function(){if($(".mui-indexed-list-bar").length!==0){window.indexedList=new mui.IndexedList(l)}},500)}catch(m){}var g="click";try{if(!($.browser.isIPhone&&top.location.href!=location.href)){g="tap"}}catch(m){}var h=j.data.isDeptAddress;if(f!==""){if(h){}else{$("#listDiv .mui-address-dept-div:first,#listDiv #deptList").hide()}}else{if(h){}else{$("#listDiv .mui-address-dept-div:first,#listDiv #deptList").show()}}i.$("#chooseUserBack").off(g).on(g,function(n){setTimeout(function(){mobileDialogOpen.chooseUserBack()},12);n.preventDefault();n.stopPropagation()});i.$("#choosePersondone").off(g).on(g,function(n){setTimeout(function(){mobileDialogOpen.chooseDone()},12);n.preventDefault();n.stopPropagation()});i.$("#emptyAddress").off("click").on("click",function(n){mobileDialogOpen.emptyAddress();n.preventDefault();n.stopPropagation();return false});i.$("#searchPersonIcon").off(g).on(g,function(n){mobileDialogOpen.searchPerson()});var k=window.mui?window.mui:$;k("#userHeader").on("tap","#openteamdialog",function(){var q=configGlobal.addressSetting?configGlobal.addressSetting.choiceType:"multiple";var o=configGlobal.addressSetting?configGlobal.addressSetting.delimiter:",";var p=configGlobal.addressSetting?configGlobal.addressSetting.leafType:"user";var n={teamSetting:{choiceType:q,selimiter:o},addressSetting:{sourceFields:configGlobal.sourceField?configGlobal.sourceField:"UID",targetFields:configGlobal.targetField?configGlobal.targetField:a,leafType:p,addressDatasObj:addressDatasObj,delimiter:o}};mobileDialogOpen.openTeamDialog(a,n,"address",b)});i.$("#searchPerson").bind("keyup",function(n){if(n.which===13){i.$("#searchPerson").blur();mobileDialogOpen.searchPerson()}});i.$(window).off("resize.mobileAddress").on("resize.mobileAddress",function(){l.style.height=(i.$("#boItemNameSearch_div").height()-50)+"px"});i.mobileDialogOpen.bindAllEvent()},err:function(g){$.simpleAlert(g.msg,g.result)}})},bindAllEvent:function(){if($("#upParentDept")){$("#upParentDept").off("tap").on("tap",function(){mobileDialogOpen.upParentDept($(this).attr("value"),$(this).attr("companyId"))})}var a=$("#isMainForm").val()=="true"||(configGlobal&&configGlobal.isSelf)?window:parent;a.$("input[name^=chooseDept]").off("click").on("click",function(b){mobileDialogOpen.changeDeptAddressData(this);b.stopPropagation()});a.$("div[name=mui-address-dept-user-click]").each(function(){var b=$(this);b.off("click").on("click",function(){var d=b.attr("value");var c=b.attr("isShowUser");mobileDialogOpen.showDeptPerson(d,boItemNameGlobal,c)})});if($("#searchPerson").attr("placeholder")=="搜索部门"){$("#deptList").css("max-height","100%");$(".fullDeptName").css("max-width",$(".fullDeptName").parent().width()-100)}},openTeamDialog:function(a,c,d,e){var b="./w?sid="+$("#sid").val()+"&cmd=CLIENT_UI_TEAM_OPEN&config="+encodeURI(JSON.stringify(c))+"&boItemValue="+$("#"+a).val()+"&boItemName="+a+"&showval="+$("#"+a).val()+"&hidval="+$("#"+a).val()+"&isMobile=true";mobileTeamUi.openMobileTeamUi(a,b,c,d,e)},chooseDone:function(){var g={};var q="";if(configGlobal&&configGlobal.isAdvMode){var d=(configGlobal.deptSourceField||configGlobal.sourceField).split(",");var y=Object.keys(addressDatasObj);if(configGlobal.addressType=="dept"){y=configGlobal.deptTargetField.split(",")}for(var o=0;o<y.length;o++){var x=y[o];var s=addressDatasObj[x];var c="";var w=configGlobal.addressSetting.delimiter;if(s!=undefined&&s.length>0){if($("#"+x).parent().length>0&&$("#"+x).parent()[0].id.indexOf("awsui-address")>-1){var p=s.split(w);var f=$("#"+x).parent();f.find(".awsui-item").removeAttr("ischeck");var r=f.width()-52;var z="max-width:"+r+"px";if(d[o]=="DEPTID"||d[o]=="UID"){var n="";if(d[o]=="DEPTID"){n="<div class='awsui-item-icon awsui-iconfont'>&#59318;</div>"}else{if(d[o]=="UID"){n="<div class='awsui-item-icon awsui-iconfont'>&#58939;</div>"}}for(var k=0;k<p.length;k++){var u=p[k].split("%");var h=u[0];var l=u[0];l=u[0];if(u.length==2){h=u[1]}if(f.find('.awsui-item[value="'+l+'"]').length==0){var u="<div class='awsui-item' value='"+l+"' ischeck='true' name='"+h+"'>"+n+"<div class='awsui-item-t' style='"+z+"'>"+h+"</div><div class='awsui-item-del awsui-iconfont' onclick='deleteItem(this);return false;'>&#59134;</div></div>";f.append($(u))}else{f.find('.awsui-item[value="'+l+'"]').attr("ischeck","true")}c+=l+w}f.find(".awsui-item").each(function(){if($(this).attr("ischeck")==undefined){$(this).remove()}});if(c.length>0){c=c.substring(0,c.length-1)}$("#"+x).val(c)}else{var r=f.width()-35;var z="max-width:"+r+"px";f.find(".awsui-item").remove();for(var k=0;k<p.length;k++){var u=p[k];if(u!=""){var u="<div class='awsui-item' value='"+u+"' ischeck='true' name='"+u+"'><div class='awsui-item-t' style='"+z+"'>"+u+"</div><div class='awsui-item-del awsui-iconfont' onclick='deleteItem(this);return false;'>&#59134;</div></div>";f.append($(u))}}$("#"+x).val(s)}}else{var p=s.split(" ");for(var k=0;k<p.length;k++){var u=p[k].split("%");if(u!=""){c+=u[0]+w}}if(c.length>0){c=c.substring(0,c.length-1)}if(window.ui&&typeof(window.ui)=="function"){window.ui($.escapeSelector(x),c)}else{$("#"+x).val(c)}}$("#"+x).parent().find(".awsui-address-del").show()}else{if(x!=""){if($("#"+x).parent().length>0&&$("#"+x).parent()[0].id.indexOf("awsui-address")>-1){$("#"+x).parent().find(".awsui-item").remove()}$("#"+x).val("");$("#"+x).parent().find(".awsui-address-del").hide()}}q=addressDatasObj[boItemNameGlobal];g[x]=q;try{$("#"+x).trigger("blur.case"+x)}catch(t){}}}else{var f=$("#"+boItemNameGlobal).parent();var r=f.width()-52;var z="max-width:"+r+"px";f.find(".awsui-item").removeAttr("ischeck");for(var b in addressDatasObj[boItemNameGlobal]){var v=addressDatasObj[boItemNameGlobal][b].split("%");var j=v[0];var a=j;if(v.length==2){a=v[1]}if(q==""){q=j}else{q+=" "+j}if(f.find('.awsui-item[value="'+j+'"]').length==0){var u="<div class='awsui-item' value='"+j+"' ischeck='true' name='"+a+"'><div class='awsui-item-icon awsui-iconfont'>&#58939;</div><div class='awsui-item-t' style='"+z+"'>"+a+"</div><div class='awsui-item-del awsui-iconfont' onclick='deleteItem(this);return false;'>&#59134;</div></div>";f.append($(u))}else{f.find('.awsui-item[value="'+j+'"]').attr("ischeck","true")}}f.find(".awsui-item").each(function(){if($(this).attr("ischeck")==undefined){$(this).remove()}});if(f.find(".awsui-item").length>0){f.find(".awsui-address-del").show()}else{f.find(".awsui-address-del").hide()}$("#"+boItemNameGlobal).val(q);g[boItemNameGlobal]=q;try{$("#"+boItemNameGlobal).trigger("blur.case"+boItemNameGlobal)}catch(t){}}if(f!=null){if($("#"+boItemNameGlobal).val()==""){f.find("#awsui-placeholder-"+boItemNameGlobal).show()}else{f.find("#awsui-placeholder-"+boItemNameGlobal).hide()}}if(window.onAddressSelectedEvent){try{window.onAddressSelectedEvent(boItemNameGlobal,q,g)}catch(t){}}mobileDialogOpen.chooseUserBack()},emptyAddress:function(){if(configGlobal&&configGlobal.isAdvMode){var a=(configGlobal.targetField||configGlobal.deptTargetField).split(",");for(var b=0;b<a.length;b++){var c=a[b];$("#"+c).val("");$("#"+c).parent().find(".awsui-item").remove();$("#"+c).parent().find(".awsui-address-del").hide();try{$("#"+c).trigger("blur.case"+key)}catch(d){}}}else{$("#"+boItemNameGlobal).val("");$("#"+boItemNameGlobal).parent().find(".awsui-item").remove();$("#"+boItemNameGlobal).parent().find(".awsui-address-del").hide();try{$("#"+boItemNameGlobal).trigger("blur.case"+boItemNameGlobal)}catch(d){}}if(window.onAddressSelectedEvent){window.onAddressSelectedEvent(boItemNameGlobal,"",{})}mobileDialogOpen.chooseUserBack()},chooseUserBack:function(){if($("#isMainForm").val()=="false"){mobileChooseDivShow.close(true)}else{mobileChooseDivShow.close()}if(configGlobal&&configGlobal.isSelf){parent.mobileDialog.btnControl("enable")}$("#aws-form-container").show();$("body").scrollTop(mobileDialogOpen.scrollTop);mobileDialogOpen.scrollTop=0;try{if($("#isMobile").val()=="true"&&navigator.userAgent.toLowerCase().indexOf("iphone")>-1){$(".awsui-item-t,.awsui-item-del,.awsui-item-icon").css("top","0px")}}catch(a){}return false},searchPerson:function(){var a=$("#isMainForm").val()=="true"||(configGlobal&&configGlobal.isSelf)?window:parent;var b=a.$("#searchPerson").val();setTimeout(function(){mobileDialogOpen.openMobileAddress(b,"","","",configGlobal)},300)},showDeptPerson:function(c,a,b){mobileDialogOpen.openMobileAddress("",c,a,"",configGlobal,b)},upParentDept:function(b,a){awsui.ajax.request({url:"./jd",method:"POST",async:false,data:{sid:$("#sid").val(),cmd:"CLIENT_UI_MOBILE_PARENT_DEPT_USER_HTML",deptId:b,addressConfig:awsui.encode(configGlobal),appId:$("#appId").length>0?$("#appId").val():"_bpm.portal",companyId:a?a:""},success:function(c){$("#listDiv").children().remove();$("#listDiv").prepend(c.data.departmentHtml);$("#listDiv").append(c.data.userHtml);mobileDialogOpen.initCheckBoxStatus();mobileDialogOpen.bindAllEvent()}})},initCheckBoxStatus:function(){if(configGlobal&&configGlobal.isAdvMode){var f=configGlobal.targetField.split(",");if(f.length>0){for(var c=0;c<f.length;c++){var h=f[c];if(configGlobal.sourceField.indexOf("UID")>-1||configGlobal.sourceField.indexOf("USERNAMEALIAS")>-1){if(addressDatasObj[h]==undefined){addressDatasObj[h]=$("#"+h).val()}$('input[name="choosePersonCheck"]').each(function(){var i=-1;var k=configGlobal.sourceField.split(",");for(var l=0;l<k.length;l++){if(k[l]=="UID"||k[l]=="USERNAMEALIAS"){i=l}}var m;if(addressDatasObj[h]==undefined){if($.trim($("#"+f[i]).val())!=""){m=$("#"+f[i]).val().split(configGlobal.addressSetting.delimiter)}}else{if(addressDatasObj[h]!=""){m=addressDatasObj[h].split(configGlobal.addressSetting.delimiter)}}if(m){$('input[name="choosePersonCheck"]').each(function(){var n=$(this).val().split("$");for(var o=0;o<m.length;o++){var p;var q=m[o].split("%")[0];if(q.indexOf("<")>-1){p=q.substring(0,q.indexOf("<"))}else{p=q}if(p==n[0]){$(this).attr("checked",true);break}}})}else{addressDatasObj[h]=""}})}else{addressDatasObj[h]=""}}}else{var d=configGlobal.deptTargetField.split(",");if(d.length>0){for(var c=0;c<d.length;c++){var h=d[c]}}}}else{if(!addressDatasObj[boItemNameGlobal]){addressDatasObj[boItemNameGlobal]={};var e=$("#"+boItemNameGlobal).val();var g=e.split(" ");for(var c=0;c<g.length;c++){var b=g[c];if(b!=""){var a=b;if(b.indexOf("<")!=-1){a=b.substring(0,b.indexOf("<"))}addressDatasObj[boItemNameGlobal][a]=b;$('input[name="choosePersonCheck"]').each(function(){var i=$(this).val().split(",");if(a==i[0]){$(this).attr("checked",true);return false}})}}}else{for(var a in addressDatasObj[boItemNameGlobal]){$('input[name="choosePersonCheck"]').each(function(){var i=$(this).val().split(",");if(a==i[0]){$(this).attr("checked",true);return false}})}}}},changeAddressData:function(g){var p=$(g).find("input[name=choosePersonCheck]:first");if($(g).attr("addressType")=="task"){if(p.is(":checked")){if(p.hasClass("mui-address-radio")){$("#dialog_toolbar_extend_btn_action_page_frame_mobile")[0].contentWindow.chooseDone()}}}else{if(configGlobal&&configGlobal.isAdvMode){var o=p.val().split("$");var n=awsui.decode(o[4]);if(p.is(":checked")){var e=configGlobal.targetField.split(",");var l=configGlobal.sourceField.split(",");for(var h=0;h<e.length;h++){var d=e[h];var k=$("#targetField_"+d).attr("delimiter")||" ";var a=n[h][Object.keys(n[h])[0]];if(l[h]=="UID"){a=a+"%"+o[1]}if(addressDatasObj[d]==""){addressDatasObj[d]=a}else{if($(g).hasClass("mui-radio")){addressDatasObj[d]=a}else{addressDatasObj[d]+=k+a}}}}else{var e=configGlobal.targetField.split(",");for(var h=0;h<e.length;h++){var d=e[h];var k=$("#targetField_"+d).attr("delimiter")||" ";var f=addressDatasObj[d].split(k);for(var c=0;c<f.length;c++){var b=f[c].split("%")[0];if(b==n[h][Object.keys(n[h])[0]]){f.splice(c,1);break}}addressDatasObj[d]=f.join(k)}}if(configGlobal.sourceField.indexOf("UID")>-1||configGlobal.sourceField.indexOf("USERNAMEALIAS")>-1){}}else{if(boItemNameGlobal){var o=p.val().split(",");if(p.val().indexOf("$")>-1){o=p.val().split("$")}if(p.is(":checked")){if(p.hasClass("mui-address-radio")){addressDatasObj[boItemNameGlobal]={}}addressDatasObj[boItemNameGlobal][o[0]]=o[3]+"%"+o[1]}else{for(var m in addressDatasObj[boItemNameGlobal]){if(m==o[0]){delete addressDatasObj[boItemNameGlobal][m];break}}}}}if($(g).hasClass("mui-radio")){setTimeout(function(){mobileDialogOpen.chooseDone()},12)}}},changeDeptAddressData:function(k){var g=(configGlobal.deptTargetField||configGlobal.targetField).split(",");var o=(configGlobal.deptSourceField||configGlobal.sourceField).split(",");var c=awsui.decode("["+$(k).attr("value")+"]");if($(k).is(":checked")){for(var m=0;m<g.length;m++){var f=g[m];var n=$("#targetField_"+f).attr("delimiter")||" ";var l=c[m][Object.keys(c[m])[0]];var a=$.trim($(k).next()[0].innerText);if(o[m]=="DEPTID"){l=l+"%"+a}if(!addressDatasObj[f]){addressDatasObj[f]=l}else{if($(k).attr("type")=="radio"){addressDatasObj[f]=l}else{addressDatasObj[f]+=n+l}}}}else{for(var m=0;m<g.length;m++){var f=g[m];var n=$("#targetField_"+f).attr("delimiter")||" ";try{var h=addressDatasObj[f].split(n);for(var d=0;d<h.length;d++){var b=h[d].split("%")[0];if(b==c[m][Object.keys(c[m])[0]]){h.splice(d,1);break}}addressDatasObj[f]=h.join(" ")}catch(p){}}}if($(k).attr("type")=="radio"){setTimeout(function(){mobileDialogOpen.chooseDone()},12)}}};