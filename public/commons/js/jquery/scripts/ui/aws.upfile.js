/*!
 * =====================================================
 * AWS附件上传通用库文件
 * v1.0 (http://www.actionsoft.com.cn)
 * 发布后文件名：aws.upfile.js
 * =====================================================
 */
function __awsui_upfile_handler(d,a,c){var b=$("#"+d).parent().data("upfile-opts");var e=b[a];if(e!=null){if(a=="complete"){e()}else{return e.apply(b,c)}}}(function(b){var c=false;var a=navigator.userAgent.toLowerCase();if(a.indexOf("msie 8")>-1||a.indexOf("msie 9")>-1){c=true}var d=function(){var g=document.URL;var f="uf";if(g&&g.indexOf("/r/")!=-1){f=g.substring(0,g.indexOf("/r/"))+"/r/uf"}else{if(g&&g.indexOf("/apps")>-1){f=g.substring(0,g.indexOf("/apps"))+"/r/uf"}}var e=f+"?";return e};b.fn.upfile=function(E){if(c){if("close"==E){b(this).find("div[t_upfile]").remove();b(this).removeData("upfile-instance");return}if(b(this).data("upfile-instance")!=null){return}}var P=b(this);var B=E||{};var A=E.sid,C=E.groupValue,Z=E.extParam===undefined?"":E.extParam,D=E.fileValue,G=E.repositoryName;var g=false;var k=5*1024*1024;if(E.maxFileSize!=null||E.sizeLimit!=null){k=E.maxFileSize||E.sizeLimit}AWSFile.sizelimit=k;var M="[]";if(E.filter!=null||E.filesToFilter!=null){M=E.filter||E.filesToFilter;if(jQuery.isArray(M)){M=awsui.encode(M)}}if(E.isShowProgress&&E.isShowProgress==true){g=true;AWSFile.initProgress()}var I=E.appId;var z=0;if(E.numLimit!=null||E.maxUpLength!=null){z=E.numLimit||E.maxUpLength}if(E.filesToFilter){var s;try{s=E.filesToFilter[0][1]}catch(ab){}}var x=0;var O="";if(b(this).attr("id")!=undefined){O="upfile_"+b(this).attr("id")}else{O="upfile_"+Math.random().toString(36).substring(7)}if(c){var J={sizeLimit:k,filter:M,numLimit:z,url:d()+"appId="+E.appId+"&sid="+A+"&groupValue="+C+"&fileValue="+D+"&repositoryName="+G+"&extParam="+Z,eId:O};var ad=E.complete;var W=E.progress;var u=E.done;var i=E.add;E.add=function(aj,w){AWSFile.currentLoading_t=0;AWSFile.currentLoading_t_progress=1;x=0;var ah=b("#"+E.fileDomId).val();if(ah){x=ah.split("@@@@").length}var al={};var h=new Array();var ai=arguments[0].length;if(ai>0){for(var ag=0;ag<ai;ag++){var p={};p.name=arguments[0][ag]["fileName"];p.type=arguments[0][ag]["fileType"];p.size=arguments[0][ag]["fileSize"];h.push(p)}}al.files=h;al.originalFiles=h;var ak=AWSFile.addCallbackFn(i,al,E,x);if(ak){b.simpleAlert(正在上传请稍候,"loading",{model:true})}return ak};E.progress=function(ah,ag){var p={};var w=new Array();if(arguments!=null){var h={};h.name=arguments[0];w.push(h)}p.files=w;p.loaded=arguments[1];p.total=arguments[2];AWSFile.progressCallbackFn(W,p,g)};E.done=function(aj,ai){b.simpleAlert("close");var h=false;if(arguments.length>3&&arguments[3]!=null){try{var w=awsui.decode(arguments[3]);if(w.data.result!=="ok"){h=true}if(h){if(E.error!=null){E.error.apply(P,arguments)}else{b.simpleAlert(w.data.result.data.msg,"error")}}}catch(aj){alert(aj)}}if(!h){var ag={};var ah=new Array();if(arguments!=null){var p={};p.name=arguments[0];p.type=arguments[2];p.size=arguments[1];ah.push(p)}ag.files=ah;var w=awsui.decode(arguments[3]);ag.result=w;AWSFile.doneCallbackFn(u,E,ag)}};E.complete=function(p,h){b.simpleAlert("close");b(".ph_loaded").html(100+"%");b(".inner_mask").css("width",100+"%");b.simpleAlert(上传成功,"ok",2000);if(ad!=null){ad.apply(P,arguments)}else{AWSFile.completeCallbackFn(g)}};var t="upfile"+O;var m="../commons/js/jquery/scripts/ui/upfile/FileUpload.swf";htmls="";htmls+='<div id="'+t+'" style="position :absolute;top:0px;left:0px;">';htmls+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+O+'">';htmls+='<param name="movie" value="'+m+'" />';htmls+='<param name="quality" value="high" />';htmls+='<param name="allowScriptAccess" value="sameDomain" />';htmls+='<param name="allowFullScreen" value="true" />';htmls+='<param name="wmode" value="transparent" />';htmls+='<param name="flashvars" value="'+b.param(J)+'" />';htmls+='<embed id="'+O+'" name="'+O+'" wmode="transparent" allowScriptAccess="sameDomain" allowNetworking ="all" quality="high" width="100%" height="100%" src="'+m;htmls+='" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/cn/products/flashplayer" flashvars="'+b.param(J)+'">';htmls+="</embed>";htmls+="</object>";htmls+="</div>";b(this).css("position","relative");var V=b(this).actual("outerWidth");var Y=b(this).actual("outerHeight");var ac=b(htmls).appendTo(b(this));b(this).data("upfile-instance",ac);ac.data("upfile-opts",E);ac.width(V);ac.height(Y)}else{var f="";var n="";if(E.filesToFilter){var L=E.filesToFilter[0][1];if(L){var v=L.split(";").join(",");v=v.replace(/\*/g,"");if(v.length>0){if(v.indexOf(".xls,")>-1){v=v.replace(".xls,","application/vnd.ms-excel,")}if(v.indexOf(".xlsx,")>-1){v=v.replace(".xlsx,","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,")}if(v.indexOf(".doc,")>-1){v=v.replace(".doc,","application/msword,")}if(v.indexOf(".docx,")>-1){v=v.replace(".docx,","application/vnd.openxmlformats-officedocument.wordprocessingml.document,")}if(v.indexOf(".ppt,")>-1){v=v.replace(".ppt,","application/vnd.ms-powerpoint,")}if(v.indexOf(".pptx,")>-1){v=v.replace(".pptx,","application/vnd.openxmlformats-officedocument.presentationml.presentation,")}if(v.indexOf(".app")>-1){v=v.replace(".app","application/app")}if(v.indexOf(".zip")>-1){v=v.replace(".zip","application/zip")}if(v.indexOf(".cer")>-1){v=v.replace(".cer","application/x-x509-ca-cert")}if(v.indexOf(".p12")>-1){v=v.replace(".p12","application/x-pkcs12")}if(v.indexOf(".crt")>-1){v=v.replace(".crt","application/x-x509-ca-cert")}if(v.indexOf(".pdf")>-1){v=v.replace(".pdf","application/pdf")}}n="accept='"+v+"'";if(E.accept){n="accept='"+E.accept+"'"}}}f="<input type='file' style='display:none;' id='"+O+"' "+(z==1?"":"multiple='multiple' ")+n+">";b(f).insertAfter(b(this));var m=encodeURI(d()+"appId="+E.appId+"&sid="+A+"&groupValue="+C+"&fileValue="+D+"&repositoryName="+G+"&extParam="+Z);var r={appId:E.appId,sid:A,groupValue:C,fileValue:D,repositoryName:G,extParam:Z};var j=0;var S={url:m,autoUpload:true,sequentialUploads:E.sequentialUploads===true,dataType:"json",fileInput:b("#"+O),paramName:r,add:function(ag,w){if(w){if(w.files&&w.files.length>0){if("/"==w.files[0].name){return false}}}x=0;var h=b("#"+E.fileDomId).val();if(h){x=h.split("@@@@").length}var p=AWSFile.addCallbackFn(E.add,w,E,x);if(p){w.submit();if(j==0){b.simpleAlert(正在上传请稍候,"loading",{model:true})}j++}},progress:function(p,h){AWSFile.progressCallbackFn(E.progress,h,g)},complete:function(p,h){if(E.complete){E.complete(p,h)}else{AWSFile.completeCallbackFn(g)}},done:function(p,h){j--;if(j==0){b.simpleAlert("close")}if(h.result.data.result=="error"){b.simpleAlert(h.result.data.msg,"error")}else{AWSFile.doneCallbackFn(E.done,E,h)}},error:function(p,h){}};b("#"+O).on("click",function(){b("#"+O).fileupload(S);b("#"+O).off("click")});var K=b("#isMobile").val();var R="click";if(K=="true"){R="tap"}b(this).off(R).on(R,function(){if(b(this).hasClass("disable")){return}try{if(b(this).attr("id")){var ag=b(this).attr("id").substring(3,b(this).attr("id").length-5);var ah=b("#"+ag).attr("fileCount");var p=b("#"+ag).val();if(ah&&parseInt(ah)>0&&p){var h=p.split("@@@@").length;if(parseInt(ah)<=h){b.simpleAlert(上传文件总数不允许超过+parseInt(ah),"info");return}}}}catch(w){}b("#"+O).trigger("click");AWSFile.currentLoading_t=0;AWSFile.currentLoading_t_progress=1;return false})}if(!K){var X=E.cloudDCEnabled!=null?E.cloudDCEnabled:false;var af=E.cloudDCBut!=null?E.cloudDCBut:"";if(X){var aa=false;awsui.ajax.request({type:"POST",url:"./jd",dataType:"json",async:false,data:{sid:A,cmd:"CLIENT_FILE_IFSUPPORT_CLOUDDC"},success:function(e){aa=e.data.ifSupportCloudDC},error:function(e){}});if(aa){var ae=b(this).attr("class");var U=b(this).attr("id");var H=b(this).attr("style");var q=b(this).outerHeight();var l=E.fileDomId;var F=E.boId;var Q=E.boDefId;var y=b("#boDefName").length>0?b("#boDefName").val():"";var o=b("#taskInstId").val()==undefined?"":b("#taskInstId").val();var T=b("#processInstId").val()==undefined?"":b("#processInstId").val();if(b("#clouddc_"+U).length==0){if(af!=""){var N=b(af);N.attr("id","clouddc_"+U);b(N).insertAfter(b(this))}else{var N="<button type='button' id=\"clouddc_"+U+"\" class='"+ae+"'  style=\""+H+";height:"+q+'px; ">'+云文档+"</button>";b(N).insertAfter(b(this))}b("#clouddc_"+U).on("click",function(){var e=FrmDialog.open({title:云文档,width:800,height:500,id:"openclouddc",url:"./w?cmd=CLIENT_FILE_CLOUDDC_PULL_HOME_PAGE&sid="+A,data:{appId:E.appId,groupValue:C,fileValue:D,repositoryName:G,processInstId:T,taskInstId:o,boId:F,boItemName:l,boDefId:Q,boName:y},buttons:[{text:确认上传,cls:"blue",handler:function(){var h=b("#id-awsui-win-frm-2013-frmopenclouddc")[0];var p=h.contentWindow?h.contentWindow:(h.contentDocument.document?h.contentDocument.document:h.contentDocument);p.saveCloudDCFile(E,E.add,E.complete,E.done)}},{text:取消,handler:function(){FrmDialog.close()}}]})})}}}}}})(jQuery);var AWSFile={currentLoading_t:0,currentLoading_t_progress:1,sizelimit:0,addCallbackFn:function(b,i,p,n){var j=this;var l;var m=true;if(b){var c=b(l,i);if(c==false){m=false}}else{var f=p.fileDomId;if($("select[uid=securityLevelSelBo_"+f+"]").length>0){var a=$("select[uid=securityLevelSelBo_"+f+"]").val();var d=true;var o=true;try{if($("#formFileSecurityCheck").length>0){o=$("#formFileSecurityCheck").val()==="true"}else{o=parent.$("#formFileSecurityCheck").val()==="true"}}catch(l){}if(o){$.each(i.files,function(e,q){var r=q.name;if(a=="0"){if(r.indexOf("普通")<0||r.indexOf("秘密")>0||r.indexOf("机密")>0||r.indexOf("绝密")>0){d=false}}else{if(a=="1"){if(r.indexOf("秘密")<0||r.indexOf("普通")>0||r.indexOf("机密")>0||r.indexOf("绝密")>0){d=false}}else{if(a=="2"){if(r.indexOf("机密")<0||r.indexOf("秘密")>0||r.indexOf("普通")>0||r.indexOf("绝密")>0){d=false}}else{if(a=="3"){if(r.indexOf("绝密")<0||r.indexOf("秘密")>0||r.indexOf("机密")>0||r.indexOf("普通")>0){d=false}}}}}})}if(!d){$.simpleAlert("上传文件名必须包含所选密级信息且不允许包含其他密级信息","info",3000);return false}}if(p.numLimit!=0&&p.numLimit<n+i.originalFiles.length){$.simpleAlert(上传文件总数不允许超过+p.numLimit,"info");m=false}if(i.originalFiles.length>0){$.each(i.originalFiles,function(e,q){if(q.size>0){if(p.sizeLimit!=0&&p.sizeLimit<q.size){m=false;var r=j.formatSize(p.sizeLimit);r=r.replace(".00","");$.simpleAlert(文件大小不允许超过+r,"info",2000);return false}}else{m=false;$.simpleAlert(空文件不能上传,"info",2000);return false}})}var g="";if(p.filesToFilter){var k=p.filesToFilter[0][1];if(k){var h=k.split(";").join(",");g=h.replace(/\*/g,"")}}if(m){$.each(i.files,function(r,s){g=g.toLowerCase();if(g.length>0){var t=s.name.lastIndexOf(".");if(t==-1){m=false;$.simpleAlert(文件类型不正确,"info",2000);return false}var q=s.name.substring(t,s.name.length);q=q.toLowerCase();if((g+",").indexOf(q+",")==-1){m=false;$.simpleAlert(文件类型不正确,"info",2000);return false}}if(s.size>0){try{if(p.isShowProgress){AWSFile.upfileAddCallBackFun(s.name,s.type,s.size)}}catch(u){}}})}}return m},progressCallbackFn:function(a,c,b){var d;if(a){a(d,c)}else{$.each(c.files,function(f,g){try{if(b){AWSFile.upfileProgressCallBackFun(g.name,c.loaded,c.total)}}catch(h){}})}},doneCallbackFn:function(c,b,d){var f;if(c){c(f,d)}else{var a=$("#"+b.fileDomId).val();if(!a){a=""}var g=a.split("@@@@");$.each(d.files,function(h,i){if(b.saveFile){var k=i.name;try{k=d.result.data.data.attrs.fileName}catch(j){}a=a+"@@@@"+k;b.saveFile(k,i.size,b.fileDomId,b.boId,b.groupValue,b.fileValue,b.repositoryName)}});if(a.startWith("@@@@")){a=a.substring(4,a.length)}$("#"+b.fileDomId).val(a)}if(b.isShowProgress){}},completeCallbackFn:function(a){if(!($("#simplealert").length>0&&$("#simplealert").is(":visible"))){$.simpleAlert(上传成功,"ok",2000)}if(a){setTimeout(function(){$(".progress_wrap").animate({height:"0px"},"fast",function(){$(".dlg_hd .min").removeClass("min").addClass("max")})},"2000")}},initProgress:function(){if(!($("div").hasClass("dlg_hd"))){progressFile="";progressFile+='<div class="box">';progressFile+='<div class="dlg_hd"><font style="font-size:16px;">'+上传状态+'</font>  <h3><a href="javascript:void();" class="min zom"></a><a href="#" class="progress_close"></a></h3></div>';progressFile+='<div class="progress_wrap"><div class="progress_header clearfix">';progressFile+='<div class="progress_title">'+标题+'</div><div class="progress_size">'+大小+"</div>";progressFile+='<div class="progress_loaded">'+进度+'</div><div class="progress_content"></div></div></div></div>';$(progressFile).appendTo("body")}},upfileAddCallBackFun:function(a,c,b){AWSFile.currentLoading_t++;if($(".box").is(":visible")==false){$(".box").slideToggle("fast",function(){});$(".dlg_hd .zom").off("click").on("click",function(){if($(this).hasClass("min")){$(".progress_wrap").animate({height:"0px"},"fast",function(){$(".dlg_hd .min").removeClass("min").addClass("max")});return false}else{$(".progress_wrap").animate({height:"170px"},"fast",function(){$(".dlg_hd .max").removeClass("max").addClass("min")});return false}});$(".dlg_hd .progress_close").off("click").on("click",function(){AWSFile.currentLoading_t=0;AWSFile.currentLoading_t_progress=1;$(".box").hide();$(".progress_content").empty();return false});setTimeout(function(){$(".box").slideToggle("fast",function(){AWSFile.currentLoading_t=0;AWSFile.currentLoading_t_progress=1;$(".box").hide();$(".progress_content").empty()})},"3000")}else{$(".progress_wrap").animate({height:"170px"},"fast",function(){$(".dlg_hd .max").removeClass("max").addClass("min")})}if(AWSFile.currentLoading_t==1){$(".progress_content").empty()}var d=$("<div class='p_item' t="+AWSFile.currentLoading_t+"><div class='inner_mask'></div><div class='inner_result'><div class='ph_title'></div><div class='ph_size'></div><div class='ph_loaded'></div></div>");$(".progress_content").append(d);return true},upfileProgressCallBackFun:function(a,d,c){if(a!=""&&a!=null&&a!=undefined){var b=(d/c)*100;$(".p_item[t="+AWSFile.currentLoading_t_progress+"]").find(".ph_title").html(a);$(".p_item[t="+AWSFile.currentLoading_t_progress+"]").find(".ph_size").html(AWSFile.formatSize(c));$(".p_item[t="+AWSFile.currentLoading_t_progress+"]").find(".ph_loaded").html(Math.floor(b)+"%");$(".p_item[t="+AWSFile.currentLoading_t_progress+"]").find(".inner_mask").css("width",b+"%");if(d==c){AWSFile.currentLoading_t_progress++}}},formatSize:function formatSize(c){if(c=="0"){return"-"}c=parseFloat(c);var a=["B","KB","MB","GB","TB","PB","EB","ZB","YB","BB"];var d=1024;var b=0;while(true){if(c>=1024){c=parseFloat(c/d).toFixed(2);b++}else{break}}return c+a[b]},removeFile:function(c,d,f,b,e){var a=$("#isMobile").val();awsui.MessageBox.confirm(提示,确定要删除吗文件名+e,function(){AWSFile.removeFileAjax(c,d,f,b,e)})},removeFileAjax:function(c,d,f,a,e){var b=this;awsui.ajax.request({url:"./jd",method:"POST",alert:false,data:{sid:$("#sid").val(),cmd:"CLIENT_UI_FILE_ROVEME",uuId:c,appId:d,fileName:e,boDefId:f,boItemName:a},success:function(h){if(h.result=="ok"){$.simpleAlert(h.msg,h.result);$("#"+c).remove();var i=$("#"+a).val();var g="@@@@";if(i.indexOf(g)>-1){if(i.endWith(e)){i=i.replace(g+e,"")}else{i=i.replace(e+g,"")}}else{i=""}$("#"+a).val(i);if(b.removeComplete){b.removeComplete()}}else{$.simpleAlert(h.msg,h.result)}}})},addComment:function(c,d,b,a){if(!$("#"+d).parent().is("body")){$(document.body).append($("#"+d))}$("#"+d).popbox({target:$("#img_"+d),height:100});$("#"+b).off("blur").on("blur",function(){if(!a){var e=$(this).val();awsui.ajax.request({url:"./jd",method:"POST",data:{sid:$("#sid").val(),cmd:"CLIENT_UI_FILE_SAVE_COMMENT",uuId:c,remark:e},success:function(f){if(awsui.ajax.ok(f)){$("#"+b).val(e);var g=b.replace("remark_","img_pop");$("#"+g).attr("awsui-qtip",e);if(e==null||e.trim()==""){$("#"+g).find("img").css("opacity","0.5");$("#"+g).find("img").css("filter","alpha(opacity=50)")}else{$("#"+g).find("img").css("opacity","1.0");$("#"+g).find("img").css("filter","alpha(opacity=100)")}}}})}})},officeFilePreview:function(c,h,d,k,m,i,e,f,j,l){if(e=="1"){this.officeFileEdit(c,h,d,k,m,i,e,f,j,l);return}var a="";var b=$("#sid").val();var g={appId:m,repositoryName:k,groupValue:JSON.stringify(d),fileValue:i,fileName:h,editType:e,copyType:f,printType:j,localType:l,showHandToolbar:0,sid:$("#sid").val(),cmd:"CLIENT_UI_FILE_PREVIEW_FILE",documentHeight:"95%"};$.simpleAlert("文件预览后台处理中...","info",800);awsui.ajax.request({type:"POST",url:"./jd",dataType:"json",alert:false,data:g,err:function(n){$.simpleAlert("close");$.simpleAlert(n.msg,n.result,2000)},ok:function(o){$.simpleAlert("close");if(o.result=="ok"){try{if(awsWebview.isMobileAWSApp()){var n=new String(document.location);n=n.substring(0,n.indexOf("r/w"));awsWebview.openWebview(n+"r/w"+o.data.url.replace("./w",""))}else{var q=window.open(o.data.url);if($.browser.isMobile&&$.browser.isSafari){if(q==null){window.location.href=o.data.url}}}}catch(p){var q=window.open(o.data.url);if($.browser.isMobile&&$.browser.isSafari){if(q==null){window.location.href=o.data.url}}}}else{$.simpleAlert(o.msg,o.result,2000)}}})},officeFileEdit:function(c,h,d,k,m,i,e,f,j,l){var a="";var b=$("#sid").val();var g={downloadUrl:c,appId:m,repositoryName:k,groupValue:JSON.stringify(d),fileValue:i,fileName:h,editType:e,copyType:f,printType:j,localType:l,showHandToolbar:0,documentHeight:"95%"};a="./w?sid="+b+"&cmd=com.actionsoft.apps.formui.iweboffice_view_online&"+$.param(g);window.open(a)},addWaterMark:function(d,l,i,c,f,j,k,g,h){if(!h){var b=$("#sid").val();var e={sid:b,uuId:d,appId:l,fileName:f,boDefId:i,boItemName:c,waterMarkFontColor:j,waterMarkPosition:k,waterMarkFontSize:g};var a="./jd?cmd=CLIENT_UI_FILE_ADD_WATERMARK";awsui.ajax.post(a,e,function(n){if(n.result=="ok"){var m=n.data["pictureLogoThumDownLoadUrl"];if(m!=""){$("#img_"+d).attr("src",m+"&v="+new Date().getTime());$("#preview_a_"+d).attr("href",m);$($($("#"+d).children()[0]).children().children()[1]).attr("href",m);if($("#isMobile").val()!="true"){$("a[rel=fancyboxgrouppreview]").fancybox({transitionIn:"none",transitionOut:"none",titlePosition:"over",showNavArrows:"true"});$.simpleAlert(水印添加成功,"ok")}}}else{$.simpleAlert(n.msg,n.result)}},"json")}else{}},compressFile:function(d,j,i,b,g,h){if(!h){var e=$("#compresswidth_"+d).val();var c=$("#sid").val();var f={sid:c,uuId:d,appId:j,fileName:g,boDefId:i,boItemName:b,compressWidth:e};var a="./jd?cmd=CLIENT_UI_FILE_COMPRESS_FILE";awsui.ajax.post(a,f,function(l){if(l.result=="ok"){var k=l.data["pictureLogoThumDownLoadUrl"];$("#img_"+d).attr("src",k+"&v="+new Date().getTime());$("#preview_a_"+d).attr("href",k);if($("#isMobile").val()!="true"){$("a[rel=fancyboxgrouppreview]").fancybox({transitionIn:"none",transitionOut:"none",titlePosition:"over",showNavArrows:"true"});$.simpleAlert(图片压缩成功,"info")}}else{$.simpleAlert(l.msg,l.result)}},"json")}else{}},fileAuth:function(b){var a="./w?sid="+$("#sid").val()+"&cmd=CLIENT_COMMON_AC_ACTION_OPEN&resourceId="+b+"&resourceType=portal.uifile";FrmDialog.open({title:"AC授权",width:750,height:400,url:a,id:"addFileAC",buttons:[{text:"添加",cls:"blue",handler:function(){FrmDialog.win().saveAC()}},{text:"关闭",handler:function(){FrmDialog.close()}}]})},getFileSuffixIcon:function(g){try{g=g.toLowerCase()}catch(f){}var d=g.substring(g.lastIndexOf(".")+1);var c=["ai","apk","avi","bmp","chm","css","dmg","doc","exe","file","gif","html","icon","ics","ie","ipa","jpg","js","key","mov","mp3","mp4","mpg","normal","outlook","pdf","php","png","ppt","psd","rar","torrent","txt","visio","vsd","xls","xml","zip"];if($.inArray(d,c)>-1){return"../commons/img/fileSuffix/"+d+".png"}var a=[["word","rtf","docx","wps"],["xls","xlt","xlw","xlsx","et"],["html","htm"],["jpg","pcx","jpeg"],["ppt","pot","dps","pps","pptx","potx","ppsx"],["zip","tar","jar","gz"],["txt","logging","ini"],["avi","mpeg","mpg","ra","rm","rmvb","mov","qt","asf","wmv","swf"],["access","mdb","accdb"],["xml","xsd"]];for(var b in a){if($.inArray(d,a[b])>-1){return"../commons/img/fileSuffix/"+a[b][0]+".png"}}return"../commons/img/fileSuffix/unknown.png"},getFilesHtml:function(a){if(a==null||$.trim(a)==""){return""}var c=a.split(/@@@@|,/);for(var b=0;b<c.length;b++){c[b]='<img border="0" width="15" src="'+this.getFileSuffixIcon(c[b])+'" align="absmiddle">'+c[b]}return c.join(",")},checkCallback:function(b,a){if($("#awsuiFile_"+a).length>0&&$("#awsuiFile_"+a).find("input[group=fileAll_"+a+"]").length==1){$("#download_btn_"+a).hide()}else{if($("#file_tab").length>0&&$("#file_tab").find("input[group=fileAll_"+a+"]").length==1){$("#download_btn_"+a).hide()}else{if($(b).prop("checked")){$("#download_btn_"+a).show()}else{if($("#awsuiFile_"+a).length>0&&$("#awsuiFile_"+a).find("input[group=fileAll_"+a+"]:checked").length>0){$("#download_btn_"+a).show()}else{if($("#file_tab").length>0&&$("#file_tab").find("input[group=fileAll_"+a+"]:checked").length>0){$("#download_btn_"+a).show()}else{$("#download_btn_"+a).hide()}}}}}}};function confirmDialog(c,b,e){var d="popupDialog";$('<div data-role="popup" id="'+d+'" data-confirmed="no" data-transition="pop" data-overlay-theme="a" data-theme="a" data-dismissible="false" style="max-width:500px;"> <div data-role="header" data-theme="a"><h1>'+c+'</h1></div><div role="main" class="ui-content"><h3 class="ui-title">'+c+"</h3>"+b+'<br><a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b optionConfirm" data-rel="back">Yes</a><a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b optionCancel" data-rel="back" data-transition="flow">No</a></div></div>').appendTo($.mobile.pageContainer);var a=$("#"+d);a.trigger("create");a.popup({afterclose:function(g,h){a.find(".optionConfirm").first().off("click");var f=a.attr("data-confirmed")==="yes"?true:false;$(g.target).remove();if(f&&e){e()}}});a.popup("open");a.find(".optionConfirm").first().on("click",function(){a.attr("data-confirmed","yes")})};