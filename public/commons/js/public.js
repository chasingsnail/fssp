/*!
 * =====================================================
 * AWSJS文件公共函数库文件，引入JS文件，Ajax请求封装代码等
 * v1.0 (http://www.actionsoft.com.cn)
 * 发布后文件名：public.js
 * =====================================================
 */
document.write('<script language="JavaScript" type="text/javascript" src="../commons/js/rsa/rsa.pwd.public.js?path=../"><\/script>');function selectChecked(d){var b="";for(var c=0;c<d.elements.length;c++){if((true==d.elements[c].checked)&&(d.elements[c].type=="checkbox")&&(false==d.elements[c].disabled)){b=(b+" "+d.elements[c].value)}}if(b!=""){var a=b.split(" ");a.shift();b=a.join(" ")}return b}function AutoSelectList(b){for(var a=0;a<b.elements.length;a++){if(b.elements[a].type=="checkbox"){try{var d=$(b.elements[a]).check("option","checked");$(b.elements[a]).check("option","checked",!d)}catch(c){console.log(c)}}}}function selectAll(b){for(var a=0;a<b.elements.length;a++){if(b.elements[a].type=="checkbox"){try{$(b.elements[a]).check("option","checked",true)}catch(c){console.log(c)}}}}function selectNone(b){for(var a=0;a<b.elements.length;a++){if(b.elements[a].type=="checkbox"){try{$(b.elements[a]).check("option","checked",false)}catch(c){console.log(c)}}}}function setCookie(h,g,a,e,c,d){var b=30;var f=new Date();f.setTime(f.getTime()+b*24*60*60*1000);d="https:"==document.location.protocol;document.cookie=h+"="+escape(g)+";expires="+f.toGMTString()+(d?";secure":"")}function getCookie(b){if(document.cookie!=""){var a=document.cookie.split(";");for(i=0;i<a.length;i++){if(a[i].indexOf(b)>-1){return unescape(a[i].split("=")[1])}}}}function delCookie(a){var c=new Date();c.setTime(c.getTime()-1);var b=getCookie(a);if(b!=null){document.cookie=a+"="+b+";expires="+c.toGMTString()}}function checkvalue(c,a){for(i=0;i<a.length;i++){if(a.charAt(i)==" "||a.charAt(i)=="]"||a.charAt(i)=="["){var b="[{1}]"+不允许包含空格等特殊符号;b=b.replace("{1}",c);$.simpleAlert(b);return false}}return true}function checkvalue2(e,b){if(b!=null){var c=new RegExp(/['"]/);var a=c.test(b);if(a){var d="[{1}]"+不允许包含英文单引号或双引号;d=d.replace("{1}",e);$.simpleAlert(d);return false}}return true}function lengthActual(c){if(typeof(c)=="string"){var a=c.match(/[^\x00-\xff]/ig);return c.length+(a==null?0:a.length)}else{try{c=c.join("");var a=c.match(/[^\x00-\xff]/ig);return c.length+(a==null?0:a.length)}catch(b){return c.length}}}function stringToDate(d,b){var a=null;var h=Date.parse(d);a=new Date(h);if(isNaN(a)){if(b=="yyyy-MM-dd HH:mm:ss"){var e=d.split(" ");var g=e[0].split("-");var c=e[1].split(":");var f=g[1];f=f.indexOf("0")==0?f.substring(1,2):f;a=new Date(g[0],parseInt(f)-1+"",g[2],c[0],c[1],c[2])}else{if(b=="yyyy-MM-dd"){var g=d.split("-");a=new Date(g[0],parseInt(g[1])-1+"",g[2],"","","")}}}return a}function compareStringDate(d,b){var a="yyyy-MM-dd";var e=stringToDate(d,a);var c=stringToDate(b,a);if(e<c){return false}return true}var Loginpassword={openupdatePasswordDailog:function(g,e,f){if(window.securityPwdMsg&&window.securityPwdMsg.length>0){$(".force-change-pwd-tips").find("td").html(window.securityPwdMsg)}var a=$("#securityPwdMsg").val();if(a&&a.length>0){$(".force-change-pwd-tips").find("td").html(a)}if(f==undefined){f=true}var b={text:确定,cls:"blue",handler:function(){if(!e){return}var l=$("#updatePasswordForm").find("#oldPassword").val();var k=$("#updatePasswordForm").find("#password").val();var h=$("#updatePasswordForm").find("#confirmPassword").val();if(l==""){$.simpleAlert(请输入旧口令,"info");return false}if(k==""){$.simpleAlert(请输入新口令,"info",2000);return false}if(Loginpassword.validateUpdateLoginpassword(k,"["+新口令+"]")){return false}if(h==""){$.simpleAlert(请输入确认口令,"info",2000);return false}if(k.length>32){$.simpleAlert(口令长度不允许超过32位,"info",2000);return false}if(l==k){$.simpleAlert(新口令不能和旧口令相同,"info",2000);return false}if(k!=h){$.simpleAlert(新口令和确认口令不一样,"info",2000);return false}e=false;var m="oldPassword="+rsa_pwd(l)+"&password="+rsa_pwd(k)+"&confirmPassword="+rsa_pwd(h);disableAll();$.post("./jd?sid="+sid+"&cmd=CLIENT_UPDATE_PASSWORD",m,function(n){if(n.result=="ok"){enableAll();if(forceChangePwd){$("#updatePasswordForm").find("tr").first().remove();forceChangePwd=false}$.simpleAlert(登录口令修改成功,n.result,2000,{callback:function(){$("#updatePasswordForm").get(0).reset();$("#updatePasswordDailog").dialog("close")}})}else{enableAll();$.simpleAlert(n.msg?n.msg:操作失败,n.result)}e=true},"json")}};var d={text:取消,cls:"white",handler:function(){$("#updatePasswordDailog").dialog("close")}};var c=[b,d];if(f){c=[b]}$("#"+g).dialog({title:修改登录口令,closable:f?false:true,draggable:false,buttons:c})},validateUpdateLoginpassword:function(b,a){if(securityMinPwdLength>0){if(b.length<securityMinPwdLength){$.simpleAlert(a+不得少于+securityMinPwdLength+个字符);return true}if(b.length>securityMaxPwdLength){$.simpleAlert(a+不允许超过+securityMaxPwdLength+个字符);return true}}if(isSecurityPwdComplexity){}return false}};function validateLengthAndSpace(h,d,a,c,g){if(arguments.length==3){if((lengthActual(d)>a)){try{$.simpleAlert("["+h+"]"+长度不能超过+a+个字符,"info",1000,{model:true})}catch(f){$.simpleAlert("["+h+"]长度不能超过"+a+"个字符","info",1000,{model:true})}return false}return true}if(arguments.length==2){if(d.replace(/\s/g,"")==""){try{$.simpleAlert("["+h+"]"+不允许为空,"info",1000,{model:true})}catch(f){$.simpleAlert("["+h+"]不允许为空","info",1000,{model:true})}return false}return true}if(arguments.length==5){if(!c){if(isIncSpace(d)){try{$.simpleAlert("["+h+"]"+不允许包含空格,"info",1000,{model:true})}catch(f){$.simpleAlert("["+h+"]不允许为空或者包含空格","info",1000,{model:true})}return false}}if((lengthActual(d)>a)){try{$.simpleAlert("["+h+"]"+不允许超过+a+个字符,"info",1000,{model:true})}catch(f){$.simpleAlert("["+h+"]不允许超过"+a+"个字符","info",1000,{model:true})}return false}if(g){var b=/^(\d*,\d*$)|(^\d*$)/;if(!b.test(d)){try{$.simpleAlert("["+h+"]"+必须是数字类型,"info",1000,{model:true})}catch(f){$.simpleAlert("["+h+"]必须是数字类型","info",1000,{model:true})}return false}}return true}}function validateMobilePhone(c,a){if(a.charAt(0)=="0"&&a.length>12){try{$.simpleAlert(数据未通过合法性校验+"["+c+"]"+格式错误,"info",1000,{model:true})}catch(b){$.simpleAlert("数据未通过合法性校验["+c+"]格式错误","info",1000,{model:true})}return false}else{if(a.charAt(0)!="0"&&a.length>11){try{$.simpleAlert(数据未通过合法性校验+"["+c+"]"+格式错误,"info",1000,{model:true})}catch(b){$.simpleAlert("数据未通过合法性校验["+c+"]格式错误","info",1000,{model:true})}return false}}if(!(/^\d{11}$/.test(a))){try{$.simpleAlert(数据未通过合法性校验+"["+c+"]"+格式错误,"info",1000,{model:true})}catch(b){$.simpleAlert("数据未通过合法性校验["+c+"]格式错误","info",1000,{model:true})}return false}return true}function validatePhone(f,c){var a=/(^[0-9]{3,4}\-[0-9]{7,8}$)|(^[0-9]{7,8}$)|(^\([0-9]{3,4}\)[0-9]{7,8}$)|(^[0-9]{3,4}\-[0-9]{7,8}\-[0-9]{1,9}$)|(^[0-9]{7,8}\-[0-9]{1,9}$)|(^\([0-9]{3,4}\)[0-9]{7,8}\-[0-9]{1,9}|(^\+[0-9]{2,4}\-[0-9]{2,4}\-[0-9]{6,8}$)|(^\+\d{2,4}\d{2,4}\d{6,8}$))/ig;if(!c.match(a)){if(c.indexOf("+")>-1){try{$.simpleAlert(数据未通过合法性校验+"["+f+"]"+格式错误+"<br>"+国际电话格式+"86-10-12345678","info",2000,{model:true})}catch(d){$.simpleAlert("数据未通过合法性校验["+f+"]格式错误<br>国际电话格式86-10-12345678","info",2000,{model:true})}return false}try{$.simpleAlert(数据未通过合法性校验+"["+f+"]"+格式错误+"<br>"+国内电话格式+"010-12345678"+或+"0312-12345678"+或+"12345678","info",12000,{model:true})}catch(b){$.simpleAlert("数据未通过合法性校验["+f+"]格式错误<br>国内电话格式010-12345678或0312-12345678或12345678","info",2000,{model:true})}return false}return true}function validateEmail(d,b){var a=new RegExp(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/g);if(!a.test(b)){try{$.simpleAlert(数据未通过合法性校验+"["+d+"]"+格式错误,"info",1000,{model:true})}catch(c){$.simpleAlert("数据未通过合法性校验["+d+"]格式错误","info",1000,{model:true})}return false}return true}String.prototype.endWith=function(a){if(a==null||a==""||this.length==0||a.length>this.length){return false}if(this.substring(this.length-a.length)==a){return true}else{return false}return true};String.prototype.startWith=function(a){if(a==null||a==""||this.length==0||a.length>this.length){return false}if(this.substr(0,a.length)==a){return true}else{return false}return true};function isIncSpace(b){var a=/\s/;return(a.test(b))}function checkSymbols(g,d,c,b,e,a){var f=/[\|\'\"\+\*\/\%\^\=\\\!\&\:\;\~\`\#\<\>\$]+/;if(d){f=/[\|\'\"\+\*\/\%\^\=\\\!\&\:\;\~\`\#\<\>\$]+/}else{if(c){f=/[\|\'\"\+\*\/\%\^\=\\\!\&\:\;\~\`\#\<\>\$\@]+/}}if(c){f=/[\|\'\"\+\*\/\%\^\=\\\!\&\:\;\~\`\#\<\>\s\$]+/}if(b&&c){f=/[\|\'\"\+\/\^\\\!\~\<\>\s\$]+/}else{if(b){f=/[\|\'\"\+\/\^\\\!\~\<\>\$]+/}else{if(e){f=/[\|\'\"\+\*\/\%\^\=\\\!\&\;\~\`\#\<\>\$]+/}}}if(a){f=/[\?\|\"\'\+\*\/\%\^\=\\\!\:\;\~\`\#\<\>\$]+/}return(f.test(g))}function orgCheckSymbols(c,a){var b=/[\？\?\|\'\"\+\*\/\%\^\=\\\!\&\:\;\~\`\#\<\>\$]+/;if(a){b=/[\？\?\|\'\"\+\/\^\\\!\~\<\>\$]+/}return(b.test(c))}function trim(a){return a.replace(/(^\s*)|(\s*$)/g,"")}function isMailAddress(a){if(a==""){return true}i=a.indexOf("@");j=a.lastIndexOf("@");if(i==-1){return false}if(i!=j){return false}if(i==a.length){return false}return true}function isURLAddress(a){var b=/^((https|http|ftp|rtsp|mms)?:\/\/)+[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/;if(!b.test(a)){return false}else{return true}}function deployFunction(a,c){var b=c?parent.FrmDialog:FrmDialog;b.open({title:快速部署,width:800,height:390,id:"deploy",closable:false,buttons:[{text:部署,cls:"blue",handler:function(){b.get("deploy").win().deployFunction()}},{text:关闭,handler:function(){removeSecurity(b.get("deploy").$("#functionId").val(),"nav");b.get("deploy").close()}}]},a,{},"deploy")}function enableAll(a){if(a){$("#"+a).find("button, .button, input[type='button']").removeAttr("disabled");$("#"+a).find("button, .button, input[type='button']").removeClass("disable")}else{$("button, .button, input[type='button']").removeAttr("disabled");$("button, .button, input[type='button']").removeClass("disable")}}function disableAll(a){if(a&&typeof(a)=="string"){$("#"+a).find("button, .button, input[type='button']").attr("disabled","true");$("#"+a).find("button, .button, input[type='button']").addClass("disable")}else{if(a){$(a).find("button, .button, input[type='button']").attr("disabled","true");$(a).find("button, .button, input[type='button']").addClass("disable")}else{$("button, .button, input[type='button']").attr("disabled","true");$("button, .button, input[type='button']").addClass("disable")}}}function addSec(c,a){var b="";if(window.sid){if(typeof(sid)=="object"){b=sid.value;if(b==null){b=sid[0].value}}else{b=sid}}b=b==""?$("#sid").val():b;FrmDialog.open({title:授权,closable:false,width:650,height:400,buttons:[{text:确定,cls:"blue",model:false,handler:function(){disableAll();FrmDialog.get("security").win().saveSec()}},{text:关闭,handler:function(){FrmDialog.get("security").close()}}]},"./w",{sid:b,cmd:"CLIENT_M_COMMON_SECURITYGROUP_ADD",id:c,permissionType:a},"security")}function removeSecurity(c,a){var b;if(window.sid){if(typeof(sid)=="object"){b=sid.value;if(b==null){b=sid[0].value}}else{b=sid}}if(b==null||b==undefined){b=$("#sid").val()}awsui.ajax.request({type:"POST",url:"./jd",dataType:"json",data:{sid:b,cmd:"CLIENT_M_NAV_SECURITYGROUP_REMOVE",id:c,permissionType:a}})}String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.ltrim=function(){return this.replace(/(^\s*)/g,"")};String.prototype.rtrim=function(){return this.replace(/(\s*$)/g,"")};function getExplorer(){var a=window.navigator.userAgent;if(isIE()){return"IE"}else{if(a.indexOf("Firefox")>=0){return"Firefox"}else{if(a.indexOf("Chrome")>=0){return"Chrome"}else{if(a.indexOf("Opera")>=0){return"Opera"}else{if(a.indexOf("Safari")>=0){return"Safari"}}}}}}function isIE(){if(!!window.ActiveXObject||"ActiveXObject" in window){return true}else{return false}}function objEquals(c,b){for(var a in c){if(c.hasOwnProperty(a)){if(!b.hasOwnProperty(a)){return false}if(c[a]!=b[a]){return false}}}for(var a in b){if(b.hasOwnProperty(a)){if(!c.hasOwnProperty(a)){return false}if(c[a]!=b[a]){return false}}}return true}function getWidthOfContentWin(c,b){if(c==null){c=0.7}if(b==null){b=650}var a=$(window).width()*c;return a>b?a:b}function getHeightOfContentWin(b,a){if(b==null){b=0.7}if(a==null){a=380}var c=$(window).height()*b;return c>a?c:a}function addComma(a){a=a.toString();re=/(\d{1,3})(?=(\d{3})+(?:$|\.))/g;n1=a.replace(re,"$1,");return n1}function removeComma(b){var a=b+"";a=a.replace(new RegExp(",","g"),"");if(/^[-+]?[0-9]+(\.[0-9]+)?$/.test(a)){return a}else{return b}}function updateNavBubbleNum(a,f){try{var c=f.frameElement.getAttribute("functionid");var b=f.parent.$("div[func_id='"+c+"']");if(b.length>0){if(0<a&&a<99){b.find(".nav-area-tile").css("display","block");b.find(".nav-area-tile").html(a)}else{if(a==undefined||a==0){b.find(".nav-area-tile").css("display","none")}else{if(a>99){b.find(".nav-area-tile").css("right","3px");b.find(".nav-area-tile").html('99<span class="nav-area-tile-add">+</span>')}}}}}catch(d){}}function forbideKeys(){}forbideKeys();